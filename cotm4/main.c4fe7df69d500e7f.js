"use strict";(self.webpackChunkcotm_front2=self.webpackChunkcotm_front2||[]).push([[179],{784:(A2,b,z)=>{function v(e){return"function"==typeof e}function y(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const O=y(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function w(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class L{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const a of t)a.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(v(r))try{r()}catch(a){n=a instanceof O?a.errors:[a]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const a of i)try{_(a)}catch(o){n=n??[],o instanceof O?n=[...n,...o.errors]:n.push(o)}}if(n)throw new O(n)}}add(n){var t;if(n&&n!==this)if(this.closed)_(n);else{if(n instanceof L){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&w(t,n)}remove(n){const{_finalizers:t}=this;t&&w(t,n),n instanceof L&&n._removeParent(this)}}L.EMPTY=(()=>{const e=new L;return e.closed=!0,e})();const M=L.EMPTY;function x(e){return e instanceof L||e&&"closed"in e&&v(e.remove)&&v(e.add)&&v(e.unsubscribe)}function _(e){v(e)?e():e.unsubscribe()}const H={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},g={setTimeout(e,n,...t){const{delegate:r}=g;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=g;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function k(e){g.setTimeout(()=>{const{onUnhandledError:n}=H;if(!n)throw e;n(e)})}function d(){}const p=n2("C",void 0,void 0);function n2(e,n,t){return{kind:e,value:n,error:t}}let K=null;function t2(e){if(H.useDeprecatedSynchronousErrorHandling){const n=!K;if(n&&(K={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=K;if(K=null,t)throw r}}else e()}class p2 extends L{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,x(n)&&n.add(this)):this.destination=f2}static create(n,t,r){return new U(n,t,r)}next(n){this.isStopped?$(function e2(e){return n2("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?$(function q(e){return n2("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?$(p,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const H2=Function.prototype.bind;function P(e,n){return H2.call(e,n)}class j{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){h(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){h(r)}else h(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){h(t)}}}class U extends p2{constructor(n,t,r){let i;if(super(),v(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let a;this&&H.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&P(n.next,a),error:n.error&&P(n.error,a),complete:n.complete&&P(n.complete,a)}):i=n}this.destination=new j(i)}}function h(e){H.useDeprecatedSynchronousErrorHandling?function Y(e){H.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=e)}(e):k(e)}function $(e,n){const{onStoppedNotification:t}=H;t&&g.setTimeout(()=>t(e,n))}const f2={closed:!0,next:d,error:function D(e){throw e},complete:d},l2="function"==typeof Symbol&&Symbol.observable||"@@observable";function N2(e){return e}function m(...e){return S(e)}function S(e){return 0===e.length?N2:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let N=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const a=function m2(e){return e&&e instanceof p2||function Q(e){return e&&v(e.next)&&v(e.error)&&v(e.complete)}(e)&&x(e)}(t)?t:new U(t,r,i);return t2(()=>{const{operator:o,source:s}=this;a.add(o?o.call(a,s):s?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=A(r))((i,a)=>{const o=new U({next:s=>{try{t(s)}catch(c){a(c),o.unsubscribe()}},error:a,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[l2](){return this}pipe(...t){return S(t)(this)}toPromise(t){return new(t=A(t))((r,i)=>{let a;this.subscribe(o=>a=o,o=>i(o),()=>r(a))})}}return e.create=n=>new e(n),e})();function A(e){var n;return null!==(n=e??H.Promise)&&void 0!==n?n:Promise}const T2=y(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let I2=(()=>{class e extends N{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new E1(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new T2}next(t){t2(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){t2(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){t2(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:a}=this;return r||i?M:(this.currentObservers=null,a.push(t),new L(()=>{this.currentObservers=null,w(a,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:a}=this;r?t.error(i):a&&t.complete()}asObservable(){const t=new N;return t.source=this,t}}return e.create=(n,t)=>new E1(n,t),e})();class E1 extends I2{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:M}}function l1(e){return n=>{if(function R3(e){return v(e?.lift)}(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function F2(e,n,t,r,i){return new d1(e,n,t,r,i)}class d1 extends p2{constructor(n,t,r,i,a,o){super(n),this.onFinalize=a,this.shouldUnsubscribe=o,this._next=t?function(s){try{t(s)}catch(c){n.error(c)}}:super._next,this._error=i?function(s){try{i(s)}catch(c){n.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){n.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function P1(e,n){return l1((t,r)=>{let i=0;t.subscribe(F2(r,a=>{r.next(e.call(n,a,i++))}))})}function B3(e){return this instanceof B3?(this.v=e,this):new B3(e)}function O5(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(V){return new Promise(function(E,B){a.push([f,V,E,B])>1||s(f,V)})})}function s(f,V){try{!function c(f){f.value instanceof B3?Promise.resolve(f.value.v).then(l,C):u(a[0][2],f)}(r[f](V))}catch(E){u(a[0][3],E)}}function l(f){s("next",f)}function C(f){s("throw",f)}function u(f,V){f(V),a.shift(),a.length&&s(a[0][0],a[0][1])}}function I5(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function w1(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=e[a]&&function(o){return new Promise(function(s,c){!function i(a,o,s,c){Promise.resolve(c).then(function(l){a({value:l,done:s})},o)}(s,c,(o=e[a](o)).done,o.value)})}}}const Vn=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Ba(e){return v(e?.then)}function ja(e){return v(e[l2])}function Wa(e){return Symbol.asyncIterator&&v(e?.[Symbol.asyncIterator])}function Ua(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ga=function ny(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function $a(e){return v(e?.[Ga])}function qa(e){return O5(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield B3(t.read());if(i)return yield B3(void 0);yield yield B3(r)}}finally{t.releaseLock()}})}function Ka(e){return v(e?.getReader)}function z3(e){if(e instanceof N)return e;if(null!=e){if(ja(e))return function ry(e){return new N(n=>{const t=e[l2]();if(v(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Vn(e))return function iy(e){return new N(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(Ba(e))return function ay(e){return new N(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,k)})}(e);if(Wa(e))return Ya(e);if($a(e))return function oy(e){return new N(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(Ka(e))return function sy(e){return Ya(qa(e))}(e)}throw Ua(e)}function Ya(e){return new N(n=>{(function cy(e,n){var t,r,i,a;return function L6(e,n,t,r){return new(t||(t=Promise))(function(a,o){function s(C){try{l(r.next(C))}catch(u){o(u)}}function c(C){try{l(r.throw(C))}catch(u){o(u)}}function l(C){C.done?a(C.value):function i(a){return a instanceof t?a:new t(function(o){o(a)})}(C.value).then(s,c)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=I5(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(a=t.return)&&(yield a.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function S4(e,n,t,r=0,i=!1){const a=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!i)return a}function yn(e,n,t=1/0){return v(n)?yn((r,i)=>P1((a,o)=>n(r,a,i,o))(z3(e(r,i))),t):("number"==typeof n&&(t=n),l1((r,i)=>function ly(e,n,t,r,i,a,o,s){const c=[];let l=0,C=0,u=!1;const f=()=>{u&&!c.length&&!l&&n.complete()},V=B=>l<r?E(B):c.push(B),E=B=>{a&&n.next(B),l++;let J=!1;z3(t(B,C++)).subscribe(F2(n,X=>{i?.(X),a?V(X):n.next(X)},()=>{J=!0},void 0,()=>{if(J)try{for(l--;c.length&&l<r;){const X=c.shift();o?S4(n,o,()=>E(X)):E(X)}f()}catch(X){n.error(X)}}))};return e.subscribe(F2(n,V,()=>{u=!0,f()})),()=>{s?.()}}(r,i,e,t)))}const Hn=new N(e=>e.complete());function _n(e){return e[e.length-1]}function Qa(e){return function fy(e){return e&&v(e.schedule)}(_n(e))?e.pop():void 0}function Ja(e,n=0){return l1((t,r)=>{t.subscribe(F2(r,i=>S4(r,e,()=>r.next(i),n),()=>S4(r,e,()=>r.complete(),n),i=>S4(r,e,()=>r.error(i),n)))})}function Za(e,n=0){return l1((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function Xa(e,n){if(!e)throw new Error("Iterable cannot be null");return new N(t=>{S4(t,n,()=>{const r=e[Symbol.asyncIterator]();S4(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function F5(e,n){return n?function Ly(e,n){if(null!=e){if(ja(e))return function py(e,n){return z3(e).pipe(Za(n),Ja(n))}(e,n);if(Vn(e))return function gy(e,n){return new N(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(Ba(e))return function my(e,n){return z3(e).pipe(Za(n),Ja(n))}(e,n);if(Wa(e))return Xa(e,n);if($a(e))return function vy(e,n){return new N(t=>{let r;return S4(t,n,()=>{r=e[Ga](),S4(t,n,()=>{let i,a;try{({value:i,done:a}=r.next())}catch(o){return void t.error(o)}a?t.complete():t.next(i)},0,!0)}),()=>v(r?.return)&&r.return()})}(e,n);if(Ka(e))return function My(e,n){return Xa(qa(e),n)}(e,n)}throw Ua(e)}(e,n):z3(e)}function zn(...e){const n=Qa(e),t=function hy(e,n){return"number"==typeof _n(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?z3(r[0]):function Cy(e=1/0){return yn(N2,e)}(t)(F5(r,n)):Hn}function bn(e={}){const{connector:n=(()=>new I2),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return a=>{let o,s,c,l=0,C=!1,u=!1;const f=()=>{s?.unsubscribe(),s=void 0},V=()=>{f(),o=c=void 0,C=u=!1},E=()=>{const B=o;V(),B?.unsubscribe()};return l1((B,J)=>{l++,!u&&!C&&f();const X=c=c??n();J.add(()=>{l--,0===l&&!u&&!C&&(s=Sn(E,i))}),X.subscribe(J),!o&&l>0&&(o=new U({next:s2=>X.next(s2),error:s2=>{u=!0,f(),s=Sn(V,t,s2),X.error(s2)},complete:()=>{C=!0,f(),s=Sn(V,r),X.complete()}}),z3(B).subscribe(o))})(a)}}function Sn(e,n,...t){if(!0===n)return void e();if(!1===n)return;const r=new U({next:()=>{r.unsubscribe(),e()}});return n(...t).subscribe(r)}function X2(e){for(let n in e)if(e[n]===X2)return n;throw Error("Could not find renamed property on target object.")}function wn(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function e1(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(e1).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function xn(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Vy=X2({__forward_ref__:X2});function t1(e){return e.__forward_ref__=t1,e.toString=function(){return e1(this())},e}function y2(e){return Dn(e)?e():e}function Dn(e){return"function"==typeof e&&e.hasOwnProperty(Vy)&&e.__forward_ref__===t1}class h2 extends Error{constructor(n,t){super(function R5(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}(n,t)),this.code=n}}function w2(e){return"string"==typeof e?e:null==e?"":String(e)}function B5(e,n){throw new h2(-201,!1)}function e3(e,n){null==e&&function Y2(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function B2(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function t3(e){return{providers:e.providers||[],imports:e.imports||[]}}function Nn(e){return e9(e,j5)||e9(e,n9)}function e9(e,n){return e.hasOwnProperty(n)?e[n]:null}function t9(e){return e&&(e.hasOwnProperty(En)||e.hasOwnProperty(xy))?e[En]:null}const j5=X2({\u0275prov:X2}),En=X2({\u0275inj:X2}),n9=X2({ngInjectableDef:X2}),xy=X2({ngInjectorDef:X2});var _2=(()=>((_2=_2||{})[_2.Default=0]="Default",_2[_2.Host=1]="Host",_2[_2.Self=2]="Self",_2[_2.SkipSelf=4]="SkipSelf",_2[_2.Optional=8]="Optional",_2))();let Pn;function h3(e){const n=Pn;return Pn=e,n}function r9(e,n,t){const r=Nn(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&_2.Optional?null:void 0!==n?n:void B5(e1(e))}function w4(e){return{toString:e}.toString()}var b3=(()=>((b3=b3||{})[b3.OnPush=0]="OnPush",b3[b3.Default=1]="Default",b3))(),j3=(()=>{return(e=j3||(j3={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",j3;var e})();const Z2=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ve={},K2=[],W5=X2({\u0275cmp:X2}),kn=X2({\u0275dir:X2}),An=X2({\u0275pipe:X2}),i9=X2({\u0275mod:X2}),s4=X2({\u0275fac:X2}),H6=X2({__NG_ELEMENT_ID__:X2});let Ny=0;function a1(e){return w4(()=>{const t=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===b3.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||K2,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||j3.Emulated,id:"c"+Ny++,styles:e.styles||K2,_:null,setInput:null,schemas:e.schemas||null,tView:null},a=e.dependencies,o=e.features;return i.inputs=s9(e.inputs,r),i.outputs=s9(e.outputs),o&&o.forEach(s=>s(i)),i.directiveDefs=a?()=>("function"==typeof a?a():a).map(a9).filter(o9):null,i.pipeDefs=a?()=>("function"==typeof a?a():a).map(B1).filter(o9):null,i})}function a9(e){return J2(e)||R1(e)}function o9(e){return null!==e}function p3(e){return w4(()=>({type:e.type,bootstrap:e.bootstrap||K2,declarations:e.declarations||K2,imports:e.imports||K2,exports:e.exports||K2,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function s9(e,n){if(null==e)return ve;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),t[i]=r,n&&(n[i]=a)}return t}const z2=a1;function Y1(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function J2(e){return e[W5]||null}function R1(e){return e[kn]||null}function B1(e){return e[An]||null}function Q1(e){return Array.isArray(e)&&"object"==typeof e[1]}function w3(e){return Array.isArray(e)&&!0===e[1]}function In(e){return 0!=(8&e.flags)}function q5(e){return 2==(2&e.flags)}function K5(e){return 1==(1&e.flags)}function x3(e){return null!==e.template}function Oy(e){return 0!=(256&e[2])}function X4(e,n){return e.hasOwnProperty(s4)?e[s4]:null}class Ry{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function i3(){return C9}function C9(e){return e.type.prototype.ngOnChanges&&(e.setInput=jy),By}function By(){const e=f9(this),n=e?.current;if(n){const t=e.previous;if(t===ve)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function jy(e,n,t,r){const i=f9(e)||function Wy(e,n){return e[u9]=n}(e,{previous:ve,current:null}),a=i.current||(i.current={}),o=i.previous,s=this.declaredInputs[t],c=o[s];a[s]=new Ry(c&&c.currentValue,n,o===ve),e[r]=n}i3.ngInherit=!0;const u9="__ngSimpleChanges__";function f9(e){return e[u9]||null}function M1(e){for(;Array.isArray(e);)e=e[0];return e}function Y5(e,n){return M1(n[e])}function v3(e,n){return M1(n[e.index])}function Wn(e,n){return e.data[n]}function He(e,n){return e[n]}function a3(e,n){const t=n[e];return Q1(t)?t:t[0]}function d9(e){return 4==(4&e[2])}function Q5(e){return 64==(64&e[2])}function x4(e,n){return null==n?null:e[n]}function h9(e){e[18]=0}function Un(e,n){e[5]+=n;let t=e,r=e[3];for(;null!==r&&(1===n&&1===t[5]||-1===n&&0===t[5]);)r[5]+=n,t=r,r=r[3]}const S2={lFrame:H9(null),bindingsEnabled:!0};function m9(){return S2.bindingsEnabled}function Z(){return S2.lFrame.lView}function j2(){return S2.lFrame.tView}function C1(e){return S2.lFrame.contextLView=e,e[8]}function u1(e){return S2.lFrame.contextLView=null,e}function y1(){let e=g9();for(;null!==e&&64===e.type;)e=e.parent;return e}function g9(){return S2.lFrame.currentTNode}function W3(e,n){const t=S2.lFrame;t.currentTNode=e,t.isParent=n}function Gn(){return S2.lFrame.isParent}function $n(){S2.lFrame.isParent=!1}function j1(){const e=S2.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function _e(){return S2.lFrame.bindingIndex++}function l4(e){const n=S2.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function rH(e,n){const t=S2.lFrame;t.bindingIndex=t.bindingRootIndex=e,qn(n)}function qn(e){S2.lFrame.currentDirectiveIndex=e}function L9(){return S2.lFrame.currentQueryIndex}function Yn(e){S2.lFrame.currentQueryIndex=e}function aH(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[6]:null}function V9(e,n,t){if(t&_2.SkipSelf){let i=n,a=e;for(;!(i=i.parent,null!==i||t&_2.Host||(i=aH(a),null===i||(a=a[15],10&i.type))););if(null===i)return!1;n=i,e=a}const r=S2.lFrame=y9();return r.currentTNode=n,r.lView=e,!0}function Qn(e){const n=y9(),t=e[1];S2.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function y9(){const e=S2.lFrame,n=null===e?null:e.child;return null===n?H9(e):n}function H9(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function _9(){const e=S2.lFrame;return S2.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const z9=_9;function Jn(){const e=_9();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function W1(){return S2.lFrame.selectedIndex}function D4(e){S2.lFrame.selectedIndex=e}function m1(){const e=S2.lFrame;return Wn(e.tView,e.selectedIndex)}function w6(){S2.lFrame.currentNamespace="svg"}function Z5(){!function lH(){S2.lFrame.currentNamespace=null}()}function X5(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const a=e.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:s,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:C}=a;o&&(e.contentHooks||(e.contentHooks=[])).push(-t,o),s&&((e.contentHooks||(e.contentHooks=[])).push(t,s),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,s)),c&&(e.viewHooks||(e.viewHooks=[])).push(-t,c),l&&((e.viewHooks||(e.viewHooks=[])).push(t,l),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,l)),null!=C&&(e.destroyHooks||(e.destroyHooks=[])).push(t,C)}}function et(e,n,t){b9(e,n,3,t)}function tt(e,n,t,r){(3&e[2])===t&&b9(e,n,t,r)}function Zn(e,n){let t=e[2];(3&t)===n&&(t&=2047,t+=1,e[2]=t)}function b9(e,n,t,r){const a=r??-1,o=n.length-1;let s=0;for(let c=void 0!==r?65535&e[18]:0;c<o;c++)if("number"==typeof n[c+1]){if(s=n[c],null!=r&&s>=r)break}else n[c]<0&&(e[18]+=65536),(s<a||-1==a)&&(fH(e,t,n,c),e[18]=(4294901760&e[18])+c+2),c++}function fH(e,n,t,r){const i=t[r]<0,a=t[r+1],s=e[i?-t[r]:t[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===n){e[2]+=2048;try{a.call(s)}finally{}}}else try{a.call(s)}finally{}}class x6{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function nt(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const a=t[r++],o=t[r++],s=t[r++];e.setAttribute(n,o,s,a)}else{const a=i,o=t[++r];w9(a)?e.setProperty(n,a,o):e.setAttribute(n,a,o),r++}}return r}function S9(e){return 3===e||4===e||6===e}function w9(e){return 64===e.charCodeAt(0)}function rt(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||x9(e,t,i,null,-1===t||2===t?n[++r]:null)}}return e}function x9(e,n,t,r,i){let a=0,o=e.length;if(-1===n)o=-1;else for(;a<e.length;){const s=e[a++];if("number"==typeof s){if(s===n){o=-1;break}if(s>n){o=a-1;break}}}for(;a<e.length;){const s=e[a];if("number"==typeof s)break;if(s===t){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==o&&(e.splice(o,0,n),a=o+1),e.splice(a++,0,t),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}function D9(e){return-1!==e}function ze(e){return 32767&e}function be(e,n){let t=function gH(e){return e>>16}(e),r=n;for(;t>0;)r=r[15],t--;return r}let e0=!0;function it(e){const n=e0;return e0=e,n}let vH=0;const U3={};function N6(e,n){const t=n0(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,t0(r.data,e),t0(n,null),t0(r.blueprint,null));const i=at(e,n),a=e.injectorIndex;if(D9(i)){const o=ze(i),s=be(i,n),c=s[1].data;for(let l=0;l<8;l++)n[a+l]=s[o+l]|c[o+l]}return n[a+8]=i,a}function t0(e,n){e.push(0,0,0,0,0,0,0,0,n)}function n0(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function at(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=F9(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function ot(e,n,t){!function MH(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(H6)&&(r=t[H6]),null==r&&(r=t[H6]=vH++);const i=255&r;n.data[e+(i>>5)]|=1<<i}(e,n,t)}function P9(e,n,t){if(t&_2.Optional)return e;B5()}function k9(e,n,t,r){if(t&_2.Optional&&void 0===r&&(r=null),0==(t&(_2.Self|_2.Host))){const i=e[9],a=h3(void 0);try{return i?i.get(n,r,t&_2.Optional):r9(n,r,t&_2.Optional)}finally{h3(a)}}return P9(r,0,t)}function A9(e,n,t,r=_2.Default,i){if(null!==e){if(1024&n[2]){const o=function _H(e,n,t,r,i){let a=e,o=n;for(;null!==a&&null!==o&&1024&o[2]&&!(256&o[2]);){const s=T9(a,o,t,r|_2.Self,U3);if(s!==U3)return s;let c=a.parent;if(!c){const l=o[21];if(l){const C=l.get(t,U3,r);if(C!==U3)return C}c=F9(o),o=o[15]}a=c}return i}(e,n,t,r,U3);if(o!==U3)return o}const a=T9(e,n,t,r,U3);if(a!==U3)return a}return k9(n,t,r,i)}function T9(e,n,t,r,i){const a=function yH(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(H6)?e[H6]:void 0;return"number"==typeof n?n>=0?255&n:HH:n}(t);if("function"==typeof a){if(!V9(n,e,r))return r&_2.Host?P9(i,0,r):k9(n,t,r,i);try{const o=a(r);if(null!=o||r&_2.Optional)return o;B5()}finally{z9()}}else if("number"==typeof a){let o=null,s=n0(e,n),c=-1,l=r&_2.Host?n[16][6]:null;for((-1===s||r&_2.SkipSelf)&&(c=-1===s?at(e,n):n[s+8],-1!==c&&I9(r,!1)?(o=n[1],s=ze(c),n=be(c,n)):s=-1);-1!==s;){const C=n[1];if(O9(a,s,C.data)){const u=VH(s,n,t,o,r,l);if(u!==U3)return u}c=n[s+8],-1!==c&&I9(r,n[1].data[s+8]===l)&&O9(a,s,n)?(o=C,s=ze(c),n=be(c,n)):s=-1}}return i}function VH(e,n,t,r,i,a){const o=n[1],s=o.data[e+8],C=st(s,o,t,null==r?q5(s)&&e0:r!=o&&0!=(3&s.type),i&_2.Host&&a===s);return null!==C?E6(n,o,C,s):U3}function st(e,n,t,r,i){const a=e.providerIndexes,o=n.data,s=1048575&a,c=e.directiveStart,C=a>>20,f=i?s+C:e.directiveEnd;for(let V=r?s:s+C;V<f;V++){const E=o[V];if(V<c&&t===E||V>=c&&E.type===t)return V}if(i){const V=o[c];if(V&&x3(V)&&V.type===t)return c}return null}function E6(e,n,t,r){let i=e[t];const a=n.data;if(function dH(e){return e instanceof x6}(i)){const o=i;o.resolving&&function yy(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new h2(-200,`Circular dependency in DI detected for ${e}${t}`)}(function q2(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():w2(e)}(a[t]));const s=it(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?h3(o.injectImpl):null;V9(e,r,_2.Default);try{i=e[t]=o.factory(void 0,a,e,r),n.firstCreatePass&&t>=r.directiveStart&&function uH(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:a}=n.type.prototype;if(r){const o=C9(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,i),a&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,a))}(t,a[t],n)}finally{null!==c&&h3(c),it(s),o.resolving=!1,z9()}}return i}function O9(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function I9(e,n){return!(e&_2.Self||e&_2.Host&&n)}class Se{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return A9(this._tNode,this._lView,n,r,t)}}function HH(){return new Se(y1(),Z())}function H1(e){return w4(()=>{const n=e.prototype.constructor,t=n[s4]||r0(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const a=i[s4]||r0(i);if(a&&a!==t)return a;i=Object.getPrototypeOf(i)}return a=>new a})}function r0(e){return Dn(e)?()=>{const n=r0(y2(e));return n&&n()}:X4(e)}function F9(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[6]:null}const xe="__parameters__";function Ne(e,n,t){return w4(()=>{const r=function o0(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...a){if(this instanceof i)return r.apply(this,a),this;const o=new i(...a);return s.annotation=o,s;function s(c,l,C){const u=c.hasOwnProperty(xe)?c[xe]:Object.defineProperty(c,xe,{value:[]})[xe];for(;u.length<=C;)u.push(null);return(u[C]=u[C]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class x2{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=B2({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function o3(e,n){void 0===n&&(n=e);for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)?(n===e&&(n=e.slice(0,t)),o3(r,n)):n!==e&&n.push(r)}return n}function C4(e,n){e.forEach(t=>Array.isArray(t)?C4(t,n):n(t))}function B9(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function ct(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function A6(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}function s3(e,n,t){let r=Ee(e,n);return r>=0?e[1|r]=t:(r=~r,function wH(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function c0(e,n){const t=Ee(e,n);if(t>=0)return e[1|t]}function Ee(e,n){return function U9(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const a=r+(i-r>>1),o=e[a<<t];if(n===o)return a<<t;o>n?i=a:r=a+1}return~(i<<t)}(e,n,1)}const T6={},C0="__NG_DI_FLAG__",Ct="ngTempTokenPath",TH=/\n/gm,G9="__source";let O6;function Pe(e){const n=O6;return O6=e,n}function IH(e,n=_2.Default){if(void 0===O6)throw new h2(-203,!1);return null===O6?r9(e,void 0,n):O6.get(e,n&_2.Optional?null:void 0,n)}function P2(e,n=_2.Default){return(function Dy(){return Pn}()||IH)(y2(e),n)}function u0(e,n=_2.Default){return"number"!=typeof n&&(n=0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)),P2(e,n)}function f0(e){const n=[];for(let t=0;t<e.length;t++){const r=y2(e[t]);if(Array.isArray(r)){if(0===r.length)throw new h2(900,!1);let i,a=_2.Default;for(let o=0;o<r.length;o++){const s=r[o],c=FH(s);"number"==typeof c?-1===c?i=s.token:a|=c:i=s}n.push(P2(i,a))}else n.push(P2(r))}return n}function I6(e,n){return e[C0]=n,e.prototype[C0]=n,e}function FH(e){return e[C0]}const ut=I6(Ne("Optional"),8),ft=I6(Ne("SkipSelf"),4);let h0,pt,mt;function Ae(e){return function p0(){if(void 0===pt&&(pt=null,Z2.trustedTypes))try{pt=Z2.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return pt}()?.createHTML(e)||e}function to(e){return function m0(){if(void 0===mt&&(mt=null,Z2.trustedTypes))try{mt=Z2.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return mt}()?.createHTML(e)||e}class ee{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class e_ extends ee{getTypeName(){return"HTML"}}class t_ extends ee{getTypeName(){return"Style"}}class n_ extends ee{getTypeName(){return"Script"}}class r_ extends ee{getTypeName(){return"URL"}}class i_ extends ee{getTypeName(){return"ResourceURL"}}function c3(e){return e instanceof ee?e.changingThisBreaksApplicationSecurity:e}function G3(e,n){const t=function a_(e){return e instanceof ee&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===n}class u_{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const t=(new window.DOMParser).parseFromString(Ae(n),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(n):(t.removeChild(t.firstChild),t)}catch{return null}}}class f_{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(n){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Ae(n),t;const r=this.inertDocument.createElement("body");return r.innerHTML=Ae(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(n){const t=n.attributes;for(let i=t.length-1;0<i;i--){const o=t.item(i).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&n.removeAttribute(o)}let r=n.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const h_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,p_=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function B6(e){return(e=String(e)).match(h_)||e.match(p_)?e:"unsafe:"+e}function $3(e){const n={};for(const t of e.split(","))n[t]=!0;return n}function j6(...e){const n={};for(const t of e)for(const r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}const oo=$3("area,br,col,hr,img,wbr"),so=$3("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),co=$3("rp,rt"),g0=j6(oo,j6(so,$3("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),j6(co,$3("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),j6(co,so)),v0=$3("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),M0=$3("srcset"),lo=j6(v0,M0,$3("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$3("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),m_=$3("script,style,template");class g_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(n){const t=n.nodeName.toLowerCase();if(!g0.hasOwnProperty(t))return this.sanitizedSomething=!0,!m_.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=n.attributes;for(let i=0;i<r.length;i++){const a=r.item(i),o=a.name,s=o.toLowerCase();if(!lo.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let c=a.value;v0[s]&&(c=B6(c)),M0[s]&&(e=c,c=(e=String(e)).split(",").map(n=>B6(n.trim())).join(", ")),this.buf.push(" ",o,'="',Co(c),'"')}var e;return this.buf.push(">"),!0}endElement(n){const t=n.nodeName.toLowerCase();g0.hasOwnProperty(t)&&!oo.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(Co(n))}checkClobberedElement(n,t){if(t&&(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return t}}const v_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,M_=/([^\#-~ |!])/g;function Co(e){return e.replace(/&/g,"&amp;").replace(v_,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(M_,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let gt;function uo(e,n){let t=null;try{gt=gt||function io(e){const n=new f_(e);return function d_(){try{return!!(new window.DOMParser).parseFromString(Ae(""),"text/html")}catch{return!1}}()?new u_(n):n}(e);let r=n?String(n):"";t=gt.getInertBodyElement(r);let i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=t.innerHTML,t=gt.getInertBodyElement(r)}while(r!==a);return Ae((new g_).sanitizeChildren(L0(t)||t))}finally{if(t){const r=L0(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function L0(e){return"content"in e&&function L_(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var r1=(()=>((r1=r1||{})[r1.NONE=0]="NONE",r1[r1.HTML=1]="HTML",r1[r1.STYLE=2]="STYLE",r1[r1.SCRIPT=3]="SCRIPT",r1[r1.URL=4]="URL",r1[r1.RESOURCE_URL=5]="RESOURCE_URL",r1))();function vt(e){const n=function W6(){const e=Z();return e&&e[12]}();return n?to(n.sanitize(r1.HTML,e)||""):G3(e,"HTML")?to(c3(e)):uo(function eo(){return void 0!==h0?h0:typeof document<"u"?document:void 0}(),w2(e))}const po=new x2("ENVIRONMENT_INITIALIZER"),mo=new x2("INJECTOR",-1),go=new x2("INJECTOR_DEF_TYPES");class vo{get(n,t=T6){if(t===T6){const r=new Error(`NullInjectorError: No provider for ${e1(n)}!`);throw r.name="NullInjectorError",r}return t}}function S_(...e){return{\u0275providers:Mo(0,e)}}function Mo(e,...n){const t=[],r=new Set;let i;return C4(n,a=>{const o=a;V0(o,t,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&Lo(i,t),t}function Lo(e,n){for(let t=0;t<e.length;t++){const{providers:i}=e[t];C4(i,a=>{n.push(a)})}}function V0(e,n,t,r){if(!(e=y2(e)))return!1;let i=null,a=t9(e);const o=!a&&J2(e);if(a||o){if(o&&!o.standalone)return!1;i=e}else{const c=e.ngModule;if(a=t9(c),!a)return!1;i=c}const s=r.has(i);if(o){if(s)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)V0(l,n,t,r)}}else{if(!a)return!1;{if(null!=a.imports&&!s){let l;r.add(i);try{C4(a.imports,C=>{V0(C,n,t,r)&&(l||(l=[]),l.push(C))})}finally{}void 0!==l&&Lo(l,n)}if(!s){const l=X4(i)||(()=>new i);n.push({provide:i,useFactory:l,deps:K2},{provide:go,useValue:i,multi:!0},{provide:po,useValue:()=>P2(i),multi:!0})}const c=a.providers;null==c||s||C4(c,C=>{n.push(C)})}}return i!==e&&void 0!==e.providers}const w_=X2({provide:String,useValue:X2});function y0(e){return null!==e&&"object"==typeof e&&w_ in e}function te(e){return"function"==typeof e}const H0=new x2("Set Injector scope."),Mt={},D_={};let _0;function Lt(){return void 0===_0&&(_0=new vo),_0}class Te{}class Ho extends Te{constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,b0(n,o=>this.processProvider(o)),this.records.set(mo,Oe(void 0,this)),i.has("environment")&&this.records.set(Te,Oe(void 0,this));const a=this.records.get(H0);null!=a&&"string"==typeof a.value&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(go.multi,K2,_2.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const t=Pe(this),r=h3(void 0);try{return n()}finally{Pe(t),h3(r)}}get(n,t=T6,r=_2.Default){this.assertNotDestroyed();const i=Pe(this),a=h3(void 0);try{if(!(r&_2.SkipSelf)){let s=this.records.get(n);if(void 0===s){const c=function A_(e){return"function"==typeof e||"object"==typeof e&&e instanceof x2}(n)&&Nn(n);s=c&&this.injectableDefInScope(c)?Oe(z0(n),Mt):null,this.records.set(n,s)}if(null!=s)return this.hydrate(n,s)}return(r&_2.Self?Lt():this.parent).get(n,t=r&_2.Optional&&t===T6?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Ct]=o[Ct]||[]).unshift(e1(n)),i)throw o;return function RH(e,n,t,r){const i=e[Ct];throw n[G9]&&i.unshift(n[G9]),e.message=function BH(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=e1(n);if(Array.isArray(n))i=n.map(e1).join(" -> ");else if("object"==typeof n){let a=[];for(let o in n)if(n.hasOwnProperty(o)){let s=n[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):e1(s)))}i=`{${a.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(TH,"\n  ")}`}("\n"+e.message,i,t,r),e.ngTokenPath=i,e[Ct]=null,e}(o,n,"R3InjectorError",this.source)}throw o}finally{h3(a),Pe(i)}}resolveInjectorInitializers(){const n=Pe(this),t=h3(void 0);try{const r=this.get(po.multi,K2,_2.Self);for(const i of r)i()}finally{Pe(n),h3(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(e1(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new h2(205,!1)}processProvider(n){let t=te(n=y2(n))?n:y2(n&&n.provide);const r=function E_(e){return y0(e)?Oe(void 0,e.useValue):Oe(_o(e),Mt)}(n);if(te(n)||!0!==n.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Oe(void 0,Mt,!0),i.factory=()=>f0(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===Mt&&(t.value=D_,t.value=t.factory()),"object"==typeof t.value&&t.value&&function k_(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=y2(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function z0(e){const n=Nn(e),t=null!==n?n.factory:X4(e);if(null!==t)return t;if(e instanceof x2)throw new h2(204,!1);if(e instanceof Function)return function N_(e){const n=e.length;if(n>0)throw A6(n,"?"),new h2(204,!1);const t=function Sy(e){const n=e&&(e[j5]||e[n9]);if(n){const t=function wy(e){if(e.hasOwnProperty("name"))return e.name;const n=(""+e).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),n}return null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new h2(204,!1)}function _o(e,n,t){let r;if(te(e)){const i=y2(e);return X4(i)||z0(i)}if(y0(e))r=()=>y2(e.useValue);else if(function yo(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...f0(e.deps||[]));else if(function Vo(e){return!(!e||!e.useExisting)}(e))r=()=>P2(y2(e.useExisting));else{const i=y2(e&&(e.useClass||e.provide));if(!function P_(e){return!!e.deps}(e))return X4(i)||z0(i);r=()=>new i(...f0(e.deps))}return r}function Oe(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function T_(e){return!!e.\u0275providers}function b0(e,n){for(const t of e)Array.isArray(t)?b0(t,n):T_(t)?b0(t.\u0275providers,n):n(t)}class zo{}class F_{resolveComponentFactory(n){throw function I_(e){const n=Error(`No component factory found for ${e1(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let U6=(()=>{class e{}return e.NULL=new F_,e})();function R_(){return Ie(y1(),Z())}function Ie(e,n){return new U1(v3(e,n))}let U1=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=R_,e})();function B_(e){return e instanceof U1?e.nativeElement:e}class So{}let u4=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function j_(){const e=Z(),t=a3(y1().index,e);return(Q1(t)?t:e)[11]}(),e})(),W_=(()=>{class e{}return e.\u0275prov=B2({token:e,providedIn:"root",factory:()=>null}),e})();class Vt{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const U_=new Vt("14.1.3"),S0={};function E0(e){return e.ngOriginalError}class Fe{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&E0(n);for(;t&&E0(t);)t=E0(t);return t||null}}const P0=new Map;let nz=0;const A0="__ngContext__";function T1(e,n){Q1(n)?(e[A0]=n[20],function iz(e){P0.set(e[20],e)}(n)):e[A0]=n}function G6(e){const n=e[A0];return"number"==typeof n?function Po(e){return P0.get(e)||null}(n):n||null}function T0(e){const n=G6(e);return n?Q1(n)?n:n.lView:null}const dz=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Z2))();var J1=(()=>((J1=J1||{})[J1.Important=1]="Important",J1[J1.DashCase=2]="DashCase",J1))();function I0(e,n){return undefined(e,n)}function $6(e){const n=e[3];return w3(n)?n[3]:n}function F0(e){return Bo(e[13])}function R0(e){return Bo(e[4])}function Bo(e){for(;null!==e&&!w3(e);)e=e[4];return e}function Be(e,n,t,r,i){if(null!=r){let a,o=!1;w3(r)?a=r:Q1(r)&&(o=!0,r=r[0]);const s=M1(r);0===e&&null!==t?null==i?qo(n,t,s):ne(n,t,s,i||null,!0):1===e&&null!==t?ne(n,t,s,i||null,!0):2===e?function es(e,n,t){const r=yt(e,n);r&&function Nz(e,n,t,r){e.removeChild(n,t,r)}(e,r,n,t)}(n,s,o):3===e&&n.destroyNode(s),null!=a&&function kz(e,n,t,r,i){const a=t[7];a!==M1(t)&&Be(n,e,r,a,i);for(let s=10;s<t.length;s++){const c=t[s];q6(c[1],c,e,n,r,a)}}(n,e,a,t,i)}}function j0(e,n,t){return e.createElement(n,t)}function Wo(e,n){const t=e[9],r=t.indexOf(n),i=n[3];512&n[2]&&(n[2]&=-513,Un(i,-1)),t.splice(r,1)}function W0(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const i=r[17];null!==i&&i!==e&&Wo(i,r),n>0&&(e[t-1][4]=r[4]);const a=ct(e,10+n);!function Hz(e,n){q6(e,n,n[11],2,null,null),n[0]=null,n[6]=null}(r[1],r);const o=a[19];null!==o&&o.detachView(a[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Uo(e,n){if(!(128&n[2])){const t=n[11];t.destroyNode&&q6(e,n,t,3,null,null),function bz(e){let n=e[13];if(!n)return U0(e[1],e);for(;n;){let t=null;if(Q1(n))t=n[13];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)Q1(n)&&U0(n[1],n),n=n[3];null===n&&(n=e),Q1(n)&&U0(n[1],n),t=n&&n[4]}n=t}}(n)}}function U0(e,n){if(!(128&n[2])){n[2]&=-65,n[2]|=128,function Dz(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof x6)){const a=t[r+1];if(Array.isArray(a))for(let o=0;o<a.length;o+=2){const s=i[a[o]],c=a[o+1];try{c.call(s)}finally{}}else try{a.call(i)}finally{}}}}(e,n),function xz(e,n){const t=e.cleanup,r=n[7];let i=-1;if(null!==t)for(let a=0;a<t.length-1;a+=2)if("string"==typeof t[a]){const o=t[a+1],s="function"==typeof o?o(n):M1(n[o]),c=r[i=t[a+2]],l=t[a+3];"boolean"==typeof l?s.removeEventListener(t[a],c,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),a+=2}else{const o=r[i=t[a+1]];t[a].call(o)}if(null!==r){for(let a=i+1;a<r.length;a++)(0,r[a])();n[7]=null}}(e,n),1===n[1].type&&n[11].destroy();const t=n[17];if(null!==t&&w3(n[3])){t!==n[3]&&Wo(t,n);const r=n[19];null!==r&&r.detachView(e)}!function az(e){P0.delete(e[20])}(n)}}function Go(e,n,t){return function $o(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===j3.None||i===j3.Emulated)return null}return v3(r,t)}(e,n.parent,t)}function ne(e,n,t,r,i){e.insertBefore(n,t,r,i)}function qo(e,n,t){e.appendChild(n,t)}function Ko(e,n,t,r,i){null!==r?ne(e,n,t,r,i):qo(e,n,t)}function yt(e,n){return e.parentNode(n)}function Yo(e,n,t){return Jo(e,n,t)}let Jo=function Qo(e,n,t){return 40&e.type?v3(e,t):null};function Ht(e,n,t,r){const i=Go(e,r,n),a=n[11],s=Yo(r.parent||n[6],r,n);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)Ko(a,i,t[c],s,!1);else Ko(a,i,t,s,!1)}function _t(e,n){if(null!==n){const t=n.type;if(3&t)return v3(n,e);if(4&t)return $0(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return _t(e,r);{const i=e[n.index];return w3(i)?$0(-1,i):M1(i)}}if(32&t)return I0(n,e)()||M1(e[n.index]);{const r=Xo(e,n);return null!==r?Array.isArray(r)?r[0]:_t($6(e[16]),r):_t(e,n.next)}}return null}function Xo(e,n){return null!==n?e[16][6].projection[n.projection]:null}function $0(e,n){const t=10+e+1;if(t<n.length){const r=n[t],i=r[1].firstChild;if(null!==i)return _t(r,i)}return n[7]}function q0(e,n,t,r,i,a,o){for(;null!=t;){const s=r[t.index],c=t.type;if(o&&0===n&&(s&&T1(M1(s),r),t.flags|=4),64!=(64&t.flags))if(8&c)q0(e,n,t.child,r,i,a,!1),Be(n,e,i,s,a);else if(32&c){const l=I0(t,r);let C;for(;C=l();)Be(n,e,i,C,a);Be(n,e,i,s,a)}else 16&c?ts(e,n,r,t,i,a):Be(n,e,i,s,a);t=o?t.projectionNext:t.next}}function q6(e,n,t,r,i,a){q0(t,r,e.firstChild,n,i,a,!1)}function ts(e,n,t,r,i,a){const o=t[16],c=o[6].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Be(n,e,i,c[l],a);else q0(e,n,c,o[3],i,a,!0)}function ns(e,n,t){e.setAttribute(n,"style",t)}function K0(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function rs(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const a=n.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}t=i+1}}const is="ng-template";function Tz(e,n,t){let r=0;for(;r<e.length;){let i=e[r++];if(t&&"class"===i){if(i=e[r],-1!==rs(i.toLowerCase(),n,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===n)return!0;return!1}}return!1}function as(e){return 4===e.type&&e.value!==is}function Oz(e,n,t){return n===(4!==e.type||t?e.value:is)}function Iz(e,n,t){let r=4;const i=e.attrs||[],a=function Bz(e){for(let n=0;n<e.length;n++)if(S9(e[n]))return n;return e.length}(i);let o=!1;for(let s=0;s<n.length;s++){const c=n[s];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Oz(e,c,t)||""===c&&1===n.length){if(D3(r))return!1;o=!0}}else{const l=8&r?c:n[++s];if(8&r&&null!==e.attrs){if(!Tz(e.attrs,l,t)){if(D3(r))return!1;o=!0}continue}const u=Fz(8&r?"class":c,i,as(e),t);if(-1===u){if(D3(r))return!1;o=!0;continue}if(""!==l){let f;f=u>a?"":i[u+1].toLowerCase();const V=8&r?f:null;if(V&&-1!==rs(V,l,0)||2&r&&l!==f){if(D3(r))return!1;o=!0}}}}else{if(!o&&!D3(r)&&!D3(c))return!1;if(o&&D3(c))continue;o=!1,r=c|1&r}}return D3(r)||o}function D3(e){return 0==(1&e)}function Fz(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let a=!1;for(;i<n.length;){const o=n[i];if(o===e)return i;if(3===o||6===o)a=!0;else{if(1===o||2===o){let s=n[++i];for(;"string"==typeof s;)s=n[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=a?1:2}return-1}return function jz(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function os(e,n,t=!1){for(let r=0;r<n.length;r++)if(Iz(e,n[r],t))return!0;return!1}function Wz(e,n){e:for(let t=0;t<n.length;t++){const r=n[t];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function ss(e,n){return e?":not("+n.trim()+")":n}function Uz(e){let n=e[0],t=1,r=2,i="",a=!1;for(;t<e.length;){let o=e[t];if("string"==typeof o)if(2&r){const s=e[++t];i+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!D3(o)&&(n+=ss(a,i),i=""),r=o,a=a||!D3(r);t++}return""!==i&&(n+=ss(a,i)),n}const D2={};function I(e){cs(j2(),Z(),W1()+e,!1)}function cs(e,n,t,r){if(!r)if(3==(3&n[2])){const a=e.preOrderCheckHooks;null!==a&&et(n,a,t)}else{const a=e.preOrderHooks;null!==a&&tt(n,a,0,t)}D4(t)}function fs(e,n=null,t=null,r){const i=ds(e,n,t,r);return i.resolveInjectorInitializers(),i}function ds(e,n=null,t=null,r,i=new Set){const a=[t||K2,S_(e)];return r=r||("object"==typeof e?void 0:e1(e)),new Ho(a,n||Lt(),r||null,i)}let M3=(()=>{class e{static create(t,r){if(Array.isArray(t))return fs({name:""},r,t,"");{const i=t.name??"";return fs({name:i},t.parent,t.providers,i)}}}return e.THROW_IF_NOT_FOUND=T6,e.NULL=new vo,e.\u0275prov=B2({token:e,providedIn:"any",factory:()=>P2(mo)}),e.__NG_ELEMENT_ID__=-1,e})();function G(e,n=_2.Default){const t=Z();return null===t?P2(e,n):A9(y1(),t,y2(e),n)}function bt(e,n){return e<<17|n<<2}function N3(e){return e>>17&32767}function X0(e){return 2|e}function d4(e){return(131068&e)>>2}function e7(e,n){return-131069&e|n<<2}function t7(e){return 1|e}function Ds(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],a=t[r+1];if(-1!==a){const o=e.data[a];Yn(i),o.contentQueries(2,n[a],a)}}}function xt(e,n,t,r,i,a,o,s,c,l,C){const u=n.blueprint.slice();return u[0]=i,u[2]=76|r,(null!==C||e&&1024&e[2])&&(u[2]|=1024),h9(u),u[3]=u[15]=e,u[8]=t,u[10]=o||e&&e[10],u[11]=s||e&&e[11],u[12]=c||e&&e[12]||null,u[9]=l||e&&e[9]||null,u[6]=a,u[20]=function rz(){return nz++}(),u[21]=C,u[16]=2==n.type?e[16]:u,u}function We(e,n,t,r,i){let a=e.data[n];if(null===a)a=function C7(e,n,t,r,i){const a=g9(),o=Gn(),c=e.data[n]=function wb(e,n,t,r,i,a){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,t,n,r,i);return null===e.firstChild&&(e.firstChild=c),null!==a&&(o?null==a.child&&null!==c.parent&&(a.child=c):null===a.next&&(a.next=c)),c}(e,n,t,r,i),function nH(){return S2.lFrame.inI18n}()&&(a.flags|=64);else if(64&a.type){a.type=t,a.value=r,a.attrs=i;const o=function S6(){const e=S2.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();a.injectorIndex=null===o?-1:o.injectorIndex}return W3(a,!0),a}function Ue(e,n,t,r){if(0===t)return-1;const i=n.length;for(let a=0;a<t;a++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function Dt(e,n,t){Qn(n);try{const r=e.viewQuery;null!==r&&M7(1,r,t);const i=e.template;null!==i&&Ns(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Ds(e,n),e.staticViewQueries&&M7(2,e.viewQuery,t);const a=e.components;null!==a&&function _b(e,n){for(let t=0;t<n.length;t++)Ub(e,n[t])}(n,a)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,Jn()}}function K6(e,n,t,r){const i=n[2];if(128!=(128&i)){Qn(n);try{h9(n),function v9(e){return S2.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&Ns(e,n,t,2,r);const o=3==(3&i);if(o){const l=e.preOrderCheckHooks;null!==l&&et(n,l,null)}else{const l=e.preOrderHooks;null!==l&&tt(n,l,0,null),Zn(n,0)}if(function jb(e){for(let n=F0(e);null!==n;n=R0(n)){if(!n[2])continue;const t=n[9];for(let r=0;r<t.length;r++){const i=t[r],a=i[3];0==(512&i[2])&&Un(a,1),i[2]|=512}}}(n),function Bb(e){for(let n=F0(e);null!==n;n=R0(n))for(let t=10;t<n.length;t++){const r=n[t],i=r[1];Q5(r)&&K6(i,r,i.template,r[8])}}(n),null!==e.contentQueries&&Ds(e,n),o){const l=e.contentCheckHooks;null!==l&&et(n,l)}else{const l=e.contentHooks;null!==l&&tt(n,l,1),Zn(n,1)}!function yb(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)D4(~i);else{const a=i,o=t[++r],s=t[++r];rH(o,a),s(2,n[a])}}}finally{D4(-1)}}(e,n);const s=e.components;null!==s&&function Hb(e,n){for(let t=0;t<n.length;t++)Wb(e,n[t])}(n,s);const c=e.viewQuery;if(null!==c&&M7(2,c,r),o){const l=e.viewCheckHooks;null!==l&&et(n,l)}else{const l=e.viewHooks;null!==l&&tt(n,l,2),Zn(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[2]&=-41,512&n[2]&&(n[2]&=-513,Un(n[3],-1))}finally{Jn()}}}function zb(e,n,t,r){const i=n[10],o=d9(n);try{!o&&i.begin&&i.begin(),o&&Dt(e,n,r),K6(e,n,t,r)}finally{!o&&i.end&&i.end()}}function Ns(e,n,t,r,i){const a=W1(),o=2&r;try{D4(-1),o&&n.length>22&&cs(e,n,22,!1),t(r,i)}finally{D4(a)}}function Es(e,n,t){if(In(n)){const i=n.directiveEnd;for(let a=n.directiveStart;a<i;a++){const o=e.data[a];o.contentQueries&&o.contentQueries(1,t[a],a)}}}function u7(e,n,t){!m9()||(function Pb(e,n,t,r){const i=t.directiveStart,a=t.directiveEnd;e.firstCreatePass||N6(t,n),T1(r,n);const o=t.initialInputs;for(let s=i;s<a;s++){const c=e.data[s],l=x3(c);l&&Ib(n,t,c);const C=E6(n,e,s,t);T1(C,n),null!==o&&Fb(0,s-i,C,c,0,o),l&&(a3(t.index,n)[8]=C)}}(e,n,t,v3(t,n)),128==(128&t.flags)&&function kb(e,n,t){const r=t.directiveStart,i=t.directiveEnd,a=t.index,o=function iH(){return S2.lFrame.currentDirectiveIndex}();try{D4(a);for(let s=r;s<i;s++){const c=e.data[s],l=n[s];qn(s),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Fs(c,l)}}finally{D4(-1),qn(o)}}(e,n,t))}function f7(e,n,t=v3){const r=n.localNames;if(null!==r){let i=n.index+1;for(let a=0;a<r.length;a+=2){const o=r[a+1],s=-1===o?t(n,e):e[o];e[i++]=s}}}function Ps(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=d7(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function d7(e,n,t,r,i,a,o,s,c,l){const C=22+r,u=C+i,f=function bb(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:D2);return t}(C,u),V="function"==typeof l?l():l;return f[1]={type:e,blueprint:f,template:t,queries:null,viewQuery:s,declTNode:n,data:f.slice().fill(null,C),bindingStartIndex:C,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:V,incompleteFirstPass:!1}}function ks(e,n,t,r){const i=$s(n);null===t?i.push(r):(i.push(t),e.firstCreatePass&&qs(e).push(r,i.length-1))}function As(e,n,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(n,i):t[r]=[n,i]}return t}function Ts(e,n){const r=n.directiveEnd,i=e.data,a=n.attrs,o=[];let s=null,c=null;for(let l=n.directiveStart;l<r;l++){const C=i[l],u=C.inputs,f=null===a||as(n)?null:Rb(u,a);o.push(f),s=As(u,l,s),c=As(C.outputs,l,c)}null!==s&&(s.hasOwnProperty("class")&&(n.flags|=16),s.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=o,n.inputs=s,n.outputs=c}function l3(e,n,t,r,i,a,o,s){const c=v3(n,t);let C,l=n.inputs;!s&&null!=l&&(C=l[r])?(L7(e,t,C,r,i),q5(n)&&Os(t,n.index)):3&n.type&&(r=function xb(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,n.value||"",r):i,a.setProperty(c,r,i))}function Os(e,n){const t=a3(n,e);16&t[2]||(t[2]|=32)}function h7(e,n,t,r){let i=!1;if(m9()){const a=function Ab(e,n,t){const r=e.directiveRegistry;let i=null;if(r)for(let a=0;a<r.length;a++){const o=r[a];os(t,o.selectors,!1)&&(i||(i=[]),ot(N6(t,n),e,o.type),x3(o)?(Rs(e,t),i.unshift(o)):i.push(o))}return i}(e,n,t),o=null===r?null:{"":-1};if(null!==a){i=!0,Bs(t,e.data.length,a.length);for(let C=0;C<a.length;C++){const u=a[C];u.providersResolver&&u.providersResolver(u)}let s=!1,c=!1,l=Ue(e,n,a.length,null);for(let C=0;C<a.length;C++){const u=a[C];t.mergedAttrs=rt(t.mergedAttrs,u.hostAttrs),js(e,t,n,l,u),Ob(l,u,o),null!==u.contentQueries&&(t.flags|=8),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=128);const f=u.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),s=!0),!c&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),c=!0),l++}Ts(e,t)}o&&function Tb(e,n,t){if(n){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const a=t[n[i+1]];if(null==a)throw new h2(-301,!1);r.push(n[i],a)}}}(t,r,o)}return t.mergedAttrs=rt(t.mergedAttrs,t.attrs),i}function Is(e,n,t,r,i,a){const o=a.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const c=~n.index;(function Eb(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(s)!=c&&s.push(c),s.push(r,i,o)}}function Fs(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function Rs(e,n){n.flags|=2,(e.components||(e.components=[])).push(n.index)}function Ob(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;x3(n)&&(t[""]=e)}}function Bs(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function js(e,n,t,r,i){e.data[r]=i;const a=i.factory||(i.factory=X4(i.type)),o=new x6(a,x3(i),G);e.blueprint[r]=o,t[r]=o,Is(e,n,0,r,Ue(e,t,i.hostVars,D2),i)}function Ib(e,n,t){const r=v3(n,e),i=Ps(t),a=e[10],o=Nt(e,xt(e,i,null,t.onPush?32:16,r,n,a,a.createRenderer(r,t),null,null,null));e[n.index]=o}function q3(e,n,t,r,i,a){const o=v3(e,n);!function p7(e,n,t,r,i,a,o){if(null==a)e.removeAttribute(n,i,t);else{const s=null==o?w2(a):o(a,r||"",i);e.setAttribute(n,i,s,t)}}(n[11],o,a,e.value,t,r,i)}function Fb(e,n,t,r,i,a){const o=a[n];if(null!==o){const s=r.setInput;for(let c=0;c<o.length;){const l=o[c++],C=o[c++],u=o[c++];null!==s?r.setInput(t,u,l,C):t[C]=u}}}function Rb(e,n){let t=null,r=0;for(;r<n.length;){const i=n[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,e[i],n[r+1])),r+=2}else r+=2;else r+=4}return t}function Ws(e,n,t,r){return new Array(e,!0,!1,n,null,0,r,t,null,null)}function Wb(e,n){const t=a3(n,e);if(Q5(t)){const r=t[1];48&t[2]?K6(r,t,r.template,t[8]):t[5]>0&&m7(t)}}function m7(e){for(let r=F0(e);null!==r;r=R0(r))for(let i=10;i<r.length;i++){const a=r[i];if(Q5(a))if(512&a[2]){const o=a[1];K6(o,a,o.template,a[8])}else a[5]>0&&m7(a)}const t=e[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=a3(t[r],e);Q5(i)&&i[5]>0&&m7(i)}}function Ub(e,n){const t=a3(n,e),r=t[1];(function Gb(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(r,t),Dt(r,t,t[8])}function Nt(e,n){return e[13]?e[14][4]=n:e[13]=n,e[14]=n,n}function g7(e){for(;e;){e[2]|=32;const n=$6(e);if(Oy(e)&&!n)return e;e=n}return null}function Gs(e){!function Us(e){for(let n=0;n<e.components.length;n++){const t=e.components[n],r=T0(t);if(null!==r){const i=r[1];zb(i,r,i.template,t)}}}(e[8])}function M7(e,n,t){Yn(0),n(e,t)}const qb=(()=>Promise.resolve(null))();function $s(e){return e[7]||(e[7]=[])}function qs(e){return e.cleanup||(e.cleanup=[])}function Ys(e,n){const t=e[9],r=t?t.get(Fe,null):null;r&&r.handleError(n)}function L7(e,n,t,r,i){for(let a=0;a<t.length;){const o=t[a++],s=t[a++],c=n[o],l=e.data[o];null!==l.setInput?l.setInput(c,i,r,s):c[s]=i}}function Et(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,a=0;if(null!==n)for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?a=s:1==a?i=xn(i,s):2==a&&(r=xn(r,s+": "+n[++o]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function Pt(e,n,t,r,i=!1){for(;null!==t;){const a=n[t.index];if(null!==a&&r.push(M1(a)),w3(a))for(let s=10;s<a.length;s++){const c=a[s],l=c[1].firstChild;null!==l&&Pt(c[1],c,l,r)}const o=t.type;if(8&o)Pt(e,n,t.child,r);else if(32&o){const s=I0(t,n);let c;for(;c=s();)r.push(c)}else if(16&o){const s=Xo(n,t);if(Array.isArray(s))r.push(...s);else{const c=$6(n[16]);Pt(c[1],c,s,r,!0)}}t=i?t.projectionNext:t.next}return r}class Y6{constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,t=n[1];return Pt(t,n,t.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(w3(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(W0(n,r),ct(t,r))}this._attachedToViewContainer=!1}Uo(this._lView[1],this._lView)}onDestroy(n){ks(this._lView[1],this._lView,null,n)}markForCheck(){g7(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function v7(e,n,t){const r=n[10];r.begin&&r.begin();try{K6(e,n,e.template,t)}catch(i){throw Ys(n,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new h2(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zz(e,n){q6(e,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new h2(902,!1);this._appRef=n}}class Kb extends Y6{constructor(n){super(n),this._view=n}detectChanges(){Gs(this._view)}checkNoChanges(){}get context(){return null}}class V7 extends U6{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=J2(n);return new Q6(t,this.ngModule)}}function Qs(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class Qb{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){const i=this.injector.get(n,S0,r);return i!==S0||t===S0?i:this.parentInjector.get(n,t,r)}}class Q6 extends zo{constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function Gz(e){return e.map(Uz).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Qs(this.componentDef.inputs)}get outputs(){return Qs(this.componentDef.outputs)}create(n,t,r,i){let a=(i=i||this.ngModule)instanceof Te?i:i?.injector;a&&null!==this.componentDef.getStandaloneInjector&&(a=this.componentDef.getStandaloneInjector(a)||a);const o=a?new Qb(n,a):n,s=o.get(So,null);if(null===s)throw new h2(407,!1);const c=o.get(W_,null),l=s.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",u=r?function Sb(e,n,t){return e.selectRootElement(n,t===j3.ShadowDom)}(l,r,this.componentDef.encapsulation):j0(s.createRenderer(null,this.componentDef),C,function Yb(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(C)),f=this.componentDef.onPush?288:272,V=function tS(e,n){return{components:[],scheduler:e||dz,clean:qb,playerHandler:n||null,flags:0}}(),E=d7(0,null,null,1,0,null,null,null,null,null),B=xt(null,E,V,f,null,null,s,l,c,o,null);let J,X;Qn(B);try{const s2=function Xb(e,n,t,r,i,a){const o=t[1];t[22]=e;const c=We(o,22,2,"#host",null),l=c.mergedAttrs=n.hostAttrs;null!==l&&(Et(c,l,!0),null!==e&&(nt(i,e,l),null!==c.classes&&K0(i,e,c.classes),null!==c.styles&&ns(i,e,c.styles)));const C=r.createRenderer(e,n),u=xt(t,Ps(n),null,n.onPush?32:16,t[22],c,r,C,a||null,null,null);return o.firstCreatePass&&(ot(N6(c,t),o,n.type),Rs(o,c),Bs(c,t.length,1)),Nt(t,u),t[22]=u}(u,this.componentDef,B,s,l);if(u)if(r)nt(l,u,["ng-version",U_.full]);else{const{attrs:W,classes:u2}=function $z(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let a=e[r];if("string"==typeof a)2===i?""!==a&&n.push(a,e[++r]):8===i&&t.push(a);else{if(!D3(i))break;i=a}r++}return{attrs:n,classes:t}}(this.componentDef.selectors[0]);W&&nt(l,u,W),u2&&u2.length>0&&K0(l,u,u2.join(" "))}if(X=Wn(E,22),void 0!==t){const W=X.projection=[];for(let u2=0;u2<this.ngContentSelectors.length;u2++){const M2=t[u2];W.push(null!=M2?Array.from(M2):null)}}J=function eS(e,n,t,r,i){const a=t[1],o=function Nb(e,n,t){const r=y1();e.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),js(e,r,n,Ue(e,n,1,null),t),Ts(e,r));const i=E6(n,e,r.directiveStart,r);T1(i,n);const a=v3(r,n);return a&&T1(a,n),i}(a,t,n);if(r.components.push(o),e[8]=o,null!==i)for(const c of i)c(o,n);if(n.contentQueries){const c=y1();n.contentQueries(1,o,c.directiveStart)}const s=y1();return!a.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(D4(s.index),Is(t[1],s,0,s.directiveStart,s.directiveEnd,n),Fs(n,o)),o}(s2,this.componentDef,B,V,[nS]),Dt(E,B,null)}finally{Jn()}return new Zb(this.componentType,J,Ie(X,B),B,X)}}class Zb extends class O_{}{constructor(n,t,r,i,a){super(),this.location=r,this._rootLView=i,this._tNode=a,this.instance=t,this.hostView=this.changeDetectorRef=new Kb(i),this.componentType=n}setInput(n,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[n])){const a=this._rootLView;L7(a[1],a,i,n,t),Os(a,this._tNode.index)}}get injector(){return new Se(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function nS(){const e=y1();X5(Z()[1],e)}function $2(e){let n=function Js(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(x3(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new h2(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const o=e;o.inputs=y7(e.inputs),o.declaredInputs=y7(e.declaredInputs),o.outputs=y7(e.outputs);const s=i.hostBindings;s&&oS(e,s);const c=i.viewQuery,l=i.contentQueries;if(c&&iS(e,c),l&&aS(e,l),wn(e.inputs,i.inputs),wn(e.declaredInputs,i.declaredInputs),wn(e.outputs,i.outputs),x3(i)&&i.data.animation){const C=e.data;C.animation=(C.animation||[]).concat(i.data.animation)}}const a=i.features;if(a)for(let o=0;o<a.length;o++){const s=a[o];s&&s.ngInherit&&s(e),s===$2&&(t=!1)}}n=Object.getPrototypeOf(n)}!function rS(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=rt(i.hostAttrs,t=rt(t,i.hostAttrs))}}(r)}function y7(e){return e===ve?{}:e===K2?[]:e}function iS(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function aS(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,a)=>{n(r,i,a),t(r,i,a)}:n}function oS(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}let kt=null;function re(){if(!kt){const e=Z2.Symbol;if(e&&e.iterator)kt=e.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<n.length;++t){const r=n[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(kt=r)}}}return kt}function J6(e){return!!H7(e)&&(Array.isArray(e)||!(e instanceof Map)&&re()in e)}function H7(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function K3(e,n,t){return e[n]=t}function O1(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function ie(e,n,t,r){const i=O1(e,n,t);return O1(e,n+1,r)||i}function Y3(e,n,t,r){const i=Z();return O1(i,_e(),n)&&(j2(),q3(m1(),i,e,n,t,r)),Y3}function $e(e,n,t,r){return O1(e,_e(),t)?n+w2(t)+r:D2}function o2(e,n,t,r,i,a,o,s){const c=Z(),l=j2(),C=e+22,u=l.firstCreatePass?function pS(e,n,t,r,i,a,o,s,c){const l=n.consts,C=We(n,e,4,o||null,x4(l,s));h7(n,t,C,x4(l,c)),X5(n,C);const u=C.tViews=d7(2,C,r,i,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,l);return null!==n.queries&&(n.queries.template(n,C),u.queries=n.queries.embeddedTView(C)),C}(C,l,c,n,t,r,i,a,o):l.data[C];W3(u,!1);const f=c[11].createComment("");Ht(l,c,f,u),T1(f,c),Nt(c,c[C]=Ws(f,c,f,u)),K5(u)&&u7(l,c,u),null!=o&&f7(c,u,s)}function e6(e){return He(function tH(){return S2.lFrame.contextLView}(),22+e)}function T(e,n,t){const r=Z();return O1(r,_e(),n)&&l3(j2(),m1(),r,e,n,r[11],t,!1),T}function _7(e,n,t,r,i){const o=i?"class":"style";L7(e,t,n.inputs[o],o,r)}function F(e,n,t,r){const i=Z(),a=j2(),o=22+e,s=i[11],c=i[o]=j0(s,n,function CH(){return S2.lFrame.currentNamespace}()),l=a.firstCreatePass?function gS(e,n,t,r,i,a,o){const s=n.consts,l=We(n,e,2,i,x4(s,a));return h7(n,t,l,x4(s,o)),null!==l.attrs&&Et(l,l.attrs,!1),null!==l.mergedAttrs&&Et(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(o,a,i,0,n,t,r):a.data[o];W3(l,!0);const C=l.mergedAttrs;null!==C&&nt(s,c,C);const u=l.classes;null!==u&&K0(s,c,u);const f=l.styles;return null!==f&&ns(s,c,f),64!=(64&l.flags)&&Ht(a,i,c,l),0===function Qy(){return S2.lFrame.elementDepthCount}()&&T1(c,i),function Jy(){S2.lFrame.elementDepthCount++}(),K5(l)&&(u7(a,i,l),Es(a,l,i)),null!==r&&f7(i,l),F}function R(){let e=y1();Gn()?$n():(e=e.parent,W3(e,!1));const n=e;!function Zy(){S2.lFrame.elementDepthCount--}();const t=j2();return t.firstCreatePass&&(X5(t,e),In(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function pH(e){return 0!=(16&e.flags)}(n)&&_7(t,n,Z(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function mH(e){return 0!=(32&e.flags)}(n)&&_7(t,n,Z(),n.stylesWithoutHost,!1),R}function g2(e,n,t,r){return F(e,n,t,r),R(),g2}function k4(e,n,t){const r=Z(),i=j2(),a=e+22,o=i.firstCreatePass?function vS(e,n,t,r,i){const a=n.consts,o=x4(a,r),s=We(n,e,8,"ng-container",o);return null!==o&&Et(s,o,!0),h7(n,t,s,x4(a,i)),null!==n.queries&&n.queries.elementStart(n,s),s}(a,i,r,n,t):i.data[a];W3(o,!0);const s=r[a]=r[11].createComment("");return Ht(i,r,s,o),T1(s,r),K5(o)&&(u7(i,r,o),Es(i,o,r)),null!=t&&f7(r,o),k4}function A4(){let e=y1();const n=j2();return Gn()?$n():(e=e.parent,W3(e,!1)),n.firstCreatePass&&(X5(n,e),In(e)&&n.queries.elementEnd(e)),A4}function Tt(e,n,t){return k4(e,n,t),A4(),Tt}function I1(){return Z()}function Ot(e){return!!e&&"function"==typeof e.then}function sc(e){return!!e&&"function"==typeof e.subscribe}const cc=sc;function b2(e,n,t,r){const i=Z(),a=j2(),o=y1();return function Cc(e,n,t,r,i,a,o,s){const c=K5(r),C=e.firstCreatePass&&qs(e),u=n[8],f=$s(n);let V=!0;if(3&r.type||s){const J=v3(r,n),X=s?s(J):J,s2=f.length,W=s?M2=>s(M1(M2[r.index])):r.index;let u2=null;if(!s&&c&&(u2=function MS(e,n,t,r){const i=e.cleanup;if(null!=i)for(let a=0;a<i.length-1;a+=2){const o=i[a];if(o===t&&i[a+1]===r){const s=n[7],c=i[a+2];return s.length>c?s[c]:null}"string"==typeof o&&(a+=2)}return null}(e,n,i,r.index)),null!==u2)(u2.__ngLastListenerFn__||u2).__ngNextListenerFn__=a,u2.__ngLastListenerFn__=a,V=!1;else{a=fc(r,n,u,a,!1);const M2=t.listen(X,i,a);f.push(a,M2),C&&C.push(i,W,s2,s2+1)}}else a=fc(r,n,u,a,!1);const E=r.outputs;let B;if(V&&null!==E&&(B=E[i])){const J=B.length;if(J)for(let X=0;X<J;X+=2){const U2=n[B[X]][B[X+1]].subscribe(a),d3=f.length;f.push(a,U2),C&&C.push(i,r.index,d3,-(d3+1))}}}(a,i,i[11],o,e,n,0,r),b2}function uc(e,n,t,r){try{return!1!==t(r)}catch(i){return Ys(e,i),!1}}function fc(e,n,t,r,i){return function a(o){if(o===Function)return r;g7(2&e.flags?a3(e.index,n):n);let c=uc(n,0,r,o),l=a.__ngNextListenerFn__;for(;l;)c=uc(n,0,l,o)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function r2(e=1){return function oH(e){return(S2.lFrame.contextLView=function sH(e,n){for(;e>0;)n=n[15],e--;return n}(e,S2.lFrame.contextLView))[8]}(e)}function LS(e,n){let t=null;const r=function Rz(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(0==(1&t))return n[t+1]}return null}(e);for(let i=0;i<n.length;i++){const a=n[i];if("*"!==a){if(null===r?os(e,a,!0):Wz(r,a))return i}else t=i}return t}function z7(e){const n=Z()[16][6];if(!n.projection){const r=n.projection=A6(e?e.length:1,null),i=r.slice();let a=n.child;for(;null!==a;){const o=e?LS(a,e):0;null!==o&&(i[o]?i[o].projectionNext=a:r[o]=a,i[o]=a),a=a.next}}}function It(e,n=0,t){const r=Z(),i=j2(),a=We(i,22+e,16,null,t||null);null===a.projection&&(a.projection=n),$n(),64!=(64&a.flags)&&function Pz(e,n,t){ts(n[11],0,n,t,Go(e,t,n),Yo(t.parent||n[6],t,n))}(i,r,a)}function yc(e,n,t,r,i){const a=e[t+1],o=null===n;let s=r?N3(a):d4(a),c=!1;for(;0!==s&&(!1===c||o);){const C=e[s+1];HS(e[s],n)&&(c=!0,e[s+1]=r?t7(C):X0(C)),s=r?N3(C):d4(C)}c&&(e[t+1]=r?X0(a):t7(a))}function HS(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&Ee(e,n)>=0}const z1={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Hc(e){return e.substring(z1.key,z1.keyEnd)}function _c(e,n){const t=z1.textEnd;return t===n?-1:(n=z1.keyEnd=function SS(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,z1.key=n,t),t6(e,n,t))}function t6(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function T4(e,n){return function E3(e,n,t,r){const i=Z(),a=j2(),o=l4(2);a.firstUpdatePass&&Nc(a,e,o,r),n!==D2&&O1(i,o,n)&&Pc(a,a.data[W1()],i,i[11],e,i[o+1]=function OS(e,n){return null==e||("string"==typeof n?e+=n:"object"==typeof e&&(e=e1(c3(e)))),e}(n,t),r,o)}(e,n,null,!0),T4}function Ft(e){P3(s3,J3,e,!0)}function J3(e,n){for(let t=function zS(e){return function bc(e){z1.key=0,z1.keyEnd=0,z1.value=0,z1.valueEnd=0,z1.textEnd=e.length}(e),_c(e,t6(e,0,z1.textEnd))}(n);t>=0;t=_c(n,t))s3(e,Hc(n),!0)}function P3(e,n,t,r){const i=j2(),a=l4(2);i.firstUpdatePass&&Nc(i,null,a,r);const o=Z();if(t!==D2&&O1(o,a,t)){const s=i.data[W1()];if(Ac(s,r)&&!Dc(i,a)){let c=r?s.classesWithoutHost:s.stylesWithoutHost;null!==c&&(t=xn(c,t||"")),_7(i,s,o,t,r)}else!function TS(e,n,t,r,i,a,o,s){i===D2&&(i=K2);let c=0,l=0,C=0<i.length?i[0]:null,u=0<a.length?a[0]:null;for(;null!==C||null!==u;){const f=c<i.length?i[c+1]:void 0,V=l<a.length?a[l+1]:void 0;let B,E=null;C===u?(c+=2,l+=2,f!==V&&(E=u,B=V)):null===u||null!==C&&C<u?(c+=2,E=C):(l+=2,E=u,B=V),null!==E&&Pc(e,n,t,r,E,B,o,s),C=c<i.length?i[c]:null,u=l<a.length?a[l]:null}}(i,s,o,o[11],o[a+1],o[a+1]=function AS(e,n,t){if(null==t||""===t)return K2;const r=[],i=c3(t);if(Array.isArray(i))for(let a=0;a<i.length;a++)e(r,i[a],!0);else if("object"==typeof i)for(const a in i)i.hasOwnProperty(a)&&e(r,a,i[a]);else"string"==typeof i&&n(r,i);return r}(e,n,t),r,a)}}function Dc(e,n){return n>=e.expandoStartIndex}function Nc(e,n,t,r){const i=e.data;if(null===i[t+1]){const a=i[W1()],o=Dc(e,t);Ac(a,r)&&null===n&&!o&&(n=!1),n=function NS(e,n,t,r){const i=function Kn(e){const n=S2.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let a=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=X6(t=S7(null,e,n,t,r),n.attrs,r),a=null);else{const o=n.directiveStylingLast;if(-1===o||e[o]!==i)if(t=S7(i,e,n,t,r),null===a){let c=function ES(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==d4(r))return e[N3(r)]}(e,n,r);void 0!==c&&Array.isArray(c)&&(c=S7(null,e,n,c[1],r),c=X6(c,n.attrs,r),function PS(e,n,t,r){e[N3(t?n.classBindings:n.styleBindings)]=r}(e,n,r,c))}else a=function kS(e,n,t){let r;const i=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<i;a++)r=X6(r,e[a].hostAttrs,t);return X6(r,n.attrs,t)}(e,n,r)}return void 0!==a&&(r?n.residualClasses=a:n.residualStyles=a),t}(i,a,n,r),function VS(e,n,t,r,i,a){let o=a?n.classBindings:n.styleBindings,s=N3(o),c=d4(o);e[r]=t;let C,l=!1;if(Array.isArray(t)){const u=t;C=u[1],(null===C||Ee(u,C)>0)&&(l=!0)}else C=t;if(i)if(0!==c){const f=N3(e[s+1]);e[r+1]=bt(f,s),0!==f&&(e[f+1]=e7(e[f+1],r)),e[s+1]=function fb(e,n){return 131071&e|n<<17}(e[s+1],r)}else e[r+1]=bt(s,0),0!==s&&(e[s+1]=e7(e[s+1],r)),s=r;else e[r+1]=bt(c,0),0===s?s=r:e[c+1]=e7(e[c+1],r),c=r;l&&(e[r+1]=X0(e[r+1])),yc(e,C,r,!0),yc(e,C,r,!1),function yS(e,n,t,r,i){const a=i?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof n&&Ee(a,n)>=0&&(t[r+1]=t7(t[r+1]))}(n,C,e,r,a),o=bt(s,c),a?n.classBindings=o:n.styleBindings=o}(i,a,n,t,o,r)}}function S7(e,n,t,r,i){let a=null;const o=t.directiveEnd;let s=t.directiveStylingLast;for(-1===s?s=t.directiveStart:s++;s<o&&(a=n[s],r=X6(r,a.hostAttrs,i),a!==e);)s++;return null!==e&&(t.directiveStylingLast=s),r}function X6(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let a=0;a<n.length;a++){const o=n[a];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),s3(e,o,!!t||n[++a]))}return void 0===e?null:e}function Pc(e,n,t,r,i,a,o,s){if(!(3&n.type))return;const c=e.data,l=c[s+1];Rt(function ys(e){return 1==(1&e)}(l)?kc(c,n,t,i,d4(l),o):void 0)||(Rt(a)||function Vs(e){return 2==(2&e)}(l)&&(a=kc(c,null,t,i,s,o)),function Az(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let a=-1===r.indexOf("-")?void 0:J1.DashCase;null==i?e.removeStyle(t,r,a):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),a|=J1.Important),e.setStyle(t,r,i,a))}}(r,o,Y5(W1(),t),i,a))}function kc(e,n,t,r,i,a){const o=null===n;let s;for(;i>0;){const c=e[i],l=Array.isArray(c),C=l?c[1]:c,u=null===C;let f=t[i+1];f===D2&&(f=u?K2:void 0);let V=u?c0(f,r):C===r?f:void 0;if(l&&!Rt(V)&&(V=c0(c,r)),Rt(V)&&(s=V,o))return s;const E=e[i+1];i=o?N3(E):d4(E)}if(null!==n){let c=a?n.residualClasses:n.residualStyles;null!=c&&(s=c0(c,r))}return s}function Rt(e){return void 0!==e}function Ac(e,n){return 0!=(e.flags&(n?16:32))}function a2(e,n=""){const t=Z(),r=j2(),i=e+22,a=r.firstCreatePass?We(r,i,1,n,null):r.data[i],o=t[i]=function B0(e,n){return e.createText(n)}(t[11],n);Ht(r,t,o,a),W3(a,!1)}function D1(e){return V3("",e,""),D1}function V3(e,n,t){const r=Z(),i=$e(r,e,n,t);return i!==D2&&function h4(e,n,t){const r=Y5(n,e);!function jo(e,n,t){e.setValue(n,t)}(e[11],r,t)}(r,W1(),i),V3}function O4(e,n,t){P3(s3,J3,$e(Z(),e,n,t),!0)}function w7(e,n,t){const r=Z();return O1(r,_e(),n)&&l3(j2(),m1(),r,e,n,r[11],t,!0),w7}const r6="en-US";let nl=r6;function N7(e,n,t,r,i){if(e=y2(e),Array.isArray(e))for(let a=0;a<e.length;a++)N7(e[a],n,t,r,i);else{const a=j2(),o=Z();let s=te(e)?e:y2(e.provide),c=_o(e);const l=y1(),C=1048575&l.providerIndexes,u=l.directiveStart,f=l.providerIndexes>>20;if(te(e)||!e.multi){const V=new x6(c,i,G),E=P7(s,n,i?C:C+f,u);-1===E?(ot(N6(l,o),a,s),E7(a,e,n.length),n.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(V),o.push(V)):(t[E]=V,o[E]=V)}else{const V=P7(s,n,C+f,u),E=P7(s,n,C,C+f),B=V>=0&&t[V],J=E>=0&&t[E];if(i&&!J||!i&&!B){ot(N6(l,o),a,s);const X=function ex(e,n,t,r,i){const a=new x6(e,t,G);return a.multi=[],a.index=n,a.componentProviders=0,Sl(a,i,r&&!t),a}(i?Xw:Zw,t.length,i,r,c);!i&&J&&(t[E].providerFactory=X),E7(a,e,n.length,0),n.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(X),o.push(X)}else E7(a,e,V>-1?V:E,Sl(t[i?E:V],c,!i&&r));!i&&r&&J&&t[E].componentProviders++}}}function E7(e,n,t,r){const i=te(n),a=function x_(e){return!!e.useClass}(n);if(i||a){const c=(a?y2(n.useClass):n).prototype.ngOnDestroy;if(c){const l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const C=l.indexOf(t);-1===C?l.push(t,[r,c]):l[C+1].push(r,c)}else l.push(t,c)}}}function Sl(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function P7(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function Zw(e,n,t,r){return k7(this.multi,[])}function Xw(e,n,t,r){const i=this.multi;let a;if(this.providerFactory){const o=this.providerFactory.componentProviders,s=E6(t,t[1],this.providerFactory.index,r);a=s.slice(0,o),k7(i,a);for(let c=o;c<s.length;c++)a.push(s[c])}else a=[],k7(i,a);return a}function k7(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function c1(e,n=[]){return t=>{t.providersResolver=(r,i)=>function Jw(e,n,t){const r=j2();if(r.firstCreatePass){const i=x3(e);N7(t,r.data,r.blueprint,i,!0),N7(n,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,n)}}class a6{}class wl extends a6{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new V7(this);const r=function n3(e,n){const t=e[i9]||null;if(!t&&!0===n)throw new Error(`Type ${e1(e)} does not have '\u0275mod' property.`);return t}(n);this._bootstrapComponents=function f4(e){return e instanceof Function?e():e}(r.bootstrap),this._r3Injector=ds(n,t,[{provide:a6,useValue:this},{provide:U6,useValue:this.componentFactoryResolver}],e1(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class A7 extends class tx{}{constructor(n){super(),this.moduleType=n}create(n){return new wl(this.moduleType,n)}}function C3(e,n,t,r){return Il(Z(),j1(),e,n,t,r)}function o6(e,n,t,r,i){return function Fl(e,n,t,r,i,a,o){const s=n+t;return ie(e,s,i,a)?K3(e,s+2,o?r.call(o,i,a):r(i,a)):i5(e,s+2)}(Z(),j1(),e,n,t,r,i)}function Tl(e,n,t,r,i,a){return function Rl(e,n,t,r,i,a,o,s){const c=n+t;return function At(e,n,t,r,i){const a=ie(e,n,t,r);return O1(e,n+2,i)||a}(e,c,i,a,o)?K3(e,c+3,s?r.call(s,i,a,o):r(i,a,o)):i5(e,c+3)}(Z(),j1(),e,n,t,r,i,a)}function Ol(e,n,t,r,i,a,o){return function Bl(e,n,t,r,i,a,o,s,c){const l=n+t;return function L3(e,n,t,r,i,a){const o=ie(e,n,t,r);return ie(e,n+2,i,a)||o}(e,l,i,a,o,s)?K3(e,l+4,c?r.call(c,i,a,o,s):r(i,a,o,s)):i5(e,l+4)}(Z(),j1(),e,n,t,r,i,a,o)}function i5(e,n){const t=e[n];return t===D2?void 0:t}function Il(e,n,t,r,i,a){const o=n+t;return O1(e,o,i)?K3(e,o+1,a?r.call(a,i):r(i)):i5(e,o+1)}function I4(e,n){const t=j2();let r;const i=e+22;t.firstCreatePass?(r=function Lx(e,n){if(n)for(let t=n.length-1;t>=0;t--){const r=n[t];if(e===r.name)return r}}(n,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const a=r.factory||(r.factory=X4(r.type)),o=h3(G);try{const s=it(!1),c=a();return it(s),function mS(e,n,t,r){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=r}(t,Z(),i,c),c}finally{h3(o)}}function F4(e,n,t){const r=e+22,i=Z(),a=He(i,r);return function a5(e,n){return e[1].data[n].pure}(i,r)?Il(i,j1(),n,a.transform,t,a):a.transform(t)}function O7(e){return n=>{setTimeout(e,void 0,n)}}const Q2=class zx extends I2{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let i=n,a=t||(()=>null),o=r;if(n&&"object"==typeof n){const c=n;i=c.next?.bind(c),a=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(a=O7(a),i&&(i=O7(i)),o&&(o=O7(o)));const s=super.subscribe({next:i,error:a,complete:o});return n instanceof L&&n.add(s),s}};function bx(){return this._results[re()]()}class I7{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=re(),r=I7.prototype;r[t]||(r[t]=bx)}get changes(){return this._changes||(this._changes=new Q2)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const r=this;r.dirty=!1;const i=o3(n);(this._changesDetected=!function bH(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],a=n[r];if(t&&(i=t(i),a=t(a)),a!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let y3=(()=>{class e{}return e.__NG_ELEMENT_ID__=xx,e})();const Sx=y3,wx=class extends Sx{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(n,t){const r=this._declarationTContainer.tViews,i=xt(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),Dt(r,i,n),new Y6(i)}};function xx(){return Gt(y1(),Z())}function Gt(e,n){return 4&e.type?new wx(n,e,Ie(e,n)):null}let Z3=(()=>{class e{}return e.__NG_ELEMENT_ID__=Dx,e})();function Dx(){return Gl(y1(),Z())}const Nx=Z3,Wl=class extends Nx{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return Ie(this._hostTNode,this._hostLView)}get injector(){return new Se(this._hostTNode,this._hostLView)}get parentInjector(){const n=at(this._hostTNode,this._hostLView);if(D9(n)){const t=be(n,this._hostLView),r=ze(n);return new Se(t[1].data[r+8],t)}return new Se(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=Ul(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let i,a;"number"==typeof r?i=r:null!=r&&(i=r.index,a=r.injector);const o=n.createEmbeddedView(t||{},a);return this.insert(o,i),o}createComponent(n,t,r,i,a){const o=n&&!function k6(e){return"function"==typeof e}(n);let s;if(o)s=t;else{const u=t||{};s=u.index,r=u.injector,i=u.projectableNodes,a=u.environmentInjector||u.ngModuleRef}const c=o?n:new Q6(J2(n)),l=r||this.parentInjector;if(!a&&null==c.ngModule){const f=(o?l:this.parentInjector).get(Te,null);f&&(a=f)}const C=c.create(l,i,void 0,a);return this.insert(C.hostView,s),C}insert(n,t){const r=n._lView,i=r[1];if(function Yy(e){return w3(e[3])}(r)){const C=this.indexOf(n);if(-1!==C)this.detach(C);else{const u=r[3],f=new Wl(u,u[6],u[3]);f.detach(f.indexOf(n))}}const a=this._adjustIndex(t),o=this._lContainer;!function Sz(e,n,t,r){const i=10+r,a=t.length;r>0&&(t[i-1][4]=n),r<a-10?(n[4]=t[i],B9(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const o=n[17];null!==o&&t!==o&&function wz(e,n){const t=e[9];n[16]!==n[3][3][16]&&(e[2]=!0),null===t?e[9]=[n]:t.push(n)}(o,n);const s=n[19];null!==s&&s.insertView(e),n[2]|=64}(i,r,o,a);const s=$0(a,o),c=r[11],l=yt(c,o[7]);return null!==l&&function _z(e,n,t,r,i,a){r[0]=i,r[6]=n,q6(e,r,t,1,i,a)}(i,o[6],c,r,l,s),n.attachToViewContainerRef(),B9(F7(o),a,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=Ul(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=W0(this._lContainer,t);r&&(ct(F7(this._lContainer),t),Uo(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=W0(this._lContainer,t);return r&&null!=ct(F7(this._lContainer),t)?new Y6(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function Ul(e){return e[8]}function F7(e){return e[8]||(e[8]=[])}function Gl(e,n){let t;const r=n[e.index];if(w3(r))t=r;else{let i;if(8&e.type)i=M1(r);else{const a=n[11];i=a.createComment("");const o=v3(e,n);ne(a,yt(a,o),i,function Ez(e,n){return e.nextSibling(n)}(a,o),!1)}n[e.index]=t=Ws(r,n,i,e),Nt(n,t)}return new Wl(t,e,n)}class R7{constructor(n){this.queryList=n,this.matches=null}clone(){return new R7(this.queryList)}setDirty(){this.queryList.setDirty()}}class B7{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,i=[];for(let a=0;a<r;a++){const o=t.getByIndex(a);i.push(this.queries[o.indexInDeclarationView].clone())}return new B7(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==Ql(n,t).matches&&this.queries[t].setDirty()}}class $l{constructor(n,t,r=null){this.predicate=n,this.flags=t,this.read=r}}class j7{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,a=this.getByIndex(r).embeddedTView(n,i);a&&(a.indexInDeclarationView=r,null!==t?t.push(a):t=[a])}return null!==t?new j7(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class W7{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new W7(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const a=r[i];this.matchTNodeWithReadOption(n,t,kx(t,a)),this.matchTNodeWithReadOption(n,t,st(t,n,a,!1,!1))}else r===y3?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,st(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===U1||i===Z3||i===y3&&4&t.type)this.addMatch(t.index,-2);else{const a=st(t,n,i,!1,!1);null!==a&&this.addMatch(t.index,a)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function kx(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function Tx(e,n,t,r){return-1===t?function Ax(e,n){return 11&e.type?Ie(e,n):4&e.type?Gt(e,n):null}(n,e):-2===t?function Ox(e,n,t){return t===U1?Ie(n,e):t===y3?Gt(n,e):t===Z3?Gl(n,e):void 0}(e,n,r):E6(e,e[1],t,n)}function ql(e,n,t,r){const i=n[19].queries[r];if(null===i.matches){const a=e.data,o=t.matches,s=[];for(let c=0;c<o.length;c+=2){const l=o[c];s.push(l<0?null:Tx(n,a[l],o[c+1],t.metadata.read))}i.matches=s}return i.matches}function U7(e,n,t,r){const i=e.queries.getByIndex(t),a=i.matches;if(null!==a){const o=ql(e,n,i,t);for(let s=0;s<a.length;s+=2){const c=a[s];if(c>0)r.push(o[s/2]);else{const l=a[s+1],C=n[-c];for(let u=10;u<C.length;u++){const f=C[u];f[17]===f[3]&&U7(f[1],f,l,r)}if(null!==C[9]){const u=C[9];for(let f=0;f<u.length;f++){const V=u[f];U7(V[1],V,l,r)}}}}}return r}function $t(e){const n=Z(),t=j2(),r=L9();Yn(r+1);const i=Ql(t,r);if(e.dirty&&d9(n)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const a=i.crossesNgTemplate?U7(t,n,r,[]):ql(t,n,i,r);e.reset(a,B_),e.notifyOnChanges()}return!0}return!1}function qt(e,n,t){const r=j2();r.firstCreatePass&&(function Yl(e,n,t){null===e.queries&&(e.queries=new j7),e.queries.track(new W7(n,t))}(r,new $l(e,n,t),-1),2==(2&n)&&(r.staticViewQueries=!0)),function Kl(e,n,t){const r=new I7(4==(4&t));ks(e,n,r,r.destroy),null===n[19]&&(n[19]=new B7),n[19].queries.push(new R7(r))}(r,Z(),n)}function Kt(){return function Fx(e,n){return e[19].queries[n].queryList}(Z(),L9())}function Ql(e,n){return e.queries.getByIndex(n)}function o5(e,n){return Gt(e,n)}function Qt(...e){}const pC=new x2("Application Initializer");let Jt=(()=>{class e{constructor(t){this.appInits=t,this.resolve=Qt,this.reject=Qt,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const a=this.appInits[i]();if(Ot(a))t.push(a);else if(cc(a)){const o=new Promise((s,c)=>{a.subscribe({complete:s,error:c})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(P2(pC,8))},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const l5=new x2("AppId",{providedIn:"root",factory:function mC(){return`${Y7()}${Y7()}${Y7()}`}});function Y7(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gC=new x2("Platform Initializer"),vC=new x2("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),oD=new x2("appBootstrapListener"),p4=new x2("LocaleId",{providedIn:"root",factory:()=>u0(p4,_2.Optional|_2.SkipSelf)||function sD(){return typeof $localize<"u"&&$localize.locale||r6}()}),fD=(()=>Promise.resolve(0))();function Q7(e){typeof Zone>"u"?fD.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class N1{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Q2(!1),this.onMicrotaskEmpty=new Q2(!1),this.onStable=new Q2(!1),this.onError=new Q2(!1),typeof Zone>"u")throw new h2(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const a=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new a("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function dD(){let e=Z2.requestAnimationFrame,n=Z2.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function mD(e){const n=()=>{!function pD(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Z2,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Z7(e),e.isCheckStableRunning=!0,J7(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Z7(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,a,o,s)=>{try{return VC(e),t.invokeTask(i,a,o,s)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||e.shouldCoalesceRunChangeDetection)&&n(),yC(e)}},onInvoke:(t,r,i,a,o,s,c)=>{try{return VC(e),t.invoke(i,a,o,s,c)}finally{e.shouldCoalesceRunChangeDetection&&n(),yC(e)}},onHasTask:(t,r,i,a)=>{t.hasTask(i,a),r===i&&("microTask"==a.change?(e._hasPendingMicrotasks=a.microTask,Z7(e),J7(e)):"macroTask"==a.change&&(e.hasPendingMacrotasks=a.macroTask))},onHandleError:(t,r,i,a)=>(t.handleError(i,a),e.runOutsideAngular(()=>e.onError.emit(a)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!N1.isInAngularZone())throw new h2(909,!1)}static assertNotInAngularZone(){if(N1.isInAngularZone())throw new h2(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const a=this._inner,o=a.scheduleEventTask("NgZoneEvent: "+i,n,hD,Qt,Qt);try{return a.runTask(o,t,r)}finally{a.cancelTask(o)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const hD={};function J7(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Z7(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function VC(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function yC(e){e._nesting--,J7(e)}class gD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Q2,this.onMicrotaskEmpty=new Q2,this.onStable=new Q2,this.onError=new Q2}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}const HC=new x2(""),Zt=new x2("");let tr,X7=(()=>{class e{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,tr||(function vD(e){tr=e}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{N1.assertNotInAngularZone(),Q7(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Q7(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let a=-1;r&&r>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==a),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:a,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return e.\u0275fac=function(t){return new(t||e)(P2(N1),P2(er),P2(Zt))},e.\u0275prov=B2({token:e,factory:e.\u0275fac}),e})(),er=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return tr?.findTestabilityInTree(this,t,r)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),R4=null;const _C=new x2("AllowMultipleToken"),nr=new x2("PlatformDestroyListeners");function bC(e,n,t=[]){const r=`Platform: ${n}`,i=new x2(r);return(a=[])=>{let o=rr();if(!o||o.injector.get(_C,!1)){const s=[...t,...a,{provide:i,useValue:!0}];e?e(s):function VD(e){if(R4&&!R4.get(_C,!1))throw new h2(400,!1);R4=e;const n=e.get(wC);(function zC(e){const n=e.get(gC,null);n&&n.forEach(t=>t())})(e)}(function SC(e=[],n){return M3.create({name:n,providers:[{provide:H0,useValue:"platform"},{provide:nr,useValue:new Set([()=>R4=null])},...e]})}(s,r))}return function HD(e){const n=rr();if(!n)throw new h2(401,!1);return n}()}}function rr(){return R4?.get(wC)??null}let wC=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function _D(e,n){let t;return t="noop"===e?new gD:("zone.js"===e?void 0:e)||new N1(n),t}(r?.ngZone,function xC(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),a=[{provide:N1,useValue:i}];return i.run(()=>{const o=M3.create({providers:a,parent:this.injector,name:t.moduleType.name}),s=t.create(o),c=s.injector.get(Fe,null);if(!c)throw new h2(402,!1);return i.runOutsideAngular(()=>{const l=i.onError.subscribe({next:C=>{c.handleError(C)}});s.onDestroy(()=>{e8(this._modules,s),l.unsubscribe()})}),function DC(e,n,t){try{const r=t();return Ot(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(c,i,()=>{const l=s.injector.get(Jt);return l.runInitializers(),l.donePromise.then(()=>(function rl(e){e3(e,"Expected localeId to be defined"),"string"==typeof e&&(nl=e.toLowerCase().replace(/_/g,"-"))}(s.injector.get(p4,r6)||r6),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=NC({},r);return function MD(e,n,t){const r=new A7(t);return Promise.resolve(r)}(0,0,t).then(a=>this.bootstrapModuleFactory(a,i))}_moduleDoBootstrap(t){const r=t.injector.get(Xt);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new h2(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new h2(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(nr,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(P2(M3))},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function NC(e,n){return Array.isArray(n)?n.reduce(NC,e):{...e,...n}}let Xt=(()=>{class e{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new N(s=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{s.next(this._stable),s.complete()})}),o=new N(s=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{N1.assertNotInAngularZone(),Q7(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,s.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{N1.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{s.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=zn(a,o.pipe(bn()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof zo;if(!this._injector.get(Jt).done)throw!i&&function c5(e){const n=J2(e)||R1(e)||B1(e);return null!==n&&n.standalone}(t),new h2(405,false);let o;o=i?t:this._injector.get(U6).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const s=function LD(e){return e.isBoundToModule}(o)?void 0:this._injector.get(a6),l=o.create(M3.NULL,[],r||o.selector,s),C=l.location.nativeElement,u=l.injector.get(HC,null);return u?.registerApplication(C),l.onDestroy(()=>{this.detachView(l.hostView),e8(this.components,l),u?.unregisterApplication(C)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new h2(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;e8(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(oD,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>e8(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new h2(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(P2(N1),P2(Te),P2(Fe))},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function e8(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let PC=!0,TC=(()=>{class e{}return e.__NG_ELEMENT_ID__=SD,e})();function SD(e){return function wD(e,n,t){if(q5(e)&&!t){const r=a3(e.index,n);return new Y6(r,r)}return 47&e.type?new Y6(n[16],n):null}(y1(),Z(),16==(16&e))}class FC{constructor(){}supports(n){return J6(n)}create(n){return new kD(n)}}const PD=(e,n)=>n;class kD{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||PD}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,a=null;for(;t||r;){const o=!r||t&&t.currentIndex<BC(r,i,a)?t:r,s=BC(o,i,a),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{a||(a=[]);const l=s-i,C=c-i;if(l!=C){for(let f=0;f<l;f++){const V=f<a.length?a[f]:a[f]=0,E=V+f;C<=E&&E<l&&(a[f]=V+1)}a[o.previousIndex]=C-l}}s!==c&&n(o,s,c)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!J6(n))throw new h2(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,a,o,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let s=0;s<this.length;s++)a=n[s],o=this._trackByFn(s,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,s)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,s),r=!0),t=t._next}else i=0,function uS(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[re()]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,s=>{o=this._trackByFn(i,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,i)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,a,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,a,i)):n=this._addAfter(new AD(t,r),a,i),n}_verifyReinsertion(n,t,r,i){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==a?n=this._reinsertAfter(a,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,a=n._nextRemoved;return null===i?this._removalsHead=a:i._nextRemoved=a,null===a?this._removalsTail=i:a._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const i=null===t?this._itHead:t._next;return n._next=i,n._prev=t,null===i?this._itTail=n:i._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new RC),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new RC),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class AD{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TD{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class RC{constructor(){this.map=new Map}put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new TD,this.map.set(t,r)),r.add(n)}get(n,t){const i=this.map.get(n);return i?i.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function BC(e,n,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}class jC{constructor(){}supports(n){return n instanceof Map||H7(n)}create(){return new OD}}class OD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||H7(n)))throw new h2(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const a=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,a)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const i=this._records.get(n);this._maybeAddToChanges(i,t);const a=i._prev,o=i._next;return a&&(a._next=o),o&&(o._prev=a),i._next=null,i._prev=null,i}const r=new ID(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}}class ID{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WC(){return new r8([new FC])}let r8=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||WC()),deps:[[e,new ft,new ut]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new h2(901,!1)}}return e.\u0275prov=B2({token:e,providedIn:"root",factory:WC}),e})();function UC(){return new C5([new jC])}let C5=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||UC()),deps:[[e,new ft,new ut]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new h2(901,!1)}}return e.\u0275prov=B2({token:e,providedIn:"root",factory:UC}),e})();const BD=bC(null,"core",[]);let jD=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(P2(Xt))},e.\u0275mod=p3({type:e}),e.\u0275inj=t3({}),e})();let i8=null;function se(){return i8}const u3=new x2("DocumentToken");let T3=(()=>{class e{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(J6(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${e1(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return e.\u0275fac=function(t){return new(t||e)(G(r8),G(C5),G(U1),G(u4))},e.\u0275dir=z2({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class EN{constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ce=(()=>{class e{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new EN(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===a?void 0:a);else if(null!==a){const s=r.get(a);r.move(s,o),nu(s,i)}});for(let i=0,a=r.length;i<a;i++){const s=r.get(i).context;s.index=i,s.count=a,s.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{nu(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(G(Z3),G(y3),G(r8))},e.\u0275dir=z2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function nu(e,n){e.context.$implicit=n.item}let O3=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new kN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ru("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ru("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(G(Z3),G(y3))},e.\u0275dir=z2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class kN{constructor(){this.$implicit=null,this.ngIf=null}}function ru(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${e1(n)}'.`)}class vr{constructor(n,t){this._viewContainerRef=n,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let h8=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=z2({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),e})(),iu=(()=>{class e{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new vr(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(G(Z3),G(y3),G(h8,9))},e.\u0275dir=z2({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),e})(),ou=(()=>{class e{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),o=-1===i.indexOf("-")?void 0:J1.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(G(U1),G(C5),G(u4))},e.\u0275dir=z2({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),su=(()=>{class e{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:a,ngTemplateOutletInjector:o}=this;this._viewRef=r.createEmbeddedView(i,a,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return e.\u0275fac=function(t){return new(t||e)(G(Z3))},e.\u0275dir=z2({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[i3]}),e})();class ON{createSubscription(n,t){return n.subscribe({next:t,error:r=>{throw r}})}dispose(n){n.unsubscribe()}}class IN{createSubscription(n,t){return n.then(t,r=>{throw r})}dispose(n){}}const FN=new IN,RN=new ON;let Mr=(()=>{class e{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Ot(t))return FN;if(sc(t))return RN;throw function I3(e,n){return new h2(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(G(TC,16))},e.\u0275pipe=Y1({name:"async",type:e,pure:!1,standalone:!0}),e})(),p8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p3({type:e}),e.\u0275inj=t3({}),e})();class yr extends class cE extends class GD{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function UD(e){i8||(i8=e)}(new yr)}onAndCancel(n,t,r){return n.addEventListener(t,r,!1),()=>{n.removeEventListener(t,r,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function lE(){return d5=d5||document.querySelector("base"),d5?d5.getAttribute("href"):null}();return null==t?null:function CE(e){m8=m8||document.createElement("a"),m8.setAttribute("href",e);const n=m8.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){d5=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function DN(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(a)}return null}(document.cookie,n)}}let m8,d5=null;const uu=new x2("TRANSITION_ID"),fE=[{provide:pC,useFactory:function uE(e,n,t){return()=>{t.get(Jt).donePromise.then(()=>{const r=se(),i=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[uu,u3,M3],multi:!0}];let hE=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=B2({token:e,factory:e.\u0275fac}),e})();const g8=new x2("EventManagerPlugins");let v8=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const o=i[a];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(P2(g8),P2(N1))},e.\u0275prov=B2({token:e,factory:e.\u0275fac}),e})();class fu{constructor(n){this._doc=n}addGlobalEventListener(n,t,r){const i=se().getGlobalEventTarget(this._doc,n);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let du=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=B2({token:e,factory:e.\u0275fac}),e})(),h5=(()=>{class e extends du{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const o=this._doc.createElement("style");o.textContent=a,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(hu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(hu))}}return e.\u0275fac=function(t){return new(t||e)(P2(u3))},e.\u0275prov=B2({token:e,factory:e.\u0275fac}),e})();function hu(e){se().remove(e)}const Hr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_r=/%COMP%/g;function M8(e,n,t){for(let r=0;r<n.length;r++){let i=n[r];Array.isArray(i)?M8(e,i,t):(i=i.replace(_r,e),t.push(i))}return t}function gu(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let zr=(()=>{class e{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new br(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case j3.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new LE(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case j3.ShadowDom:return new VE(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=M8(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(P2(v8),P2(h5),P2(l5))},e.\u0275prov=B2({token:e,factory:e.\u0275fac}),e})();class br{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(Hr[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){(Mu(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(Mu(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const a=Hr[i];a?n.setAttributeNS(a,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=Hr[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(J1.DashCase|J1.Important)?n.style.setProperty(t,r,i&J1.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&J1.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,gu(r)):this.eventManager.addEventListener(n,t,gu(r))}}function Mu(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class LE extends br{constructor(n,t,r,i){super(n),this.component=r;const a=M8(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function gE(e){return"_ngcontent-%COMP%".replace(_r,e)}(i+"-"+r.id),this.hostAttr=function vE(e){return"_nghost-%COMP%".replace(_r,e)}(i+"-"+r.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class VE extends br{constructor(n,t,r,i){super(n),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=M8(i.id,i.styles,[]);for(let o=0;o<a.length;o++){const s=document.createElement("style");s.textContent=a[o],this.shadowRoot.appendChild(s)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let yE=(()=>{class e extends fu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return e.\u0275fac=function(t){return new(t||e)(P2(u3))},e.\u0275prov=B2({token:e,factory:e.\u0275fac}),e})();const Lu=["alt","control","meta","shift"],_E={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},zE={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let bE=(()=>{class e extends fu{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const a=e.parseEventName(r),o=e.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>se().onAndCancel(t,a.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=e._normalizeKey(r.pop());let o="";if(Lu.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=a,0!=r.length||0===a.length)return null;const s={};return s.domEventName=i,s.fullKey=o,s}static getEventFullKey(t){let r="",i=function SE(e){let n=e.key;if(null==n){if(n=e.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===e.location&&Vu.hasOwnProperty(n)&&(n=Vu[n]))}return _E[n]||n}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Lu.forEach(a=>{a!=i&&(0,zE[a])(t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{e.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(P2(u3))},e.\u0275prov=B2({token:e,factory:e.\u0275fac}),e})();const NE=bC(BD,"browser",[{provide:vC,useValue:"browser"},{provide:gC,useValue:function wE(){yr.makeCurrent()},multi:!0},{provide:u3,useFactory:function DE(){return function JH(e){h0=e}(document),document},deps:[]}]),Hu=new x2(""),_u=[{provide:Zt,useClass:class dE{addToWindow(n){Z2.getAngularTestability=(r,i=!0)=>{const a=n.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},Z2.getAllAngularTestabilities=()=>n.getAllTestabilities(),Z2.getAllAngularRootElements=()=>n.getAllRootElements(),Z2.frameworkStabilizers||(Z2.frameworkStabilizers=[]),Z2.frameworkStabilizers.push(r=>{const i=Z2.getAllAngularTestabilities();let a=i.length,o=!1;const s=function(c){o=o||c,a--,0==a&&r(o)};i.forEach(function(c){c.whenStable(s)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?se().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:HC,useClass:X7,deps:[N1,er,Zt]},{provide:X7,useClass:X7,deps:[N1,er,Zt]}],zu=[{provide:H0,useValue:"root"},{provide:Fe,useFactory:function xE(){return new Fe},deps:[]},{provide:g8,useClass:yE,multi:!0,deps:[u3,N1,vC]},{provide:g8,useClass:bE,multi:!0,deps:[u3]},{provide:zr,useClass:zr,deps:[v8,h5,l5]},{provide:So,useExisting:zr},{provide:du,useExisting:h5},{provide:h5,useClass:h5,deps:[u3]},{provide:v8,useClass:v8,deps:[g8,N1]},{provide:class sE{},useClass:hE,deps:[]},[]];let EE=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:l5,useValue:t.appId},{provide:uu,useExisting:l5},fE]}}}return e.\u0275fac=function(t){return new(t||e)(P2(Hu,12))},e.\u0275mod=p3({type:e}),e.\u0275inj=t3({providers:[...zu,..._u],imports:[p8,jD]}),e})();typeof window<"u"&&window;let wu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=B2({token:e,factory:function(t){let r=null;return r=t?new(t||e):P2(xu),r},providedIn:"root"}),e})(),xu=(()=>{class e extends wu{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case r1.NONE:return r;case r1.HTML:return G3(r,"HTML")?c3(r):uo(this._doc,String(r)).toString();case r1.STYLE:return G3(r,"Style")?c3(r):r;case r1.SCRIPT:if(G3(r,"Script"))return c3(r);throw new Error("unsafe value used in a script context");case r1.URL:return G3(r,"URL")?c3(r):B6(String(r));case r1.RESOURCE_URL:if(G3(r,"ResourceURL"))return c3(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function o_(e){return new e_(e)}(t)}bypassSecurityTrustStyle(t){return function s_(e){return new t_(e)}(t)}bypassSecurityTrustScript(t){return function c_(e){return new n_(e)}(t)}bypassSecurityTrustUrl(t){return function l_(e){return new r_(e)}(t)}bypassSecurityTrustResourceUrl(t){return function C_(e){return new i_(e)}(t)}}return e.\u0275fac=function(t){return new(t||e)(P2(u3))},e.\u0275prov=B2({token:e,factory:function(t){let r=null;return r=t?new t:function BE(e){return new xu(e.get(u3))}(P2(M3)),r},providedIn:"root"}),e})();function Du(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(l){return void t(l)}s.done?n(c):Promise.resolve(c).then(r,i)}function l6(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var a=e.apply(n,t);function o(c){Du(a,r,i,o,s,"next",c)}function s(c){Du(a,r,i,o,s,"throw",c)}o(void 0)})}}class L8 extends I2{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}function v4(e,n){return l1((t,r)=>{let i=0;t.subscribe(F2(r,a=>e.call(n,a,i++)&&r.next(a)))})}function V8(e){return e<=0?()=>Hn:l1((n,t)=>{let r=0;n.subscribe(F2(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function Nu(e,n=N2){return e=e??jE,l1((t,r)=>{let i,a=!0;t.subscribe(F2(r,o=>{const s=n(o);(a||!e(i,s))&&(a=!1,i=s,r.next(o))}))})}function jE(e,n){return e===n}const y8=new L8(!1),UE=y8.asObservable().pipe(v4(e=>!e),V8(1)),xr={};new class GE{registerPreStoreUpdate(n){xr.preStoreUpdate=n}};const p5=new Map,Dr=new I2;Dr.asObservable();class KE extends L8{constructor(n){super(n.state),this.storeDef=n,this.batchInProgress=!1,this.context={config:this.getConfig()},this.state=n.state,this.initialState=this.getValue(),function $E(e){p5.set(e.name,e),Dr.next({type:"add",store:e})}(this)}get name(){return this.storeDef.name}getConfig(){return this.storeDef.config}query(n){return n(this.getValue())}update(...n){const t=this.getValue();let r=n.reduce((i,a)=>a(i,this.context),t);xr.preStoreUpdate&&(r=xr.preStoreUpdate(t,r,this.name)),r!==t&&(this.state=r,y8.getValue()?this.batchInProgress||(this.batchInProgress=!0,UE.subscribe(()=>{super.next(this.state),this.batchInProgress=!1})):super.next(this.state))}getValue(){return this.state}reset(){this.update(()=>this.initialState)}combine(n){let t=!0;const r={};return new N(i=>{for(const[a,o]of Object.entries(n))i.add(o.subscribe(s=>{r[a]=s,t=!0}));return this.subscribe({next(){t&&(i.next(r),t=!1)},error(a){i.error(a)},complete(){i.complete()}})})}destroy(){(function qE(e){p5.delete(e.name),Dr.next({type:"remove",store:e})})(this),this.reset()}next(n){this.update(()=>n)}error(){}complete(){}}function C6(e){return Array.isArray(e)?e:[e]}function m5(e){return"function"==typeof e}function H8(e){return e.charAt(0).toUpperCase()+e.slice(1)}function QE(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function Eu(e){return m(P1(e),Nu())}function Pu(e,{initialValue:n,config:t}){let r=n;const i=H8(e);return{[`with${i}`]:(a=r)=>({props:{[e]:a},config:t}),[`set${i}InitialValue`](a){r=a},[`set${i}`]:a=>function(o){const s=m5(a)?a(o):a;return s===o[e]?o:Object.assign({},o,{[e]:s})},[`update${i}`]:a=>function(o){const s=m5(a)?a(o):a;return s===o[e]?o:Object.assign({},o,{[e]:QE(s)?Object.assign({},o[e],s):s})},[`reset${i}`]:()=>function(a){return Object.assign({},a,{[e]:r})},[`select${i}`]:()=>Eu(a=>a[e]),[`get${i}`]:a=>a[e]}}function XE(e,n){return[...e,...C6(n)]}function eP(e,n){const t=C6(n);return e.filter(r=>!t.includes(r))}function tP(e,n){const t=C6(n),r=[...e];return t.forEach(i=>{const a=r.indexOf(i);a>-1?r.splice(a,1):r.push(i)}),r}function rP(e,n,t){return e.map(r=>r===n?t:r)}function _8(e,n){const t={},r=[];for(const i of e){const a=i[n];r.push(a),t[a]=i}return{ids:r,asObject:t}}class oP{constructor(n){this.idKeyRef="idKey",this.entitiesKey=n.entitiesKey,this.idsKey=n.idsKey,this.idKeyRef=n.idKeyRef}}function Au(e){const n=e?`idKey${H8(e)}`:"idKey",t=new oP({entitiesKey:e?`${e}Entities`:"entities",idsKey:e?`${e}Ids`:"ids",idKeyRef:n});return{[`${e}EntitiesRef`]:t,[`with${H8(e)}Entities`]:function r(i){let a={},o=[];const s=i?.idKey||"id";return null!=i&&i.initialValue&&({ids:o,asObject:a}=_8(i.initialValue,s)),{props:{[t.entitiesKey]:a,[t.idsKey]:o},config:{[n]:s}}}}}const{withEntities:sP,EntitiesRef:W2}=Au("");function Er(e,n={}){return function(t){const{ref:{idsKey:r,entitiesKey:i}=W2}=n,a=C6(e),o=Object.assign({},t[i]),s=t[r].filter(c=>!a.includes(c));for(const c of a)Reflect.deleteProperty(o,c);return Object.assign({},t,{[i]:o,[r]:s})}}function Iu(e,n){return m5(e)?e(n):Object.assign({},n,e)}function b8(e,n,t={}){return function(r){const{ref:{entitiesKey:i}=W2}=t,a={};for(const o of C6(e))a[o]=Iu(n,r[i][o]);return Object.assign({},r,{[i]:Object.assign({},r[i],a)})}}function Ru(e={}){const{ref:{entitiesKey:n,idsKey:t}=W2}=e;return Eu(r=>r[n][r[t][r[t].length-1]])}Au("UI");Pu("activeId",{initialValue:void 0}),function ZE(e,n){const t=H8(e),r=Pu(e,n);Object.assign({},r,{[`add${t}`]:i=>function(a){return Object.assign({},a,{[e]:XE(a[e],i)})},[`remove${t}`]:i=>function(a){return Object.assign({},a,{[e]:eP(a[e],i)})},[`toggle${t}`]:i=>function(a){return Object.assign({},a,{[e]:tP(a[e],i)})},[`update${t}`]:(i,a)=>function(o){return Object.assign({},o,{[e]:rP(o[e],i,a)})},[`in${t}`]:i=>a=>function nP(e,n){return e.includes(n)}(a[e],i)})}("activeIds",{initialValue:[]});const Pr=y(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Bu(e,n){const t="object"==typeof n;return new Promise((r,i)=>{let o,a=!1;e.subscribe({next:s=>{o=s,a=!0},error:i,complete:()=>{a?r(o):t?r(n.defaultValue):i(new Pr)}})})}var Wu={prefix:"fas",iconName:"angle-left",icon:[256,512,[8249],"f104","M192 448c-8.188 0-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25l160-160c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L77.25 256l137.4 137.4c12.5 12.5 12.5 32.75 0 45.25C208.4 444.9 200.2 448 192 448z"]},Uu={prefix:"fas",iconName:"angle-right",icon:[256,512,[8250],"f105","M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z"]},Ju={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M447.1 256C447.1 273.7 433.7 288 416 288H109.3l105.4 105.4c12.5 12.5 12.5 32.75 0 45.25C208.4 444.9 200.2 448 192 448s-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25l160-160c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L109.3 224H416C433.7 224 447.1 238.3 447.1 256z"]},ef={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6l-160 160C272.4 444.9 264.2 448 256 448s-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L338.8 288H32C14.33 288 .0016 273.7 .0016 256S14.33 224 32 224h306.8l-105.4-105.4c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160C451.1 245.9 451.1 266.1 438.6 278.6z"]},gf={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M464 16c-17.67 0-32 14.31-32 32v74.09C392.1 66.52 327.4 32 256 32C161.5 32 78.59 92.34 49.58 182.2c-5.438 16.81 3.797 34.88 20.61 40.28c16.89 5.5 34.88-3.812 40.3-20.59C130.9 138.5 189.4 96 256 96c50.5 0 96.26 24.55 124.4 64H336c-17.67 0-32 14.31-32 32s14.33 32 32 32h128c17.67 0 32-14.31 32-32V48C496 30.31 481.7 16 464 16zM441.8 289.6c-16.92-5.438-34.88 3.812-40.3 20.59C381.1 373.5 322.6 416 256 416c-50.5 0-96.25-24.55-124.4-64H176c17.67 0 32-14.31 32-32s-14.33-32-32-32h-128c-17.67 0-32 14.31-32 32v144c0 17.69 14.33 32 32 32s32-14.31 32-32v-74.09C119.9 445.5 184.6 480 255.1 480c94.45 0 177.4-60.34 206.4-150.2C467.9 313 458.6 294.1 441.8 289.6z"]},jr={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M31.1 64.03c-17.67 0-31.1 14.33-31.1 32v319.9c0 17.67 14.33 32 32 32C49.67 447.1 64 433.6 64 415.1V96.03C64 78.36 49.67 64.03 31.1 64.03zM267.5 71.41l-192 159.1C67.82 237.8 64 246.9 64 256c0 9.094 3.82 18.18 11.44 24.62l192 159.1c20.63 17.12 52.51 2.75 52.51-24.62v-319.9C319.1 68.66 288.1 54.28 267.5 71.41z"]},Wr={prefix:"fas",iconName:"bahai",icon:[512,512,["haykal"],"f666","M496.3 202.5l-110-15.38l41.88-104.4c6.625-16.63-11.63-32.25-26.63-22.63L307.5 120l-34.13-107.1C270.6 4.25 263.4 0 255.1 0C248.6 0 241.4 4.25 238.6 12.88L204.5 120L110.5 60.12c-15-9.5-33.22 5.1-26.6 22.63l41.85 104.4L15.71 202.5C-1.789 205-5.915 228.8 9.71 237.2l98.14 52.63l-74.51 83.5c-10.88 12.25-1.78 31 13.35 31c1.25 0 2.657-.25 4.032-.5l108.6-23.63l-4.126 112.5C154.7 504.4 164.1 512 173.6 512c5.125 0 10.38-2.25 14.25-7.25l68.13-88.88l68.23 88.88C327.1 509.8 333.2 512 338.4 512c9.5 0 18.88-7.625 18.38-19.25l-4.032-112.5l108.5 23.63c17.38 3.75 29.25-17.25 17.38-30.5l-74.51-83.5l98.14-52.72C517.9 228.8 513.8 205 496.3 202.5zM338.5 311.6L286.6 300.4l2 53.75l-32.63-42.5l-32.63 42.5l2-53.75L173.5 311.6l35.63-39.87L162.1 246.6L214.7 239.2L194.7 189.4l45 28.63L255.1 166.8l16.25 51.25l45-28.63L297.2 239.2l52.63 7.375l-47 25.13L338.5 311.6z"]},Yf={prefix:"fas",iconName:"brain",icon:[512,512,[129504],"f5dc","M184 0C214.9 0 240 25.07 240 56V456C240 486.9 214.9 512 184 512C155.1 512 131.3 490.1 128.3 461.9C123.1 463.3 117.6 464 112 464C76.65 464 48 435.3 48 400C48 392.6 49.27 385.4 51.59 378.8C21.43 367.4 0 338.2 0 304C0 272.1 18.71 244.5 45.77 231.7C37.15 220.8 32 206.1 32 192C32 161.3 53.59 135.7 82.41 129.4C80.84 123.9 80 118 80 112C80 82.06 100.6 56.92 128.3 49.93C131.3 21.86 155.1 0 184 0zM383.7 49.93C411.4 56.92 432 82.06 432 112C432 118 431.2 123.9 429.6 129.4C458.4 135.7 480 161.3 480 192C480 206.1 474.9 220.8 466.2 231.7C493.3 244.5 512 272.1 512 304C512 338.2 490.6 367.4 460.4 378.8C462.7 385.4 464 392.6 464 400C464 435.3 435.3 464 400 464C394.4 464 388.9 463.3 383.7 461.9C380.7 490.1 356.9 512 328 512C297.1 512 272 486.9 272 456V56C272 25.07 297.1 0 328 0C356.9 0 380.7 21.86 383.7 49.93z"]},gd={prefix:"fas",iconName:"check",icon:[448,512,[10004,10003],"f00c","M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z"]},Yr={prefix:"fas",iconName:"circle-arrow-left",icon:[512,512,["arrow-circle-left"],"f0a8","M256 0C114.6 0 0 114.6 0 256c0 141.4 114.6 256 256 256s256-114.6 256-256C512 114.6 397.4 0 256 0zM384 288H205.3l49.38 49.38c12.5 12.5 12.5 32.75 0 45.25s-32.75 12.5-45.25 0L105.4 278.6C97.4 270.7 96 260.9 96 256c0-4.883 1.391-14.66 9.398-22.65l103.1-103.1c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L205.3 224H384c17.69 0 32 14.33 32 32S401.7 288 384 288z"]},Qr={prefix:"fas",iconName:"circle-arrow-right",icon:[512,512,["arrow-circle-right"],"f0a9","M256 0C114.6 0 0 114.6 0 256c0 141.4 114.6 256 256 256s256-114.6 256-256C512 114.6 397.4 0 256 0zM406.6 278.6l-103.1 103.1c-12.5 12.5-32.75 12.5-45.25 0s-12.5-32.75 0-45.25L306.8 288H128C110.3 288 96 273.7 96 256s14.31-32 32-32h178.8l-49.38-49.38c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l103.1 103.1C414.6 241.3 416 251.1 416 256C416 260.9 414.6 270.7 406.6 278.6z"]},Ld=Qr,Jr={prefix:"fas",iconName:"circle-exclamation",icon:[512,512,["exclamation-circle"],"f06a","M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM232 152C232 138.8 242.8 128 256 128s24 10.75 24 24v128c0 13.25-10.75 24-24 24S232 293.3 232 280V152zM256 400c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 385.9 273.4 400 256 400z"]},Ad={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M222.7 32.15C227.7 49.08 218.1 66.9 201.1 71.94C121.8 95.55 64 169.1 64 255.1C64 362 149.1 447.1 256 447.1C362 447.1 448 362 448 255.1C448 169.1 390.2 95.55 310.9 71.94C293.9 66.9 284.3 49.08 289.3 32.15C294.4 15.21 312.2 5.562 329.1 10.6C434.9 42.07 512 139.1 512 255.1C512 397.4 397.4 511.1 256 511.1C114.6 511.1 0 397.4 0 255.1C0 139.1 77.15 42.07 182.9 10.6C199.8 5.562 217.6 15.21 222.7 32.15V32.15z"]},ih={prefix:"fas",iconName:"dice",icon:[640,512,[127922],"f522","M447.1 224c0-12.56-4.781-25.13-14.35-34.76l-174.9-174.9C249.1 4.786 236.5 0 223.1 0C211.4 0 198.9 4.786 189.2 14.35L14.35 189.2C4.783 198.9-.0011 211.4-.0011 223.1c0 12.56 4.785 25.17 14.35 34.8l174.9 174.9c9.625 9.562 22.19 14.35 34.75 14.35s25.13-4.783 34.75-14.35l174.9-174.9C443.2 249.1 447.1 236.6 447.1 224zM96 248c-13.25 0-23.1-10.75-23.1-23.1s10.75-23.1 23.1-23.1S120 210.8 120 224S109.3 248 96 248zM224 376c-13.25 0-23.1-10.75-23.1-23.1s10.75-23.1 23.1-23.1s23.1 10.75 23.1 23.1S237.3 376 224 376zM224 248c-13.25 0-23.1-10.75-23.1-23.1s10.75-23.1 23.1-23.1S248 210.8 248 224S237.3 248 224 248zM224 120c-13.25 0-23.1-10.75-23.1-23.1s10.75-23.1 23.1-23.1s23.1 10.75 23.1 23.1S237.3 120 224 120zM352 248c-13.25 0-23.1-10.75-23.1-23.1s10.75-23.1 23.1-23.1s23.1 10.75 23.1 23.1S365.3 248 352 248zM591.1 192l-118.7 0c4.418 10.27 6.604 21.25 6.604 32.23c0 20.7-7.865 41.38-23.63 57.14l-136.2 136.2v46.37C320 490.5 341.5 512 368 512h223.1c26.5 0 47.1-21.5 47.1-47.1V240C639.1 213.5 618.5 192 591.1 192zM479.1 376c-13.25 0-23.1-10.75-23.1-23.1s10.75-23.1 23.1-23.1s23.1 10.75 23.1 23.1S493.2 376 479.1 376z"]},gh={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,61443,9993],"f0e0","M464 64C490.5 64 512 85.49 512 112C512 127.1 504.9 141.3 492.8 150.4L275.2 313.6C263.8 322.1 248.2 322.1 236.8 313.6L19.2 150.4C7.113 141.3 0 127.1 0 112C0 85.49 21.49 64 48 64H464zM217.6 339.2C240.4 356.3 271.6 356.3 294.4 339.2L512 176V384C512 419.3 483.3 448 448 448H64C28.65 448 0 419.3 0 384V176L217.6 339.2z"]},hp={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128426,128190,"save"],"f0c7","M433.1 129.1l-83.9-83.9C342.3 38.32 327.1 32 316.1 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h320c35.35 0 64-28.65 64-64V163.9C448 152.9 441.7 137.7 433.1 129.1zM224 416c-35.34 0-64-28.66-64-64s28.66-64 64-64s64 28.66 64 64S259.3 416 224 416zM320 208C320 216.8 312.8 224 304 224h-224C71.16 224 64 216.8 64 208v-96C64 103.2 71.16 96 80 96h224C312.8 96 320 103.2 320 112V208z"]},nm={prefix:"fas",iconName:"infinity",icon:[640,512,[9854,8734],"f534","M494.9 96.01c-38.78 0-75.22 15.09-102.6 42.5L320 210.8L247.8 138.5c-27.41-27.41-63.84-42.5-102.6-42.5C65.11 96.01 0 161.1 0 241.1v29.75c0 80.03 65.11 145.1 145.1 145.1c38.78 0 75.22-15.09 102.6-42.5L320 301.3l72.23 72.25c27.41 27.41 63.84 42.5 102.6 42.5C574.9 416 640 350.9 640 270.9v-29.75C640 161.1 574.9 96.01 494.9 96.01zM202.5 328.3c-15.31 15.31-35.69 23.75-57.38 23.75C100.4 352 64 315.6 64 270.9v-29.75c0-44.72 36.41-81.13 81.14-81.13c21.69 0 42.06 8.438 57.38 23.75l72.23 72.25L202.5 328.3zM576 270.9c0 44.72-36.41 81.13-81.14 81.13c-21.69 0-42.06-8.438-57.38-23.75l-72.23-72.25l72.23-72.25c15.31-15.31 35.69-23.75 57.38-23.75C539.6 160 576 196.4 576 241.1V270.9z"]},pm={prefix:"fas",iconName:"lock",icon:[448,512,[128274],"f023","M80 192V144C80 64.47 144.5 0 224 0C303.5 0 368 64.47 368 144V192H384C419.3 192 448 220.7 448 256V448C448 483.3 419.3 512 384 512H64C28.65 512 0 483.3 0 448V256C0 220.7 28.65 192 64 192H80zM144 192H304V144C304 99.82 268.2 64 224 64C179.8 64 144 99.82 144 144V192z"]},k8={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"]},mi={prefix:"fas",iconName:"mobile-screen-button",icon:[384,512,["mobile-alt"],"f3cd","M304 0h-224c-35.35 0-64 28.65-64 64v384c0 35.35 28.65 64 64 64h224c35.35 0 64-28.65 64-64V64C368 28.65 339.3 0 304 0zM192 480c-17.75 0-32-14.25-32-32s14.25-32 32-32s32 14.25 32 32S209.8 480 192 480zM304 64v320h-224V64H304z"]},Jm={prefix:"fas",iconName:"person",icon:[320,512,[129485,"male"],"f183","M208 48C208 74.51 186.5 96 160 96C133.5 96 112 74.51 112 48C112 21.49 133.5 0 160 0C186.5 0 208 21.49 208 48zM152 352V480C152 497.7 137.7 512 120 512C102.3 512 88 497.7 88 480V256.9L59.43 304.5C50.33 319.6 30.67 324.5 15.52 315.4C.3696 306.3-4.531 286.7 4.573 271.5L62.85 174.6C80.2 145.7 111.4 128 145.1 128H174.9C208.6 128 239.8 145.7 257.2 174.6L315.4 271.5C324.5 286.7 319.6 306.3 304.5 315.4C289.3 324.5 269.7 319.6 260.6 304.5L232 256.9V480C232 497.7 217.7 512 200 512C182.3 512 168 497.7 168 480V352L152 352z"]},ug={prefix:"fas",iconName:"person-walking",icon:[320,512,[128694,"walking"],"f554","M256 48C256 74.51 234.5 96 208 96C181.5 96 160 74.51 160 48C160 21.49 181.5 0 208 0C234.5 0 256 21.49 256 48zM126.5 199.3C125.6 199.7 124.6 200.1 123.7 200.5L112.7 205.4C97.41 212.2 85.42 224.6 79.22 240.1L77.71 243.9C71.15 260.3 52.53 268.3 36.12 261.7C19.71 255.1 11.73 236.5 18.29 220.1L19.8 216.3C32.19 185.4 56.18 160.5 86.66 146.9L97.66 142C118.5 132.8 140.1 128 163.7 128C208.3 128 248.5 154.8 265.6 195.9L280.1 232.7L302.3 243.4C318.1 251.3 324.5 270.5 316.6 286.3C308.7 302.1 289.5 308.5 273.7 300.6L247 287.3C236.7 282.1 228.6 273.4 224.2 262.8L214.6 239.8L195.3 305.3L244.8 359.4C250.2 365.3 254.1 372.4 256 380.2L279 472.2C283.3 489.4 272.9 506.8 255.8 511C238.6 515.3 221.2 504.9 216.1 487.8L194.9 399.6L124.3 322.5C109.5 306.4 103.1 283.9 109.6 262.8L126.5 199.3zM68.73 398L93.69 335.6C95.84 338.6 98.16 341.4 100.7 344.2L141.4 388.6L126.9 424.8C124.5 430.9 120.9 436.4 116.3 440.9L54.63 502.6C42.13 515.1 21.87 515.1 9.372 502.6C-3.124 490.1-3.124 469.9 9.372 457.4L68.73 398z"]},mg={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M361 215C375.3 223.8 384 239.3 384 256C384 272.7 375.3 288.2 361 296.1L73.03 472.1C58.21 482 39.66 482.4 24.52 473.9C9.377 465.4 0 449.4 0 432V80C0 62.64 9.377 46.63 24.52 38.13C39.66 29.64 58.21 29.99 73.03 39.04L361 215z"]},nv={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},zv={prefix:"fas",iconName:"suitcase",icon:[512,512,[129523],"f0f2","M128 56C128 25.07 153.1 0 184 0H328C358.9 0 384 25.07 384 56V480H128V56zM176 96H336V56C336 51.58 332.4 48 328 48H184C179.6 48 176 51.58 176 56V96zM64 96H96V480H64C28.65 480 0 451.3 0 416V160C0 124.7 28.65 96 64 96zM448 480H416V96H448C483.3 96 512 124.7 512 160V416C512 451.3 483.3 480 448 480z"]},aM={prefix:"fas",iconName:"user",icon:[448,512,[62144,128100],"f007","M224 256c70.7 0 128-57.31 128-128s-57.3-128-128-128C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3c0 19.14 15.52 34.67 34.66 34.67h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304z"]};function SM(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function d2(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?SM(Object(t),!0).forEach(function(r){x52(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SM(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function U8(e){return(U8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function wM(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x52(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ei(e,n){return function E52(e){if(Array.isArray(e))return e}(e)||function k52(e,n){var t=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var o,s,r=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(o=t.next()).done)&&(r.push(o.value),!n||r.length!==n);i=!0);}catch(c){a=!0,s=c}finally{try{!i&&null!=t.return&&t.return()}finally{if(a)throw s}}return r}}(e,n)||xM(e,n)||function T52(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $8(e){return function N52(e){if(Array.isArray(e))return Pi(e)}(e)||function P52(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xM(e)||function A52(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xM(e,n){if(e){if("string"==typeof e)return Pi(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pi(e,n)}}function Pi(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var DM=function(){},ki={},NM={},EM=null,PM={mark:DM,measure:DM};try{typeof window<"u"&&(ki=window),typeof document<"u"&&(NM=document),typeof MutationObserver<"u"&&(EM=MutationObserver),typeof performance<"u"&&(PM=performance)}catch{}var kM=(ki.navigator||{}).userAgent,AM=void 0===kM?"":kM,j4=ki,o1=NM,TM=EM,q8=PM,M4=!!o1.documentElement&&!!o1.head&&"function"==typeof o1.addEventListener&&"function"==typeof o1.createElement,OM=~AM.indexOf("MSIE")||~AM.indexOf("Trident/"),L4="___FONT_AWESOME___",FM="svg-inline--fa",le="data-fa-i2svg",Ti="data-fa-pseudo-element",Oi="data-prefix",Ii="data-icon",RM="fontawesome-i2svg",R52=["HTML","HEAD","STYLE","SCRIPT"],BM=function(){try{return!0}catch{return!1}}(),Fi={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},K8={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},jM={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},B52={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},j52=/fa[srltdbk]?[\-\ ]/,WM="fa-layers-text",W52=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,U52={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},UM=[1,2,3,4,5,6,7,8,9,10],G52=UM.concat([11,12,13,14,15,16,17,18,19,20]),$52=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],q52=[].concat($8(Object.keys(K8)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","duotone-group","swap-opacity","primary","secondary"]).concat(UM.map(function(e){return"".concat(e,"x")})).concat(G52.map(function(e){return"w-".concat(e)})),GM=j4.FontAwesomeConfig||{};o1&&"function"==typeof o1.querySelector&&[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(e){var n=Ei(e,2),r=n[1],i=function Y52(e){return""===e||"false"!==e&&("true"===e||e)}(function K52(e){var n=o1.querySelector("script["+e+"]");if(n)return n.getAttribute(e)}(n[0]));null!=i&&(GM[r]=i)});var z5=d2(d2({},{familyPrefix:"fa",styleDefault:"solid",replacementClass:FM,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0}),GM);z5.autoReplaceSvg||(z5.observeMutations=!1);var v2={};Object.keys(z5).forEach(function(e){Object.defineProperty(v2,e,{enumerable:!0,set:function(t){z5[e]=t,Y8.forEach(function(r){return r(v2)})},get:function(){return z5[e]}})}),j4.FontAwesomeConfig=v2;var Y8=[],X3={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function b5(){for(var e=12,n="";e-- >0;)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return n}function u6(e){for(var n=[],t=(e||[]).length>>>0;t--;)n[t]=e[t];return n}function Ri(e){return e.classList?u6(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(n){return n})}function $M(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Q8(e){return Object.keys(e||{}).reduce(function(n,t){return n+"".concat(t,": ").concat(e[t].trim(),";")},"")}function Bi(e){return e.size!==X3.size||e.x!==X3.x||e.y!==X3.y||e.rotate!==X3.rotate||e.flipX||e.flipY}function qM(){var e="fa",n=FM,t=v2.familyPrefix,r=v2.replacementClass,i=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(t!==e||r!==n){var a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(n),"g");i=i.replace(a,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(s,".".concat(r))}return i}var KM=!1;function ji(){v2.autoAddCss&&!KM&&(function X52(e){if(e&&M4){var n=o1.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=e;for(var t=o1.head.childNodes,r=null,i=t.length-1;i>-1;i--){var a=t[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}o1.head.insertBefore(n,r)}}(qM()),KM=!0)}var at2={mixout:function(){return{dom:{css:qM,insertCss:ji}}},hooks:function(){return{beforeDOMElementCreation:function(){ji()},beforeI2svg:function(){ji()}}}},V4=j4||{};V4[L4]||(V4[L4]={}),V4[L4].styles||(V4[L4].styles={}),V4[L4].hooks||(V4[L4].hooks={}),V4[L4].shims||(V4[L4].shims=[]);var F3=V4[L4],YM=[],J8=!1;function st2(e){!M4||(J8?setTimeout(e,0):YM.push(e))}function S5(e){var n=e.tag,t=e.attributes,r=void 0===t?{}:t,i=e.children,a=void 0===i?[]:i;return"string"==typeof e?$M(e):"<".concat(n," ").concat(function tt2(e){return Object.keys(e||{}).reduce(function(n,t){return n+"".concat(t,'="').concat($M(e[t]),'" ')},"").trim()}(r),">").concat(a.map(S5).join(""),"</").concat(n,">")}function QM(e,n,t){if(e&&e[n]&&e[n][t])return{prefix:n,iconName:t,icon:e[n][t]}}M4&&((J8=(o1.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(o1.readyState))||o1.addEventListener("DOMContentLoaded",function e(){o1.removeEventListener("DOMContentLoaded",e),J8=1,YM.map(function(n){return n()})}));var Wi=function(n,t,r,i){var c,l,C,a=Object.keys(n),o=a.length,s=void 0!==i?function(n,t){return function(r,i,a,o){return n.call(t,r,i,a,o)}}(t,i):t;for(void 0===r?(c=1,C=n[a[0]]):(c=0,C=r);c<o;c++)C=s(C,n[l=a[c]],l,n);return C};function Ui(e){var n=function lt2(e){for(var n=[],t=0,r=e.length;t<r;){var i=e.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){var a=e.charCodeAt(t++);56320==(64512&a)?n.push(((1023&i)<<10)+(1023&a)+65536):(n.push(i),t--)}else n.push(i)}return n}(e);return 1===n.length?n[0].toString(16):null}function JM(e){return Object.keys(e).reduce(function(n,t){var r=e[t];return r.icon?n[r.iconName]=r.icon:n[t]=r,n},{})}function Gi(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.skipHooks,i=void 0!==r&&r,a=JM(n);"function"!=typeof F3.hooks.addPack||i?F3.styles[e]=d2(d2({},F3.styles[e]||{}),a):F3.hooks.addPack(e,JM(n)),"fas"===e&&Gi("fa",n)}var w5=F3.styles,ut2=F3.shims,ft2=Object.values(jM),$i=null,ZM={},XM={},eL={},tL={},nL={},dt2=Object.keys(Fi);function pt2(e,n){var t=n.split("-"),r=t[0],i=t.slice(1).join("-");return r!==e||""===i||function ht2(e){return~q52.indexOf(e)}(i)?null:i}var rL=function(){var n=function(a){return Wi(w5,function(o,s,c){return o[c]=Wi(s,a,{}),o},{})};ZM=n(function(i,a,o){return a[3]&&(i[a[3]]=o),a[2]&&a[2].filter(function(c){return"number"==typeof c}).forEach(function(c){i[c.toString(16)]=o}),i}),XM=n(function(i,a,o){return i[o]=o,a[2]&&a[2].filter(function(c){return"string"==typeof c}).forEach(function(c){i[c]=o}),i}),nL=n(function(i,a,o){var s=a[2];return i[o]=o,s.forEach(function(c){i[c]=o}),i});var t="far"in w5||v2.autoFetchSvg,r=Wi(ut2,function(i,a){var o=a[0],s=a[1],c=a[2];return"far"===s&&!t&&(s="fas"),"string"==typeof o&&(i.names[o]={prefix:s,iconName:c}),"number"==typeof o&&(i.unicodes[o.toString(16)]={prefix:s,iconName:c}),i},{names:{},unicodes:{}});eL=r.names,tL=r.unicodes,$i=Z8(v2.styleDefault)};function qi(e,n){return(ZM[e]||{})[n]}function f6(e,n){return(nL[e]||{})[n]}function iL(e){return eL[e]||{prefix:null,iconName:null}}function U4(){return $i}function Z8(e){return K8[e]||K8[Fi[e]]||(e in F3.styles?e:null)||null}function X8(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.skipLookups,r=void 0!==t&&t,i=null,a=e.reduce(function(o,s){var c=pt2(v2.familyPrefix,s);if(w5[s]?(s=ft2.includes(s)?B52[s]:s,i=s,o.prefix=s):dt2.indexOf(s)>-1?(i=s,o.prefix=Z8(s)):c?o.iconName=c:s!==v2.replacementClass&&o.rest.push(s),!r&&o.prefix&&o.iconName){var l="fa"===i?iL(o.iconName):{},C=f6(o.prefix,o.iconName);l.prefix&&(i=null),o.iconName=l.iconName||C||o.iconName,o.prefix=l.prefix||o.prefix,"far"===o.prefix&&!w5.far&&w5.fas&&!v2.autoFetchSvg&&(o.prefix="fas")}return o},{prefix:null,iconName:null,rest:[]});return("fa"===a.prefix||"fa"===i)&&(a.prefix=U4()||"fas"),a}(function Z52(e){Y8.push(e)})(function(e){$i=Z8(e.styleDefault)}),rL();var vt2=function(){function e(){(function S52(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")})(this,e),this.definitions={}}return function w52(e,n,t){n&&wM(e.prototype,n),t&&wM(e,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"add",value:function(){for(var t=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(s){t.definitions[s]=d2(d2({},t.definitions[s]||{}),o[s]),Gi(s,o[s]);var c=jM[s];c&&Gi(c,o[s]),rL()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(a){var o=i[a],s=o.prefix,c=o.iconName,l=o.icon,C=l[2];t[s]||(t[s]={}),C.length>0&&C.forEach(function(u){"string"==typeof u&&(t[s][u]=l)}),t[s][c]=l}),t}}]),e}(),aL=[],d6={},h6={},Mt2=Object.keys(h6);function Yi(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];var a=d6[e]||[];return a.forEach(function(o){n=o.apply(null,[n].concat(r))}),n}function ue(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var i=d6[e]||[];i.forEach(function(a){a.apply(null,t)})}function y4(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1);return h6[e]?h6[e].apply(null,n):void 0}function Qi(e){"fa"===e.prefix&&(e.prefix="fas");var n=e.iconName,t=e.prefix||U4();if(n)return n=f6(t,n)||n,QM(oL.definitions,t,n)||QM(F3.styles,t,n)}var oL=new vt2,yt2={i2svg:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return M4?(ue("beforeI2svg",n),y4("pseudoElements2svg",n),y4("i2svg",n)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.autoReplaceSvgRoot;!1===v2.autoReplaceSvg&&(v2.autoReplaceSvg=!0),v2.observeMutations=!0,st2(function(){_t2({autoReplaceSvgRoot:t}),ue("watch",n)})}},f3={noAuto:function(){v2.autoReplaceSvg=!1,v2.observeMutations=!1,ue("noAuto")},config:v2,dom:yt2,parse:{icon:function(n){if(null===n)return null;if("object"===U8(n)&&n.prefix&&n.iconName)return{prefix:n.prefix,iconName:f6(n.prefix,n.iconName)||n.iconName};if(Array.isArray(n)&&2===n.length){var t=0===n[1].indexOf("fa-")?n[1].slice(3):n[1],r=Z8(n[0]);return{prefix:r,iconName:f6(r,t)||t}}if("string"==typeof n&&(n.indexOf("".concat(v2.familyPrefix,"-"))>-1||n.match(j52))){var i=X8(n.split(" "),{skipLookups:!0});return{prefix:i.prefix||U4(),iconName:f6(i.prefix,i.iconName)||i.iconName}}if("string"==typeof n){var a=U4();return{prefix:a,iconName:f6(a,n)||n}}}},library:oL,findIconDefinition:Qi,toHtml:S5},_t2=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.autoReplaceSvgRoot,r=void 0===t?o1:t;(Object.keys(F3.styles).length>0||v2.autoFetchSvg)&&M4&&v2.autoReplaceSvg&&f3.dom.i2svg({node:r})};function en(e,n){return Object.defineProperty(e,"abstract",{get:n}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(r){return S5(r)})}}),Object.defineProperty(e,"node",{get:function(){if(M4){var r=o1.createElement("div");return r.innerHTML=e.html,r.children}}}),e}function Ji(e){var n=e.icons,t=n.main,r=n.mask,i=e.prefix,a=e.iconName,o=e.transform,s=e.symbol,c=e.title,l=e.maskId,C=e.titleId,u=e.extra,f=e.watchable,V=void 0!==f&&f,E=r.found?r:t,B=E.width,J=E.height,X="fak"===i,s2=[v2.replacementClass,a?"".concat(v2.familyPrefix,"-").concat(a):""].filter(function(a4){return-1===u.classes.indexOf(a4)}).filter(function(a4){return""!==a4||!!a4}).concat(u.classes).join(" "),W={children:[],attributes:d2(d2({},u.attributes),{},{"data-prefix":i,"data-icon":a,class:s2,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(B," ").concat(J)})},u2=X&&!~u.classes.indexOf("fa-fw")?{width:"".concat(B/J*16*.0625,"em")}:{};V&&(W.attributes[le]=""),c&&(W.children.push({tag:"title",attributes:{id:W.attributes["aria-labelledby"]||"title-".concat(C||b5())},children:[c]}),delete W.attributes.title);var M2=d2(d2({},W),{},{prefix:i,iconName:a,main:t,mask:r,maskId:l,transform:o,symbol:s,styles:d2(d2({},u2),u.styles)}),U2=r.found&&t.found?y4("generateAbstractMask",M2)||{children:[],attributes:{}}:y4("generateAbstractIcon",M2)||{children:[],attributes:{}},b4=U2.attributes;return M2.children=U2.children,M2.attributes=b4,s?function bt2(e){var t=e.iconName,r=e.children,i=e.attributes,a=e.symbol,o=!0===a?"".concat(e.prefix,"-").concat(v2.familyPrefix,"-").concat(t):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:d2(d2({},i),{},{id:o}),children:r}]}]}(M2):function zt2(e){var n=e.children,t=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(Bi(o)&&t.found&&!r.found){var l={x:t.width/t.height/2,y:.5};i.style=Q8(d2(d2({},a),{},{"transform-origin":"".concat(l.x+o.x/16,"em ").concat(l.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:n}]}(M2)}function sL(e){var n=e.content,t=e.width,r=e.height,i=e.transform,a=e.title,o=e.extra,s=e.watchable,c=void 0!==s&&s,l=d2(d2(d2({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});c&&(l[le]="");var C=d2({},o.styles);Bi(i)&&(C.transform=function rt2(e){var n=e.transform,t=e.width,i=e.height,a=void 0===i?16:i,o=e.startCentered,s=void 0!==o&&o,c="";return c+=s&&OM?"translate(".concat(n.x/16-(void 0===t?16:t)/2,"em, ").concat(n.y/16-a/2,"em) "):s?"translate(calc(-50% + ".concat(n.x/16,"em), calc(-50% + ").concat(n.y/16,"em)) "):"translate(".concat(n.x/16,"em, ").concat(n.y/16,"em) "),(c+="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "))+"rotate(".concat(n.rotate,"deg) ")}({transform:i,startCentered:!0,width:t,height:r}),C["-webkit-transform"]=C.transform);var u=Q8(C);u.length>0&&(l.style=u);var f=[];return f.push({tag:"span",attributes:l,children:[n]}),a&&f.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),f}function St2(e){var n=e.content,t=e.title,r=e.extra,i=d2(d2(d2({},r.attributes),t?{title:t}:{}),{},{class:r.classes.join(" ")}),a=Q8(r.styles);a.length>0&&(i.style=a);var o=[];return o.push({tag:"span",attributes:i,children:[n]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var Zi=F3.styles;function Xi(e){var n=e[0],t=e[1],a=Ei(e.slice(4),1)[0];return{found:!0,width:n,height:t,icon:Array.isArray(a)?{tag:"g",attributes:{class:"".concat(v2.familyPrefix,"-").concat("duotone-group")},children:[{tag:"path",attributes:{class:"".concat(v2.familyPrefix,"-").concat("secondary"),fill:"currentColor",d:a[0]}},{tag:"path",attributes:{class:"".concat(v2.familyPrefix,"-").concat("primary"),fill:"currentColor",d:a[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:a}}}}var wt2={found:!1,width:512,height:512};function ea(e,n){var t=n;return"fa"===n&&null!==v2.styleDefault&&(n=U4()),new Promise(function(r,i){if(y4("missingIconAbstract"),"fa"===t){var o=iL(e)||{};e=o.iconName||e,n=o.prefix||n}if(e&&n&&Zi[n]&&Zi[n][e])return r(Xi(Zi[n][e]));(function xt2(e,n){!BM&&!v2.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(n,'" is missing.'))})(e,n),r(d2(d2({},wt2),{},{icon:v2.showMissingIcons&&e&&y4("missingIconAbstract")||{}}))})}var cL=function(){},ta=v2.measurePerformance&&q8&&q8.mark&&q8.measure?q8:{mark:cL,measure:cL},x5='FA "6.1.2"',na_begin=function(n){return ta.mark("".concat(x5," ").concat(n," begins")),function(){return function(n){ta.mark("".concat(x5," ").concat(n," ends")),ta.measure("".concat(x5," ").concat(n),"".concat(x5," ").concat(n," begins"),"".concat(x5," ").concat(n," ends"))}(n)}},tn=function(){};function CL(e){return"string"==typeof(e.getAttribute?e.getAttribute(le):null)}function kt2(e){return o1.createElementNS("http://www.w3.org/2000/svg",e)}function At2(e){return o1.createElement(e)}function uL(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.ceFn,r=void 0===t?"svg"===e.tag?kt2:At2:t;if("string"==typeof e)return o1.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach(function(o){i.setAttribute(o,e.attributes[o])});var a=e.children||[];return a.forEach(function(o){i.appendChild(uL(o,{ceFn:r}))}),i}var nn={replace:function(n){var t=n[0];if(t.parentNode)if(n[1].forEach(function(i){t.parentNode.insertBefore(uL(i),t)}),null===t.getAttribute(le)&&v2.keepOriginalSource){var r=o1.createComment(function Tt2(e){var n=" ".concat(e.outerHTML," ");return"".concat(n,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(r,t)}else t.remove()},nest:function(n){var t=n[0],r=n[1];if(~Ri(t).indexOf(v2.replacementClass))return nn.replace(n);var i=new RegExp("".concat(v2.familyPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var a=r[0].attributes.class.split(" ").reduce(function(s,c){return c===v2.replacementClass||c.match(i)?s.toSvg.push(c):s.toNode.push(c),s},{toNode:[],toSvg:[]});r[0].attributes.class=a.toSvg.join(" "),0===a.toNode.length?t.removeAttribute("class"):t.setAttribute("class",a.toNode.join(" "))}var o=r.map(function(s){return S5(s)}).join("\n");t.setAttribute(le,""),t.innerHTML=o}};function fL(e){e()}function dL(e,n){var t="function"==typeof n?n:tn;if(0===e.length)t();else{var r=fL;"async"===v2.mutateApproach&&(r=j4.requestAnimationFrame||fL),r(function(){var i=function Pt2(){return!0===v2.autoReplaceSvg?nn.replace:nn[v2.autoReplaceSvg]||nn.replace}(),a=na_begin("mutate");e.map(i),a(),t()})}}var ra=!1;function hL(){ra=!0}function ia(){ra=!1}var rn=null;function pL(e){if(TM&&v2.observeMutations){var n=e.treeCallback,t=void 0===n?tn:n,r=e.nodeCallback,i=void 0===r?tn:r,a=e.pseudoElementsCallback,o=void 0===a?tn:a,s=e.observeMutationsRoot,c=void 0===s?o1:s;rn=new TM(function(l){if(!ra){var C=U4();u6(l).forEach(function(u){if("childList"===u.type&&u.addedNodes.length>0&&!CL(u.addedNodes[0])&&(v2.searchPseudoElements&&o(u.target),t(u.target)),"attributes"===u.type&&u.target.parentNode&&v2.searchPseudoElements&&o(u.target.parentNode),"attributes"===u.type&&CL(u.target)&&~$52.indexOf(u.attributeName))if("class"===u.attributeName&&function Nt2(e){var n=e.getAttribute?e.getAttribute(Oi):null,t=e.getAttribute?e.getAttribute(Ii):null;return n&&t}(u.target)){var f=X8(Ri(u.target)),E=f.iconName;u.target.setAttribute(Oi,f.prefix||C),E&&u.target.setAttribute(Ii,E)}else(function Et2(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(v2.replacementClass)})(u.target)&&i(u.target)})}}),M4&&rn.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function It2(e){var n=e.getAttribute("style"),t=[];return n&&(t=n.split(";").reduce(function(r,i){var a=i.split(":"),o=a[0],s=a.slice(1);return o&&s.length>0&&(r[o]=s.join(":").trim()),r},{})),t}function Ft2(e){var n=e.getAttribute("data-prefix"),t=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=X8(Ri(e));return i.prefix||(i.prefix=U4()),n&&t&&(i.prefix=n,i.iconName=t),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function mt2(e,n){return(XM[e]||{})[n]}(i.prefix,e.innerText)||qi(i.prefix,Ui(e.innerText))),!i.iconName&&v2.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function Rt2(e){var n=u6(e.attributes).reduce(function(i,a){return"class"!==i.name&&"style"!==i.name&&(i[a.name]=a.value),i},{}),t=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return v2.autoA11y&&(t?n["aria-labelledby"]="".concat(v2.replacementClass,"-title-").concat(r||b5()):(n["aria-hidden"]="true",n.focusable="false")),n}function mL(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=Ft2(e),r=t.iconName,i=t.prefix,a=t.rest,o=Rt2(e),s=Yi("parseNodeAttributes",{},e),c=n.styleParser?It2(e):[];return d2({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:X3,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:c,attributes:o}},s)}var jt2=F3.styles;function gL(e){var n="nest"===v2.autoReplaceSvg?mL(e,{styleParser:!1}):mL(e);return~n.extra.classes.indexOf(WM)?y4("generateLayersText",e,n):y4("generateSvgReplacementMutation",e,n)}function vL(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!M4)return Promise.resolve();var t=o1.documentElement.classList,r=function(u){return t.add("".concat(RM,"-").concat(u))},i=function(u){return t.remove("".concat(RM,"-").concat(u))},a=Object.keys(v2.autoFetchSvg?Fi:jt2);a.includes("fa")||a.push("fa");var o=[".".concat(WM,":not([").concat(le,"])")].concat(a.map(function(C){return".".concat(C,":not([").concat(le,"])")})).join(", ");if(0===o.length)return Promise.resolve();var s=[];try{s=u6(e.querySelectorAll(o))}catch{}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");var c=na_begin("onTree"),l=s.reduce(function(C,u){try{var f=gL(u);f&&C.push(f)}catch(V){BM||"MissingIcon"===V.name&&console.error(V)}return C},[]);return new Promise(function(C,u){Promise.all(l).then(function(f){dL(f,function(){r("active"),r("complete"),i("pending"),"function"==typeof n&&n(),c(),C()})}).catch(function(f){c(),u(f)})})}function Wt2(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;gL(e).then(function(t){t&&dL([t],n)})}var Gt2=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.transform,i=void 0===r?X3:r,a=t.symbol,o=void 0!==a&&a,s=t.mask,c=void 0===s?null:s,l=t.maskId,C=void 0===l?null:l,u=t.title,f=void 0===u?null:u,V=t.titleId,E=void 0===V?null:V,B=t.classes,J=void 0===B?[]:B,X=t.attributes,s2=void 0===X?{}:X,W=t.styles,u2=void 0===W?{}:W;if(n){var M2=n.prefix,U2=n.iconName,d3=n.icon;return en(d2({type:"icon"},n),function(){return ue("beforeDOMElementCreation",{iconDefinition:n,params:t}),v2.autoA11y&&(f?s2["aria-labelledby"]="".concat(v2.replacementClass,"-title-").concat(E||b5()):(s2["aria-hidden"]="true",s2.focusable="false")),Ji({icons:{main:Xi(d3),mask:c?Xi(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:M2,iconName:U2,transform:d2(d2({},X3),i),symbol:o,title:f,maskId:C,titleId:E,extra:{attributes:s2,styles:u2,classes:J}})})}},$t2={mixout:function(){return{icon:(e=Gt2,function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(n||{}).icon?n:Qi(n||{}),i=t.mask;return i&&(i=(i||{}).icon?i:Qi(i||{})),e(r,d2(d2({},t),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=vL,t.nodeCallback=Wt2,t}}},provides:function(n){n.i2svg=function(t){var r=t.node,a=t.callback;return vL(void 0===r?o1:r,void 0===a?function(){}:a)},n.generateSvgReplacementMutation=function(t,r){var i=r.iconName,a=r.title,o=r.titleId,s=r.prefix,c=r.transform,l=r.symbol,C=r.mask,u=r.maskId,f=r.extra;return new Promise(function(V,E){Promise.all([ea(i,s),C.iconName?ea(C.iconName,C.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(B){var J=Ei(B,2);V([t,Ji({icons:{main:J[0],mask:J[1]},prefix:s,iconName:i,transform:c,symbol:l,maskId:u,title:a,titleId:o,extra:f,watchable:!0})])}).catch(E)})},n.generateAbstractIcon=function(t){var l,r=t.children,i=t.attributes,a=t.main,o=t.transform,c=Q8(t.styles);return c.length>0&&(i.style=c),Bi(o)&&(l=y4("generateAbstractTransformGrouping",{main:a,transform:o,containerWidth:a.width,iconWidth:a.width})),r.push(l||a.icon),{children:r,attributes:i}}}},qt2={mixout:function(){return{layer:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.classes,a=void 0===i?[]:i;return en({type:"layer"},function(){ue("beforeDOMElementCreation",{assembler:t,params:r});var o=[];return t(function(s){Array.isArray(s)?s.map(function(c){o=o.concat(c.abstract)}):o=o.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(v2.familyPrefix,"-layers")].concat($8(a)).join(" ")},children:o}]})}}}},Kt2={mixout:function(){return{counter:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.title,a=void 0===i?null:i,o=r.classes,s=void 0===o?[]:o,c=r.attributes,l=void 0===c?{}:c,C=r.styles,u=void 0===C?{}:C;return en({type:"counter",content:t},function(){return ue("beforeDOMElementCreation",{content:t,params:r}),St2({content:t.toString(),title:a,extra:{attributes:l,styles:u,classes:["".concat(v2.familyPrefix,"-layers-counter")].concat($8(s))}})})}}}},Yt2={mixout:function(){return{text:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.transform,a=void 0===i?X3:i,o=r.title,s=void 0===o?null:o,c=r.classes,l=void 0===c?[]:c,C=r.attributes,u=void 0===C?{}:C,f=r.styles,V=void 0===f?{}:f;return en({type:"text",content:t},function(){return ue("beforeDOMElementCreation",{content:t,params:r}),sL({content:t,transform:d2(d2({},X3),a),title:s,extra:{attributes:u,styles:V,classes:["".concat(v2.familyPrefix,"-layers-text")].concat($8(l))}})})}}},provides:function(n){n.generateLayersText=function(t,r){var i=r.title,a=r.transform,o=r.extra,s=null,c=null;if(OM){var l=parseInt(getComputedStyle(t).fontSize,10),C=t.getBoundingClientRect();s=C.width/l,c=C.height/l}return v2.autoA11y&&!i&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,sL({content:t.innerHTML,width:s,height:c,transform:a,title:i,extra:o,watchable:!0})])}}},Qt2=new RegExp('"',"ug"),ML=[1105920,1112319];function LL(e,n){var t="".concat("data-fa-pseudo-element-pending").concat(n.replace(":","-"));return new Promise(function(r,i){if(null!==e.getAttribute(t))return r();var o=u6(e.children).filter(function(U2){return U2.getAttribute(Ti)===n})[0],s=j4.getComputedStyle(e,n),c=s.getPropertyValue("font-family").match(W52),l=s.getPropertyValue("font-weight"),C=s.getPropertyValue("content");if(o&&!c)return e.removeChild(o),r();if(c&&"none"!==C&&""!==C){var u=s.getPropertyValue("content"),f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?K8[c[2].toLowerCase()]:U52[l],V=function Jt2(e){var n=e.replace(Qt2,""),t=function Ct2(e,n){var i,t=e.length,r=e.charCodeAt(n);return r>=55296&&r<=56319&&t>n+1&&(i=e.charCodeAt(n+1))>=56320&&i<=57343?1024*(r-55296)+i-56320+65536:r}(n,0),r=t>=ML[0]&&t<=ML[1],i=2===n.length&&n[0]===n[1];return{value:Ui(i?n[0]:n),isSecondary:r||i}}(u),E=V.value,B=V.isSecondary,J=c[0].startsWith("FontAwesome"),X=qi(f,E),s2=X;if(J){var W=function gt2(e){var n=tL[e],t=qi("fas",e);return n||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(E);W.iconName&&W.prefix&&(X=W.iconName,f=W.prefix)}if(!X||B||o&&o.getAttribute(Oi)===f&&o.getAttribute(Ii)===s2)r();else{e.setAttribute(t,s2),o&&e.removeChild(o);var u2=function Bt2(){return{iconName:null,title:null,titleId:null,prefix:null,transform:X3,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),M2=u2.extra;M2.attributes[Ti]=n,ea(X,f).then(function(U2){var d3=Ji(d2(d2({},u2),{},{icons:{main:U2,mask:{prefix:null,iconName:null,rest:[]}},prefix:f,iconName:s2,extra:M2,watchable:!0})),b4=o1.createElement("svg");"::before"===n?e.insertBefore(b4,e.firstChild):e.appendChild(b4),b4.outerHTML=d3.map(function(a4){return S5(a4)}).join("\n"),e.removeAttribute(t),r()}).catch(i)}}else r()})}function Zt2(e){return Promise.all([LL(e,"::before"),LL(e,"::after")])}function Xt2(e){return!(e.parentNode===document.head||~R52.indexOf(e.tagName.toUpperCase())||e.getAttribute(Ti)||e.parentNode&&"svg"===e.parentNode.tagName)}function VL(e){if(M4)return new Promise(function(n,t){var r=u6(e.querySelectorAll("*")).filter(Xt2).map(Zt2),i=na_begin("searchPseudoElements");hL(),Promise.all(r).then(function(){i(),ia(),n()}).catch(function(){i(),ia(),t()})})}var yL=!1,HL=function(n){return n.toLowerCase().split(" ").reduce(function(r,i){var a=i.toLowerCase().split("-"),o=a[0],s=a.slice(1).join("-");if(o&&"h"===s)return r.flipX=!0,r;if(o&&"v"===s)return r.flipY=!0,r;if(s=parseFloat(s),isNaN(s))return r;switch(o){case"grow":r.size=r.size+s;break;case"shrink":r.size=r.size-s;break;case"left":r.x=r.x-s;break;case"right":r.x=r.x+s;break;case"up":r.y=r.y-s;break;case"down":r.y=r.y+s;break;case"rotate":r.rotate=r.rotate+s}return r},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},aa={x:0,y:0,width:"100%",height:"100%"};function _L(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||n)&&(e.attributes.fill="black"),e}!function Lt2(e,n){var t=n.mixoutsTo;aL=e,d6={},Object.keys(h6).forEach(function(r){-1===Mt2.indexOf(r)&&delete h6[r]}),aL.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(o){"function"==typeof i[o]&&(t[o]=i[o]),"object"===U8(i[o])&&Object.keys(i[o]).forEach(function(s){t[o]||(t[o]={}),t[o][s]=i[o][s]})}),r.hooks){var a=r.hooks();Object.keys(a).forEach(function(o){d6[o]||(d6[o]=[]),d6[o].push(a[o])})}r.provides&&r.provides(h6)})}([at2,$t2,qt2,Kt2,Yt2,{hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=VL,t}}},provides:function(n){n.pseudoElements2svg=function(t){var r=t.node;v2.searchPseudoElements&&VL(void 0===r?o1:r)}}},{mixout:function(){return{dom:{unwatch:function(){hL(),yL=!0}}}},hooks:function(){return{bootstrap:function(){pL(Yi("mutationObserverCallbacks",{}))},noAuto:function(){!function Ot2(){!rn||rn.disconnect()}()},watch:function(t){var r=t.observeMutationsRoot;yL?ia():pL(Yi("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},{mixout:function(){return{parse:{transform:function(t){return HL(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,r){var i=r.getAttribute("data-fa-transform");return i&&(t.transform=HL(i)),t}}},provides:function(n){n.generateAbstractTransformGrouping=function(t){var r=t.main,i=t.transform,o=t.iconWidth,s={transform:"translate(".concat(t.containerWidth/2," 256)")},c="translate(".concat(32*i.x,", ").concat(32*i.y,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),C="rotate(".concat(i.rotate," 0 0)"),V={outer:s,inner:{transform:"".concat(c," ").concat(l," ").concat(C)},path:{transform:"translate(".concat(o/2*-1," -256)")}};return{tag:"g",attributes:d2({},V.outer),children:[{tag:"g",attributes:d2({},V.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:d2(d2({},r.icon.attributes),V.path)}]}]}}}},{hooks:function(){return{parseNodeAttributes:function(t,r){var i=r.getAttribute("data-fa-mask"),a=i?X8(i.split(" ").map(function(o){return o.trim()})):{prefix:null,iconName:null,rest:[]};return a.prefix||(a.prefix=U4()),t.mask=a,t.maskId=r.getAttribute("data-fa-mask-id"),t}}},provides:function(n){n.generateAbstractMask=function(t){var e,r=t.children,i=t.attributes,a=t.main,o=t.mask,s=t.maskId,C=a.icon,f=o.icon,V=function nt2(e){var n=e.transform,r=e.iconWidth,i={transform:"translate(".concat(e.containerWidth/2," 256)")},a="translate(".concat(32*n.x,", ").concat(32*n.y,") "),o="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),s="rotate(".concat(n.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:t.transform,containerWidth:o.width,iconWidth:a.width}),E={tag:"rect",attributes:d2(d2({},aa),{},{fill:"white"})},B=C.children?{children:C.children.map(_L)}:{},J={tag:"g",attributes:d2({},V.inner),children:[_L(d2({tag:C.tag,attributes:d2(d2({},C.attributes),V.path)},B))]},X={tag:"g",attributes:d2({},V.outer),children:[J]},s2="mask-".concat(s||b5()),W="clip-".concat(s||b5()),u2={tag:"mask",attributes:d2(d2({},aa),{},{id:s2,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[E,X]},M2={tag:"defs",children:[{tag:"clipPath",attributes:{id:W},children:(e=f,"g"===e.tag?e.children:[e])},u2]};return r.push(M2,{tag:"rect",attributes:d2({fill:"currentColor","clip-path":"url(#".concat(W,")"),mask:"url(#".concat(s2,")")},aa)}),{children:r,attributes:i}}}},{provides:function(n){var t=!1;j4.matchMedia&&(t=j4.matchMedia("(prefers-reduced-motion: reduce)").matches),n.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},a={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:d2(d2({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=d2(d2({},a),{},{attributeName:"opacity"}),s={tag:"circle",attributes:d2(d2({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||s.children.push({tag:"animate",attributes:d2(d2({},a),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:d2(d2({},o),{},{values:"1;0;1;1;0;1;"})}),r.push(s),r.push({tag:"path",attributes:d2(d2({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:d2(d2({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||r.push({tag:"path",attributes:d2(d2({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:d2(d2({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},{hooks:function(){return{parseNodeAttributes:function(t,r){var i=r.getAttribute("data-fa-symbol");return t.symbol=null!==i&&(""===i||i),t}}}}],{mixoutsTo:f3});var c82=f3.parse,l82=f3.icon;const C82=["*"],d82=e=>{const n={"fa-spin":e.spin,"fa-pulse":e.pulse,"fa-fw":e.fixedWidth,"fa-border":e.border,"fa-inverse":e.inverse,"fa-layers-counter":e.counter,"fa-flip-horizontal":"horizontal"===e.flip||"both"===e.flip,"fa-flip-vertical":"vertical"===e.flip||"both"===e.flip,[`fa-${e.size}`]:null!==e.size,[`fa-rotate-${e.rotate}`]:null!==e.rotate,[`fa-pull-${e.pull}`]:null!==e.pull,[`fa-stack-${e.stackItemSize}`]:null!=e.stackItemSize};return Object.keys(n).map(t=>n[t]?t:null).filter(t=>t)};let m82=(()=>{class e{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),g82=(()=>{class e{constructor(){this.definitions={}}addIcons(...t){for(const r of t){r.prefix in this.definitions||(this.definitions[r.prefix]={}),this.definitions[r.prefix][r.iconName]=r;for(const i of r.icon[2])"string"==typeof i&&(this.definitions[r.prefix][i]=r)}}addIconPacks(...t){for(const r of t){const i=Object.keys(r).map(a=>r[a]);this.addIcons(...i)}}getIconDefinition(t,r){return t in this.definitions&&r in this.definitions[t]?this.definitions[t][r]:null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),v82=(()=>{class e{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=z2({type:e,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[i3]}),e})(),M82=(()=>{class e{constructor(t,r){this.renderer=t,this.elementRef=r}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return e.\u0275fac=function(t){return new(t||e)(G(u4),G(U1))},e.\u0275cmp=a1({type:e,selectors:[["fa-stack"]],inputs:{size:"size"},features:[i3],ngContentSelectors:C82,decls:1,vars:0,template:function(t,r){1&t&&(z7(),It(0))},encapsulation:2}),e})(),H4=(()=>{class e{constructor(t,r,i,a,o){this.sanitizer=t,this.config=r,this.iconLibrary=i,this.stackItem=a,this.classes=[],null!=o&&null==a&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let r=null;if(r=this.icon??this.config.fallbackIcon,t){const i=this.findIconDefinition(r);if(null!=i){const a=this.buildParams();this.renderIcon(i,a)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const r=((e,n)=>(e=>void 0!==e.prefix&&void 0!==e.iconName)(e)?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"==typeof e?{prefix:n,iconName:e}:void 0)(t,this.config.defaultPrefix);return"icon"in r?r:this.iconLibrary.getIconDefinition(r.prefix,r.iconName)??((e=>{throw new Error(`Could not find icon with iconName=${e.iconName} and prefix=${e.prefix} in the icon library.`)})(r),null)}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},r="string"==typeof this.transform?c82.transform(this.transform):this.transform;return{title:this.title,transform:r,classes:[...d82(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,r){const i=l82(t,r);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(i.html.join("\n"))}}return e.\u0275fac=function(t){return new(t||e)(G(wu),G(m82),G(g82),G(v82,8),G(M82,8))},e.\u0275cmp=a1({type:e,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,r){2&t&&(w7("innerHTML",r.renderedIconHTML,vt),Y3("title",r.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[i3],decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})(),zL=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p3({type:e}),e.\u0275inj=t3({}),e})();function L82(e,n){if(1&e&&(F(0,"div",13),a2(1),R()),2&e){const t=r2().ngIf,r=r2();I(1),V3(" ",r.inventoryNotifications+t," ")}}function V82(e,n){if(1&e&&(k4(0),o2(1,L82,2,1,"div",11),A4()),2&e){const t=n.ngIf,r=r2();I(1),T("ngIf",!r.open&&r.inventoryNotifications+t>0)}}function y82(e,n){1&e&&(F(0,"div",14),g2(1,"div",15)(2,"div",16)(3,"div",17),R())}function H82(e,n){if(1&e&&(F(0,"div",13),a2(1),R()),2&e){const t=r2();I(1),D1(t.inventoryNotifications)}}function _82(e,n){if(1&e&&(F(0,"div",13),a2(1),R()),2&e){const t=r2().ngIf;I(1),D1(t)}}function z82(e,n){if(1&e&&(k4(0),o2(1,_82,2,1,"div",11),A4()),2&e){const t=n.ngIf;I(1),T("ngIf",t>0)}}function b82(e,n){1&e&&g2(0,"fa-icon",9),2&e&&T("icon",r2(2).saveIcon)}function S82(e,n){1&e&&g2(0,"fa-icon",21),2&e&&T("icon",r2(2).savingIcon)}function w82(e,n){1&e&&g2(0,"fa-icon",9),2&e&&T("icon",r2(2).savedIcon)}const x82=function(e,n){return{disable:e,success:n}};function D82(e,n){if(1&e){const t=I1();k4(0),F(1,"div",18),b2("click",function(){return C1(t),u1(r2().save())}),o2(2,b82,1,1,"fa-icon",19),o2(3,S82,1,1,"fa-icon",20),o2(4,w82,1,1,"fa-icon",19),R(),A4()}if(2&e){const t=n.ngIf,r=r2();I(1),T("ngClass",o6(4,x82,t==r.SaveStateEn.Saving,t==r.SaveStateEn.Saved)),I(1),T("ngIf",t==r.SaveStateEn.Idle),I(1),T("ngIf",t==r.SaveStateEn.Saving),I(1),T("ngIf",t==r.SaveStateEn.Saved)}}const N82=function(e){return{open:e}};var e4=(()=>{return(e=e4||(e4={}))[e._Zero=0]="_Zero",e[e.Idle=1]="Idle",e[e.Saving=2]="Saving",e[e.Saved=3]="Saved",e4;var e})(),an=(()=>{return(e=an||(an={}))[e._Zero=0]="_Zero",e[e.Hidden=1]="Hidden",e[e.Shaking=2]="Shaking",e[e.Showing=3]="Showing",an;var e})();let E82=(()=>{class e{constructor(){this.saveState$=null,this.messageNotifications$=null,this.inventoryNotifications=0,this.onShowStats=new Q2,this.onRestart=new Q2,this.onSave=new Q2,this.onUndo=new Q2,this.onShowStatsDebug=new Q2,this.onInventory=new Q2,this.onMessages=new Q2,this.menuIcon=mi,this.restartIcon=gf,this.saveIcon=hp,this.savingIcon=nv,this.savedIcon=gd,this.showStatsIcon=aM,this.undoChoiceIcon=jr,this.showDebugStatsIcon=Wr,this.inventoryIcon=zv,this.messagesIcon=gh,this.open=!1,this.notifying=!1,this.SaveStateEn=e4,this.notificationState=an.Hidden}ngOnInit(){var t=this;this.messageNotifications$?.subscribe(function(){var r=l6(function*(i){0!=i&&(t.notifying=!0,yield t.sleep(3600),t.notifying=!1)});return function(i){return r.apply(this,arguments)}}())}toggleSidebar(){this.open=!this.open}restart(){this.onRestart.emit()}save(){var t=this;return l6(function*(){t.onSave.emit()})()}showStats(){this.onShowStats.emit()}undo(){this.onUndo.emit()}showStatsDebug(){this.onShowStatsDebug.emit()}inventory(){this.onInventory.emit()}messages(){this.onMessages.emit()}sleep(t){return new Promise(r=>setTimeout(r,t))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a1({type:e,selectors:[["app-sidebar"]],inputs:{saveState$:"saveState$",messageNotifications$:"messageNotifications$",inventoryNotifications:"inventoryNotifications"},outputs:{onShowStats:"onShowStats",onRestart:"onRestart",onSave:"onSave",onUndo:"onUndo",onShowStatsDebug:"onShowStatsDebug",onInventory:"onInventory",onMessages:"onMessages"},decls:49,vars:21,consts:[["id","sidebar",3,"ngClass"],["id","toggle-button",3,"click"],[1,"fa-lg",3,"icon"],[4,"ngIf"],["class","buzz-container",4,"ngIf"],[1,"content"],[1,"heading"],[1,"button-container"],[1,"button",3,"click"],[3,"icon"],[1,"text"],["class","notification",4,"ngIf"],[1,"button","debug",3,"click"],[1,"notification"],[1,"buzz-container"],["id","buzz1",1,"buzz"],["id","buzz2",1,"buzz"],["id","buzz3",1,"buzz"],[1,"button",3,"ngClass","click"],[3,"icon",4,"ngIf"],["class","spinner",3,"icon",4,"ngIf"],[1,"spinner",3,"icon"]],template:function(t,r){1&t&&(F(0,"nav",0)(1,"div",1),b2("click",function(){return r.toggleSidebar()}),g2(2,"fa-icon",2),o2(3,V82,2,1,"ng-container",3),I4(4,"async"),o2(5,y82,4,0,"div",4),R(),F(6,"div",5)(7,"div",6),a2(8," Menu "),R(),F(9,"div",7)(10,"div",8),b2("click",function(){return r.showStats()}),g2(11,"fa-icon",9),R(),F(12,"div",10),a2(13," Your stats "),R()(),F(14,"div",7)(15,"div",8),b2("click",function(){return r.inventory()}),g2(16,"fa-icon",9),o2(17,H82,2,1,"div",11),R(),F(18,"div",10),a2(19," Inventory "),R()(),F(20,"div",7)(21,"div",8),b2("click",function(){return r.messages()}),g2(22,"fa-icon",9),o2(23,z82,2,1,"ng-container",3),I4(24,"async"),R(),F(25,"div",10),a2(26," Messages "),R()(),F(27,"div",7),o2(28,D82,5,7,"ng-container",3),I4(29,"async"),F(30,"div",10),a2(31," Save "),R()(),F(32,"div",7)(33,"div",8),b2("click",function(){return r.restart()}),g2(34,"fa-icon",9),R(),F(35,"div",10),a2(36," Restart "),R()(),F(37,"div",6),a2(38," Debug "),R(),F(39,"div",7)(40,"div",12),b2("click",function(){return r.undo()}),g2(41,"fa-icon",9),R(),F(42,"div",10),a2(43," Undo "),R()(),F(44,"div",7)(45,"div",12),b2("click",function(){return r.showStatsDebug()}),g2(46,"fa-icon",9),R(),F(47,"div",10),a2(48," Your stats "),R()()()()),2&t&&(T("ngClass",C3(19,N82,r.open)),I(2),T("icon",r.menuIcon),I(1),T("ngIf",F4(4,13,r.messageNotifications$)),I(2),T("ngIf",r.notifying),I(6),T("icon",r.showStatsIcon),I(5),T("icon",r.inventoryIcon),I(1),T("ngIf",r.inventoryNotifications>0),I(5),T("icon",r.messagesIcon),I(1),T("ngIf",F4(24,15,r.messageNotifications$)),I(5),T("ngIf",F4(29,17,r.saveState$)),I(6),T("icon",r.restartIcon),I(7),T("icon",r.undoChoiceIcon),I(5),T("icon",r.showDebugStatsIcon))},dependencies:[T3,O3,H4,Mr],styles:["#sidebar[_ngcontent-%COMP%]{position:fixed;left:-80px;top:0;width:80px;height:100vh;background-color:var(--background);box-sizing:border-box;border-right:4px solid var(--background-low-contrast);z-index:10;display:flex;justify-content:center;transition:left .1s ease-in-out;box-shadow:2px 0 2px var(--background)}#sidebar.open[_ngcontent-%COMP%]{left:0}#sidebar[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{width:25px;height:20px;background-color:var(--success);position:absolute;right:-15px;top:-5px;border-radius:10px;text-align:center;color:#000;font-size:.9em;z-index:10;transition:all 2s linear}#sidebar[_ngcontent-%COMP%]   #toggle-button[_ngcontent-%COMP%]{width:28px;height:50px;position:absolute;left:80px;top:15px;background-color:var(--background-low-contrast);z-index:11;border-bottom-right-radius:5px;border-top-right-radius:5px;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:2px 2px 2px var(--background)}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{overflow:hidden}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:.7em;font-weight:700;margin-left:4px;margin-bottom:5px;margin-top:5px;text-align:center;text-transform:uppercase}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]:not(:first-child){margin-top:15px}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;padding:0 5px}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]:not(last-child){margin-bottom:15px}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:55px;height:55px;display:flex;justify-content:center;align-items:center;background-color:var(--complementary);border-radius:5px;position:relative;cursor:pointer}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{left:-5px}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .button.debug[_ngcontent-%COMP%]{background-color:var(--main-darker)}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .button.disable[_ngcontent-%COMP%]{background-color:var(--background-low-contrast)}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .button.success[_ngcontent-%COMP%]{background-color:var(--success)}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:1.5em}#sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.7em;text-align:center}@keyframes shake{0%{transform:rotate(0);opacity:0}9%{transform:rotate(-30deg);opacity:1}18%{transform:rotate(30deg);opacity:1}27%{transform:rotate(-30deg);opacity:0}to{transform:rotate(0);opacity:0}}#sidebar[_ngcontent-%COMP%]   .buzz-container[_ngcontent-%COMP%]{position:absolute;right:5px;animation:shake 1.2s;animation-iteration-count:infinite;opacity:0}#sidebar[_ngcontent-%COMP%]   .buzz-container[_ngcontent-%COMP%]   .buzz[_ngcontent-%COMP%]{width:108px;height:20px;background-image:url(/cotm4/assets/images/ui/phone-buzz.png);position:absolute;left:0;top:0}#sidebar[_ngcontent-%COMP%]   .buzz-container[_ngcontent-%COMP%]   #buzz1[_ngcontent-%COMP%]{transform:rotate(-20deg);transform-origin:left;left:10px}#sidebar[_ngcontent-%COMP%]   .buzz-container[_ngcontent-%COMP%]   #buzz2[_ngcontent-%COMP%]{transform:rotate(40deg);transform-origin:left}#sidebar[_ngcontent-%COMP%]   .buzz-container[_ngcontent-%COMP%]   #buzz3[_ngcontent-%COMP%]{transform:rotate(90deg);transform-origin:left;top:10px}",".old[_ngcontent-%COMP%]{opacity:.5}a[_ngcontent-%COMP%]{cursor:pointer}.special[_ngcontent-%COMP%]{font-size:1.4em;color:var(--main)}.not-special[_ngcontent-%COMP%]{font-size:1em}.tip[_ngcontent-%COMP%]{font-size:.8em;color:var(--secondary-text);text-align:center}.spinner[_ngcontent-%COMP%]{font-size:2em;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),e})();var t4=(()=>{return(e=t4||(t4={}))[e.CharacterCreation=0]="CharacterCreation",e[e.Simple=1]="Simple",e[e.Debug=2]="Debug",t4;var e})();const{isArray:k82}=Array;function bL(e){return P1(n=>function A82(e,n){return k82(n)?e(...n):e(n)}(e,n))}const T82=["addListener","removeListener"],O82=["addEventListener","removeEventListener"],I82=["on","off"];function fe(e,n,t,r){if(v(t)&&(r=t,t=void 0),r)return fe(e,n,t).pipe(bL(r));const[i,a]=function B82(e){return v(e.addEventListener)&&v(e.removeEventListener)}(e)?O82.map(o=>s=>e[o](n,s,t)):function F82(e){return v(e.addListener)&&v(e.removeListener)}(e)?T82.map(SL(e,n)):function R82(e){return v(e.on)&&v(e.off)}(e)?I82.map(SL(e,n)):[];if(!i&&Vn(e))return yn(o=>fe(o,n,t))(z3(e));if(!i)throw new TypeError("Invalid event target");return new N(o=>{const s=(...c)=>o.next(1<c.length?c:c[0]);return i(s),()=>a(s)})}function SL(e,n){return t=>r=>e[t](n,r)}function wL(e){return l1((n,t)=>{let r=!1;n.subscribe(F2(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function j82(e=W82){return l1((n,t)=>{let r=!1;n.subscribe(F2(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function W82(){return new Pr}function D5(e){return l1((n,t)=>{z3(e).subscribe(F2(t,()=>t.complete(),d)),!t.closed&&n.subscribe(t)})}function $82(e,n){1&e&&g2(0,"h2",10),2&e&&T("innerHTML",r2().title.content,vt)}function q82(e,n){1&e&&Tt(0)}function K82(e,n){if(1&e&&(F(0,"h2"),o2(1,q82,1,0,"ng-container",11),R()),2&e){const t=r2();I(1),T("ngTemplateOutlet",t.title.content)("ngTemplateOutletContext",t.context)}}function Y82(e,n){if(1&e&&g2(0,"p",10),2&e){const t=r2();T4("with-title",t.title),T("innerHTML",t.body.content,vt)}}function Q82(e,n){1&e&&Tt(0)}function J82(e,n){if(1&e&&(F(0,"p"),o2(1,Q82,1,0,"ng-container",11),R()),2&e){const t=r2();T4("with-title",t.title),I(1),T("ngTemplateOutlet",t.body.content)("ngTemplateOutletContext",t.context)}}const Z82=[[["",8,"icon"]],[["",8,"btn"]]],X82=[".icon",".btn"],xL="[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:hidden}",en2=["backdrop"],tn2=["dialog"];function nn2(e,n){if(1&e&&g2(0,"div",6),2&e){const t=r2(),r=e6(3);T("dialogDragEnabled",!0)("dialogDragTarget",r)("dragConstraint",t.config.dragConstraint)}}function rn2(e,n){if(1&e){const t=I1();F(0,"div",7),b2("click",function(){return C1(t),u1(r2().closeDialog())}),w6(),F(1,"svg",8),g2(2,"path",9),R()()}}function on(e){return function in2(e){return null==e}(e)?"":function an2(e){return"string"==typeof e}(e)?e:`${e}px`}const oa=Symbol("Dialog Content Data");class _4{}class sa extends _4{constructor(n={}){super(),this.beforeCloseGuards=[],this.mutate(n)}close(n){this.canClose(n).pipe(v4(Boolean)).subscribe({next:()=>this.onClose(n)})}beforeClose(n){this.beforeCloseGuards.push(n)}resetDrag(n){this.onReset(n)}canClose(n){return zn(...this.beforeCloseGuards.map(r=>r(n)).filter(r=>void 0!==r&&!0!==r).map(r=>"boolean"==typeof r?function P82(...e){return F5(e,Qa(e))}(r):F5(r).pipe(v4(i=>!i)))).pipe(wL(!0),function U82(e,n){const t=arguments.length>=2;return r=>r.pipe(e?v4((i,a)=>e(i,a,r)):N2,V8(1),t?wL(n):j82(()=>new Pr))}())}mutate(n){Object.assign(this,n)}asDialogRef(){return this}}let de=(()=>{class e{constructor(t){this.ref=t,this.title=this.ref.data[oa].title,this.body=this.ref.data[oa].body,this.context={$implicit:this.ref,data:this.ref.data}}}return e.\u0275fac=function(t){return new(t||e)(G(_4))},e.\u0275cmp=a1({type:e,selectors:[["ngneat-dialog-base"]],ngContentSelectors:X82,decls:12,vars:6,consts:[[1,"dialog"],[1,"dialog-header"],[1,"dialog-icon"],[3,"ngSwitch"],[3,"innerHTML",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"dialog-content",3,"ngSwitch"],[3,"with-title","innerHTML",4,"ngSwitchCase"],[3,"with-title",4,"ngSwitchCase"],[1,"dialog-footer"],[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(z7(Z82),F(0,"div",0)(1,"div",1)(2,"span",2),It(3),R(),k4(4,3),o2(5,$82,1,1,"h2",4),o2(6,K82,2,2,"h2",5),A4(),R(),F(7,"div",6),o2(8,Y82,1,3,"p",7),o2(9,J82,2,4,"p",8),R(),F(10,"div",9),It(11,1),R()()),2&t&&(I(4),T("ngSwitch",null==r.title?null:r.title.type),I(1),T("ngSwitchCase","string"),I(1),T("ngSwitchCase","template"),I(1),T("ngSwitch",r.body.type),I(1),T("ngSwitchCase","string"),I(1),T("ngSwitchCase","template"))},dependencies:[h8,iu,su],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden;flex-grow:1}.dialog[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center;flex-direction:column;justify-content:flex-start;overflow:hidden}.dialog-header[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;align-items:center;width:100%;margin:0;padding:18px 40px 10px 30px}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]    {display:flex}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon{width:24px;margin-right:10px}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon-success{fill:#72c140}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon-question{fill:#f0af41}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]     .icon-error{fill:#e74c3c}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;margin:0}.dialog-content[_ngcontent-%COMP%]{width:100%;flex-grow:1;overflow:auto;position:relative;display:flex;flex-direction:column;padding:0 30px 30px}.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.75;margin:5px 0}.dialog-content[_ngcontent-%COMP%]   .with-title[_ngcontent-%COMP%]{padding-left:35px}.dialog-footer[_ngcontent-%COMP%]    {display:flex;width:100%;justify-content:flex-end;padding:17px 30px 16px;border-top:1px solid #f1f2f5}.dialog-footer[_ngcontent-%COMP%]     .btn{margin-right:10px;padding:10px 18px;border:0;border-radius:4px;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]     .btn:focus{outline:none}.dialog-footer[_ngcontent-%COMP%]     .btn:last-child{margin-right:0}.dialog-footer[_ngcontent-%COMP%]     .btn-success{background-color:#4091f7;color:#fff}.dialog-footer[_ngcontent-%COMP%]     .btn-error{background-color:#e74c3c;color:#fff}.dialog-footer[_ngcontent-%COMP%]     .btn-cancel{background-color:#fff;border:2px solid #4091f7;color:#4091f7}"],changeDetection:0}),e})(),DL=(()=>{class e extends de{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=H1(e)))(r||e)}}(),e.\u0275cmp=a1({type:e,selectors:[["ngneat-dialog-success"]],features:[$2],decls:7,vars:0,consts:[["x","0px","y","0px","viewBox","0 0 496 496",1,"icon","icon-success"],["d","M248,0C111.033,0,0,111.033,0,248s111.033,248,248,248s248-111.033,248-248C495.841,111.099,384.901,0.159,248,0z      M248,480C119.87,480,16,376.13,16,248S119.87,16,248,16s232,103.87,232,232C479.859,376.072,376.072,479.859,248,480z"],["d","M370.344,158.344L208,320.688l-82.344-82.344c-3.178-3.07-8.242-2.982-11.312,0.196c-2.994,3.1-2.994,8.015,0,11.116     l88,88c3.124,3.123,8.188,3.123,11.312,0l168-168c3.07-3.178,2.982-8.242-0.196-11.312     C378.359,155.35,373.444,155.35,370.344,158.344z"],[1,"btn","btn-success","ngneat-dialog-primary-btn",3,"click"]],template:function(t,r){1&t&&(F(0,"ngneat-dialog-base"),w6(),F(1,"svg",0)(2,"g"),g2(3,"path",1)(4,"path",2),R()(),Z5(),F(5,"button",3),b2("click",function(){return r.ref.close()}),a2(6,"OK"),R()())},dependencies:[de],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:hidden}"],changeDetection:0}),e})(),NL=(()=>{class e extends de{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=H1(e)))(r||e)}}(),e.\u0275cmp=a1({type:e,selectors:[["ngneat-dialog-confirm"]],features:[$2],decls:10,vars:0,consts:[["x","0px","y","0px","viewBox","0 0 512 512",1,"icon","icon-question"],["cx","256","cy","378.5","r","25"],["d","M256,0C114.516,0,0,114.497,0,256c0,141.484,114.497,256,256,256c141.484,0,256-114.497,256-256     C512,114.516,397.503,0,256,0z M256,472c-119.377,0-216-96.607-216-216c0-119.377,96.607-216,216-216     c119.377,0,216,96.607,216,216C472,375.377,375.393,472,256,472z"],["d","M256,128.5c-44.112,0-80,35.888-80,80c0,11.046,8.954,20,20,20s20-8.954,20-20c0-22.056,17.944-40,40-40     c22.056,0,40,17.944,40,40c0,22.056-17.944,40-40,40c-11.046,0-20,8.954-20,20v50c0,11.046,8.954,20,20,20     c11.046,0,20-8.954,20-20v-32.531c34.466-8.903,60-40.26,60-77.469C336,164.388,300.112,128.5,256,128.5z"],[1,"btn","btn-cancel","ngneat-dialog-secondary-btn",3,"click"],[1,"btn","btn-success","ngneat-dialog-primary-btn",3,"click"]],template:function(t,r){1&t&&(F(0,"ngneat-dialog-base"),w6(),F(1,"svg",0)(2,"g"),g2(3,"circle",1)(4,"path",2)(5,"path",3),R()(),Z5(),F(6,"button",4),b2("click",function(){return r.ref.close(!1)}),a2(7,"Cancel"),R(),F(8,"button",5),b2("click",function(){return r.ref.close(!0)}),a2(9,"OK"),R()())},dependencies:[de],styles:[xL],changeDetection:0}),e})(),EL=(()=>{class e extends de{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=H1(e)))(r||e)}}(),e.\u0275cmp=a1({type:e,selectors:[["ngneat-dialog-error"]],features:[$2],decls:7,vars:0,consts:[["x","0px","y","0px","viewBox","0 0 512 512",1,"icon","icon-error"],["d","M256,0C114.508,0,0,114.497,0,256c0,141.493,114.497,256,256,256c141.492,0,256-114.497,256-256    C512,114.507,397.503,0,256,0z M256,472c-119.384,0-216-96.607-216-216c0-119.385,96.607-216,216-216    c119.384,0,216,96.607,216,216C472,375.385,375.393,472,256,472z"],["d","M343.586,315.302L284.284,256l59.302-59.302c7.81-7.81,7.811-20.473,0.001-28.284c-7.812-7.811-20.475-7.81-28.284,0    L256,227.716l-59.303-59.302c-7.809-7.811-20.474-7.811-28.284,0c-7.81,7.811-7.81,20.474,0.001,28.284L227.716,256    l-59.302,59.302c-7.811,7.811-7.812,20.474-0.001,28.284c7.813,7.812,20.476,7.809,28.284,0L256,284.284l59.303,59.302    c7.808,7.81,20.473,7.811,28.284,0C351.398,335.775,351.397,323.112,343.586,315.302z"],[1,"btn","btn-error","ngneat-dialog-primary-btn",3,"click"]],template:function(t,r){1&t&&(F(0,"ngneat-dialog-base"),w6(),F(1,"svg",0)(2,"g"),g2(3,"path",1)(4,"path",2),R()(),Z5(),F(5,"button",3),b2("click",function(){return r.ref.close()}),a2(6,"OK"),R()())},dependencies:[de],styles:[xL],changeDetection:0}),e})();const PL=new x2("A reference to the document. Useful for iframes that want appends to parent window",{providedIn:"root",factory:()=>u0(u3)}),kL=new x2("Global dialog config token"),sn=new x2("Dialog config token",{providedIn:"root",factory:()=>({id:void 0,container:u0(PL).body,backdrop:!0,closeButton:!0,enableClose:!0,draggable:!1,dragConstraint:"none",resizable:!1,size:"md",windowClass:void 0,width:void 0,height:void 0,minHeight:void 0,maxHeight:void 0,data:void 0,vcr:void 0,sizes:{sm:{minHeight:"200px",width:"400px"},md:{minHeight:"280px",width:"560px"},lg:{minHeight:"350px",width:"800px"},fullScreen:{height:"100%",width:"100%"}},success:{component:DL},confirm:{component:NL},error:{component:EL},onClose:void 0,onOpen:void 0})}),AL=new x2("Nodes inserted into the dialog");let TL=(()=>{class e{constructor(t,r,i){this.host=t,this.zone=r,this.renderer=i,this.dialogDragEnabled=!1,this.delta={x:0,y:0},this.offset={x:0,y:0},this.enabled=!0,this.destroy$=new I2}set dialogDragOffset(t){this.reset(t)}ngAfterViewInit(){!this.enabled||this.init()}ngOnChanges(){!this.enabled&&this.dialogDragEnabled&&this.dialogDragTarget&&(this.enabled=!0,this.handle?this.renderer.setStyle(this.handle,"cursor","move"):this.enabled&&this.init()),this.dialogDragEnabled||(this.enabled=!1,this.handle&&this.renderer.setStyle(this.handle,"cursor",""))}ngOnDestroy(){this.destroy$.next()}reset(t){const r={x:0,y:0};this.offset={...r,...t},this.delta={...r},this.translate()}setupEvents(){this.zone.runOutsideAngular(()=>{const t=fe(this.handle,"mousedown"),r=fe(document,"mousemove"),i=fe(document,"mouseup");t.pipe(v4(()=>this.enabled),P1(o=>({startX:o.clientX,startY:o.clientY})),function G82(e,n){return l1((t,r)=>{let i=null,a=0,o=!1;const s=()=>o&&!i&&r.complete();t.subscribe(F2(r,c=>{i?.unsubscribe();let l=0;const C=a++;z3(e(c,C)).subscribe(i=F2(r,u=>r.next(n?n(c,u,C,l++):u),()=>{i=null,s()}))},()=>{o=!0,s()}))})}(({startX:o,startY:s})=>r.pipe(P1(c=>{c.preventDefault(),this.delta={x:c.clientX-o,y:c.clientY-s},"constrain"===this.dragConstraint&&this.checkConstraint()}),D5(i))),D5(this.destroy$)).subscribe(()=>{0===this.delta.x&&0===this.delta.y||this.translate()}),i.pipe(v4(()=>this.enabled),v4(()=>0!==this.delta.x||0!==this.delta.y),D5(this.destroy$)).subscribe(()=>{"bounce"===this.dragConstraint&&(this.checkConstraint(),this.translate()),this.offset.x+=this.delta.x,this.offset.y+=this.delta.y,this.delta={x:0,y:0}})})}translate(){this.target&&this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.renderer.setStyle(this.target,"transform",`translate(${this.translateX}px, ${this.translateY}px)`)})})}get translateX(){return this.offset.x+this.delta.x}get translateY(){return this.offset.y+this.delta.y}init(){if(!this.dialogDragTarget)throw new Error("You need to specify the drag target");this.handle=this.dialogDragHandle instanceof Element?this.dialogDragHandle:"string"==typeof this.dialogDragHandle&&this.dialogDragHandle?document.querySelector(this.dialogDragHandle):this.host.nativeElement,this.handle&&this.enabled&&this.renderer.setStyle(this.handle,"cursor","move"),this.target=this.dialogDragTarget instanceof HTMLElement?this.dialogDragTarget:document.querySelector(this.dialogDragTarget),this.setupEvents(),this.translate()}checkConstraint(){const{width:r,height:i}=this.target.getBoundingClientRect(),{innerWidth:o,innerHeight:s}=window,c=this.translateY>0?this.translateY+i/2:this.translateY-i/2,l=s/2,C=this.translateX>0?this.translateX+r/2:this.translateX-r/2,u=o/2;-l>c&&(this.delta.y=i/2-l-this.offset.y),l<c&&(this.delta.y=l-i/2-this.offset.y),-u>C&&(this.delta.x=r/2-u-this.offset.x),u<C&&(this.delta.x=u-r/2-this.offset.x)}}return e.\u0275fac=function(t){return new(t||e)(G(U1),G(N1),G(u4))},e.\u0275dir=z2({type:e,selectors:[["","dialogDraggable",""]],inputs:{dialogDragHandle:"dialogDragHandle",dialogDragTarget:"dialogDragTarget",dialogDragEnabled:"dialogDragEnabled",dialogDragOffset:"dialogDragOffset",dragConstraint:"dragConstraint"},features:[i3]}),e})(),on2=(()=>{class e{constructor(t,{nativeElement:r},i,a,o){this.document=t,this.dialogRef=i,this.config=a,this.nodes=o,this.size=this.config.sizes?.[this.config.size||"md"],this.styles={width:on(this.config.width||this.size?.width),height:on(this.config.height||this.size?.height),minHeight:on(this.config.minHeight||this.size?.minHeight),maxHeight:on(this.config.maxHeight||this.size?.maxHeight)},this.destroy$=new I2,r.id=this.config.id,this.nodes.forEach(s=>r.appendChild(s)),a.windowClass&&a.windowClass.split(/\s/).filter(c=>c).forEach(c=>r.classList.add(c))}ngOnInit(){const r=this.dialogElement.nativeElement,i=fe(this.config.backdrop?this.backdrop.nativeElement:this.document.body,"click",{capture:!0}).pipe(v4(({target:a})=>!r.contains(a)));i.pipe(D5(this.destroy$)).subscribe(this.dialogRef.backdropClick$),this.config.enableClose&&zn(fe(this.document.body,"keyup").pipe(v4(({key:a})=>"Escape"===a)),i).pipe(D5(this.destroy$)).subscribe(()=>this.closeDialog()),this.nodes.forEach(a=>r.appendChild(a))}reset(t){this.config.draggable&&this.draggable.reset(t)}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef=null,this.nodes=null}}return e.\u0275fac=function(t){return new(t||e)(G(u3),G(U1),G(sa),G(sn),G(AL))},e.\u0275cmp=a1({type:e,selectors:[["ngneat-dialog"]],viewQuery:function(t,r){if(1&t&&(qt(en2,7),qt(tn2,7),qt(TL,5)),2&t){let i;$t(i=Kt())&&(r.backdrop=i.first),$t(i=Kt())&&(r.dialogElement=i.first),$t(i=Kt())&&(r.draggable=i.first)}},decls:6,vars:8,consts:[[1,"ngneat-dialog-backdrop",3,"hidden"],["backdrop",""],[1,"ngneat-dialog-content",3,"ngStyle"],["dialog",""],["class","ngneat-drag-marker","dialogDraggable","",3,"dialogDragEnabled","dialogDragTarget","dragConstraint",4,"ngIf"],["class","ngneat-close-dialog",3,"click",4,"ngIf"],["dialogDraggable","",1,"ngneat-drag-marker",3,"dialogDragEnabled","dialogDragTarget","dragConstraint"],[1,"ngneat-close-dialog",3,"click"],["viewBox","0 0 329.26933 329","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor","d","m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"]],template:function(t,r){1&t&&(F(0,"div",0,1)(2,"div",2,3),o2(4,nn2,1,3,"div",4),o2(5,rn2,3,0,"div",5),R()()),2&t&&(T4("ngneat-dialog-backdrop-visible",r.config.backdrop),T("hidden",!r.config.backdrop),I(2),T4("ngneat-dialog-resizable",r.config.resizable),T("ngStyle",r.styles),I(2),T("ngIf",r.config.draggable),I(1),T("ngIf",r.config.closeButton))},dependencies:[ou,O3,TL],styles:[".ngneat-dialog-content{display:flex;flex-direction:column;overflow:hidden;position:relative;-webkit-animation:dialog-open .4s cubic-bezier(.25,.8,.25,1);animation:dialog-open .4s cubic-bezier(.25,.8,.25,1);border-radius:4px;box-sizing:border-box;box-shadow:0 11px 15px -7px #0003,0 24px 38px 3px #00000024,0 9px 46px 8px #0000001f;background:#fff;color:#000000de;width:auto;max-width:100%;height:auto;max-height:100%}@-webkit-keyframes dialog-open{0%{transform:translate(50px)}to{transform:none}}@keyframes dialog-open{0%{transform:translate(50px)}to{transform:none}}.ngneat-dialog-content.ngneat-dialog-resizable{resize:both}.ngneat-dialog-backdrop{position:fixed;display:flex;align-items:center;justify-content:center;top:0;left:0;bottom:0;right:0;height:100%;width:100%;padding:30px;z-index:1050;background:rgba(0,0,0,.32);-webkit-animation:dialog-open-backdrop .3s;animation:dialog-open-backdrop .3s}@-webkit-keyframes dialog-open-backdrop{0%{opacity:0}to{opacity:1}}@keyframes dialog-open-backdrop{0%{opacity:0}to{opacity:1}}.ngneat-drag-marker{position:absolute;left:0;top:0;cursor:move;width:100%;height:10px;z-index:1051}.ngneat-close-dialog{display:flex;align-items:center;justify-content:center;position:absolute;top:10px;cursor:pointer;right:10px;width:24px;height:24px;color:#5f6368;transition:color .2s ease-in-out;z-index:1051}.ngneat-close-dialog svg{width:12px;height:12px}.ngneat-close-dialog:hover{color:#5d9ff1}body.ngneat-dialog-hidden{overflow:hidden}\n"],encapsulation:2}),e})();const OL="ngneat-dialog-hidden";let ca=(()=>{class e{constructor(t,r,i,a,o,s){this.appRef=t,this.componentFactoryResolver=r,this.injector=i,this.document=a,this.defaultConfig=o,this.globalConfig=s,this.dialogs=[],this.dialogFactory=this.componentFactoryResolver.resolveComponentFactory(on2)}closeAll(){this.dialogs.forEach(t=>t.close())}success(t,r={}){const i=this.mergeConfigWithContent(this.applyDefaultSize(r),t);return this.open(i.success.component,i)}confirm(t,r={}){const i=this.mergeConfigWithContent(this.applyDefaultSize(r),t);return this.open(i.confirm.component,i)}error(t,r={}){const i=this.mergeConfigWithContent(this.applyDefaultSize(r),t);return this.open(i.error.component,i)}open(t,r={}){const i=this.mergeConfig(r);i.onOpen?.();const a=new sa({id:i.id,data:i.data,backdropClick$:new I2}),o={config:i,dialogRef:a};return this.throwIfIDAlreadyExists(i.id),this.dialogs.push(a),1===this.dialogs.length&&this.document.body.classList.add(OL),t instanceof y3?this.openTemplate(t,o):"function"==typeof t?this.openComponent(t,o):this.throwMustBeAComponentOrATemplateRef(t)}openTemplate(t,{config:r,dialogRef:i}){const a={$implicit:i,config:r},o=r.vcr?.createEmbeddedView(t,a)||t.createEmbeddedView(a);return this.attach({dialogRef:i,config:r,ref:t,view:o,attachToApp:!r.vcr})}openComponent(t,{config:r,dialogRef:i}){const o=this.componentFactoryResolver.resolveComponentFactory(t).create(M3.create({providers:[{provide:_4,useValue:i},{provide:sn,useValue:r}],parent:r.vcr?.injector||this.injector}));return this.attach({dialogRef:i,config:r,ref:o,view:o.hostView,attachToApp:!0})}attach({dialogRef:t,config:r,ref:i,view:a,attachToApp:o}){const s=this.createDialog(r,t,a),c=r.container instanceof U1?r.container.nativeElement:r.container,l={after:new I2};return t.mutate({id:r.id,data:r.data,ref:i,onClose:f=>{this.globalConfig.onClose?.(),this.dialogs=this.dialogs.filter(({id:V})=>t.id!==V),c.removeChild(s.location.nativeElement),this.appRef.detachView(s.hostView),this.appRef.detachView(a),s.destroy(),a.destroy(),t.backdropClick$.complete(),t.mutate({ref:null,onClose:null,afterClosed$:null,backdropClick$:null,beforeCloseGuards:null,onReset:null}),l.after.next(f),l.after.complete(),0===this.dialogs.length&&this.document.body.classList.remove(OL)},afterClosed$:l.after.asObservable(),onReset:f=>{s.instance.reset(f)}}),c.appendChild(s.location.nativeElement),this.appRef.attachView(s.hostView),o&&this.appRef.attachView(a),t.asDialogRef()}createDialog(t,r,i){return this.dialogFactory.create(M3.create({providers:[{provide:sa,useValue:r},{provide:sn,useValue:t},{provide:AL,useValue:i.rootNodes}],parent:this.injector}))}mergeConfig(t){return{...this.defaultConfig,id:`dialog-${Math.random().toString(36).substring(7)}`,...this.globalConfig,...this.cleanConfig(t),sizes:{...this.defaultConfig.sizes,...this.globalConfig?.sizes,...t?.sizes}}}mergeConfigWithContent(t,r){const{data:i,...a}=this.mergeConfig(t);return{...a,data:{...i,[oa]:this.isTemplateOrString(r)?{title:null,body:{type:this.getTypeOfContent(r),content:r}}:Object.entries(r).reduce((o,[s,c])=>(o[s]={type:this.getTypeOfContent(c),content:c},o),{})}}}cleanConfig(t){return Object.entries(t).reduce((r,[i,a])=>(null!=a&&(r[i]=a),r),{})}isTemplateOrString(t){return t instanceof y3||"string"==typeof t}getTypeOfContent(t){return t instanceof y3?"template":"string"}throwMustBeAComponentOrATemplateRef(t){throw new TypeError(`Dialog must receive a Component or a TemplateRef, but this has been passed instead: ${t}`)}throwIfIDAlreadyExists(t){if(this.dialogs.find(r=>r.id===t))throw new Error(`Please, ID must be unique, but there is already a dialog created with this ID: ${t}`)}applyDefaultSize(t){return{...t,size:t.size||"sm"}}}return e.\u0275fac=function(t){return new(t||e)(P2(Xt),P2(U6),P2(M3),P2(PL),P2(sn),P2(kL))},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),cn2=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[{provide:kL,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p3({type:e}),e.\u0275inj=t3({imports:[[p8]]}),e})(),la=(()=>{class e{constructor(t){this.ref=t}get title(){return this.ref.data.title}get body(){return this.ref.data.body}accept(){this.ref.close(),this.ref.data.accept&&this.ref.data.accept()}deny(){this.ref.close(),this.ref.data.deny&&this.ref.data.deny()}}return e.\u0275fac=function(t){return new(t||e)(G(_4))},e.\u0275cmp=a1({type:e,selectors:[["ng-component"]],decls:10,vars:2,consts:[[1,"confirmation-popup"],["id","title"],["id","body"],["id","controls"],[1,"button","deny",3,"click"],[1,"button","accept",3,"click"]],template:function(t,r){1&t&&(F(0,"div",0)(1,"p",1),a2(2),R(),F(3,"p",2),a2(4),R(),F(5,"div",3)(6,"a",4),b2("click",function(){return r.deny()}),a2(7,"No"),R(),F(8,"a",5),b2("click",function(){return r.accept()}),a2(9,"Yes"),R()()()),2&t&&(I(2),D1(r.title),I(2),D1(r.body))},styles:[".confirmation-popup[_ngcontent-%COMP%]{padding:20px}.confirmation-popup[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{color:var(--main);font-size:1.4em}.confirmation-popup[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]{width:100%;text-align:right}.confirmation-popup[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:100px;height:30px;background-color:gray;display:inline-flex;justify-content:center;align-items:center;margin:10px;cursor:pointer;color:#fff;border-radius:5px;position:relative}.confirmation-popup[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .button.accept[_ngcontent-%COMP%]{border-bottom:6px solid var(--success)}.confirmation-popup[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .button.deny[_ngcontent-%COMP%]{border-bottom:6px solid var(--failure)}"],changeDetection:0}),e})();var ln2=z(441);function Cn2(e,n){if(1&e&&(F(0,"p"),a2(1),R()),2&e){const t=n.$implicit;I(1),V3(" ",t," ")}}const N5=function(e){return{selected:e}};let un2=(()=>{class e{constructor(t){this.ref=t}get title(){return this.ref.data.title}get paragraphs(){return this.ref.data.paragraphs}get statValue(){return this.ref.data.statValue?this.ref.data.statValue:-1}}return e.\u0275fac=function(t){return new(t||e)(G(_4))},e.\u0275cmp=a1({type:e,selectors:[["ng-component"]],decls:19,vars:17,consts:[["id","stat-info"],[1,"explanation"],[3,"ngClass"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(F(0,"div",0)(1,"h1"),a2(2),R(),F(3,"p",1)(4,"span",2),a2(5,"1 - Ignorant"),R(),a2(6," | "),F(7,"span",2),a2(8,"2 - Unfamiliar"),R(),a2(9," | "),F(10,"span",2),a2(11,"3 - Novice"),R(),a2(12," | "),F(13,"span",2),a2(14,"4 - Beginner"),R(),a2(15," | "),F(16,"span",2),a2(17,"5 - Average"),R()(),o2(18,Cn2,2,1,"p",3),R()),2&t&&(I(2),D1(r.title),I(2),T("ngClass",C3(7,N5,1==r.statValue)),I(3),T("ngClass",C3(9,N5,2==r.statValue)),I(3),T("ngClass",C3(11,N5,3==r.statValue)),I(3),T("ngClass",C3(13,N5,4==r.statValue)),I(3),T("ngClass",C3(15,N5,5==r.statValue)),I(2),T("ngForOf",r.paragraphs))},dependencies:[T3,ce],styles:['#stat-info[_ngcontent-%COMP%]{padding:20px}#stat-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:var(--main)}#stat-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:after{content:"Major Arcana";font-size:.5em;font-weight:lighter;color:var(--secondary-text);display:block;margin-top:-10px}#stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em}#stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){margin-bottom:0}#stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3):before{content:"Upright: ";font-weight:700}#stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(4){margin-top:0}#stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(4):before{content:"Reversed: ";font-weight:700}#stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(5):before{font-weight:700}#stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(6){font-size:1em}#stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(7){font-size:1em}#stat-info[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]{font-size:1em;color:var(--secondary-text)}#stat-info[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:var(--analog1);font-weight:700}'],changeDetection:0}),e})();const IL=function(e){return{disabled:e}};let fn2=(()=>{class e{constructor(){this.value=0,this.increaseIcon=Uu,this.decreaseIcon=Wu,this.initial=0,this.min=0,this.max=null,this.disableIncrease=!1,this.disableDecrease=!1,this._disableIncrease=!1,this._disableDecrease=!0,this.onchange=new Q2}ngOnInit(){this.value=Math.max(this.initial,this.min),this.disableOrEnable()}isDisabledIncrease(){return 1==this._disableIncrease||1==this.disableIncrease}isDisabledDecrease(){return 1==this._disableDecrease||1==this.disableDecrease}disableOrEnable(){this.max&&(this._disableIncrease=this.value>=this.max),this._disableDecrease=this.value<=this.min}increase(){this.isDisabledIncrease()||(this.value=this.max?Math.min(this.max,this.value+1):this.value+1,this.onchange.emit(this.value),this.disableOrEnable())}decrease(){this.isDisabledDecrease()||(this.value=Math.max(this.min,this.value-1),this.onchange.emit(this.value),this.disableOrEnable())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a1({type:e,selectors:[["app-stat-control"]],inputs:{initial:"initial",min:"min",max:"max",disableIncrease:"disableIncrease",disableDecrease:"disableDecrease"},outputs:{onchange:"onchange"},decls:7,vars:9,consts:[["id","control"],[1,"arrow","arrow-down",3,"ngClass","click"],[1,"fa-lg",3,"icon"],[1,"value"],[1,"arrow","arrow-up",3,"ngClass","click"]],template:function(t,r){1&t&&(F(0,"div",0)(1,"div",1),b2("click",function(){return r.decrease()}),g2(2,"fa-icon",2),R(),F(3,"div",3),a2(4),R(),F(5,"div",4),b2("click",function(){return r.increase()}),g2(6,"fa-icon",2),R()()),2&t&&(I(1),T("ngClass",C3(5,IL,r.isDisabledDecrease())),I(1),T("icon",r.decreaseIcon),I(2),D1(r.value),I(1),T("ngClass",C3(7,IL,r.isDisabledIncrease())),I(1),T("icon",r.increaseIcon))},dependencies:[T3,H4],styles:["#control[_ngcontent-%COMP%]{font-size:28px;display:flex;flex-direction:column;justify-items:center;align-content:center}#control[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{width:30px;height:38px;display:flex;justify-content:center;align-items:center;cursor:pointer;transition:opacity .2s}#control[_ngcontent-%COMP%]   .arrow.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:initial}#control[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-weight:700}"]}),e})();function dn2(e,n){1&e&&(F(0,"div",9),a2(1," Choose your starting "),F(2,"span",10),a2(3,"Stats"),R()())}function hn2(e,n){1&e&&(F(0,"div",9)(1,"span",10),a2(2,"Stats"),R()())}function pn2(e,n){if(1&e&&(F(0,"div",11),a2(1," Remaining points:\xa0"),F(2,"span",10),a2(3),R()()),2&e){const t=r2();I(3),D1(t.remainingStats)}}function mn2(e,n){if(1&e&&(F(0,"div",11),a2(1," Remaining points:\xa0"),F(2,"span",10),g2(3,"fa-icon",12),R()()),2&e){const t=r2();I(3),T("icon",t.infinityIcon)}}function gn2(e,n){if(1&e){const t=I1();F(0,"div")(1,"app-stat-control",13),b2("onchange",function(i){const o=C1(t).$implicit;return u1(r2().onStatChange(i,o))}),R()(),F(2,"div",14),b2("click",function(){const a=C1(t).$implicit;return u1(r2().clickStatBox(a))}),g2(3,"div",15)(4,"div",16)(5,"div",17)(6,"div",18),R(),F(7,"div"),a2(8),R()}if(2&e){const t=n.$implicit,r=r2();O4("",t.className," stat-control"),I(1),T("initial",r.getInitial(t))("min",r.minStats)("max",r.maxStats)("disableIncrease",r.disableIncrease||!r.recent)("disableDecrease",r.disableDecrease||!r.recent),I(1),O4("",t.className," stat-card"),I(5),O4("",t.className," stat-name"),I(1),V3(" ",t.name," ")}}const vn2=function(e,n,t){return{old:e,recent:n,centralized:t}},Mn2=function(e){return{"with-margin":e}},FL=[{name:"THE CHARIOT",className:"strenght",variable:"player_strenght",description:["Strength, Action, Forcefulness.","Reaction Without Thought, Lack of Control.","The Chariot requires that you always propel yourself forward, preferably using your fists to lead the way.","This card represents everything physical about you, everything that screams action, movement and life. The Chariot helps when you need the strength to break a door, or break a face. Channel this card frequently and you will find your body reflecting your strength. You will be granted a healthy and flexible body, ready for anything.","But be sure to not be trampled by The Chariot. It will move you forward whether you want it or not."]},{name:"THE EMPEROR",className:"control",variable:"player_control",description:["Control, Authority, Structure.","Rigidity, Tyranny, Immaturity.","The Emperor demands your unconditional surrender.\xa0","If you are ever in a difficult situation, channel this card's power and you will find yourself clearheaded and in control. The Emperor helps you keep your composure when it matters the most, be it by keeping your cool when watching a horror movie, or keeping your cool when a weapon is pointed at you.","But be sure to not blur the lines too much, The Emperor seeks control in all things and reality does not align with a desire so absolute."]},{name:"THE FOOL",className:"sleight",variable:"player_sleight",description:["Luck, Innocence, Playfulness.","Recklessness, Inconsideration, Cleverly Stupid.","In a reading, The Fool foretells adventure, travels, and new beginnings. In reality, this card is nothing but a bumbling fool.","Have you ever seen a plan so dumb that it can't possibly work? Channel this card and it just might. The Fool will help you stumble upon the perfect set of coincidences to allow you to get away with pretty much anything: you can steal from under their noses, you can open locks, you can find secrets, and you can also dance pretty well.","But be careful that the role of The Fool doesn't become a comfortable one, as you might find yourself incapable of living anywhere but at the moment."]},{name:"THE MOON",className:"perception",variable:"player_perception",description:["Perception, Sight, Subtlety.","Confusion, Misinterpretation, Paralysis.","As the light of The Moon shiny upon us once again, let it guide us towards transcendence.","The pull of The Moon may be gentle, but it is also eternal and all encompassing. This card's power is equally gentle, the Moon works with what's already there. It helps you see farther, increases your sense of smell and lets you identify any substance from taste. It helps you notice those small things that someone else might have missed, maybe those marks on the floor lead to a secret door, maybe that book being slightly off points to a hidden compartment.","The Moon doesn't ask for much, but there is such a thing as being too generous. Channel this power excessively and you may find yourself with the senses flooded, unable to decide what matters and what doesn't."]},{name:"THE HIGH PRIESTESS",className:"intuition",variable:"player_intuition",description:["Intuition, Subconsciousness, Creativity.","Repressed feelings, Secrecy, Paranoia.","The veil between the conscious and the unconscious is so very thin. Reach through and find enlightenment.","The High Priestess sits on her throne, on the edge between the seen and the unseen. Don't be afraid, you can hear their call now, can't you? The Seen, and The Unseen, they will nudge you, touch you, hold you, guide you... Careful... you are letting them get too close.","They are looking at you now. Don't look back."]},{name:"THE HERMIT",className:"knowledge",variable:"player_knowledge",description:["Guidance, Deliberation, Veracity.","Isolation, Obsession, Detachment.","Knowledge, truth, and sacrifice. The Hermit seeks, and The Hermit finds.","Pay the price and this card can help you remember that obscure mundane fact that just so happens to be relevant for the situation at hand. The Hermit will also help you remember things that are not so relevant to the situation at hand, but eh. Win some, lose some.","Of course The Hermit is a hoarder, be sure there's enough space or you may find yourself bloated and lethargic. Knowledge is an endless pursuit after all."]},{name:"THE MAGICIAN",className:"confidence",variable:"player_confidence",description:["Confidence, Desire, Willpower.","Trickery, Overconfidence, Unrepentancy.","Come my darling, The Magician will take good care of you.","A charmer, this one. The Magician will give you the confidence and the nonchalance of someone who has been doing it for years and years. You can talk in public like a professional and you can convince anyone that you belong wherever you want to belong. You can also understand the pecking order of any situation, and most importantly: how to climb it.","The downside, of course, is that The Magician is proud, unable to admit when wrong, and unable to let go of a mistaken choice.",'And remember: "Fake it till you make it" only works if you do make it.']},{name:"THE DEVIL",className:"manipulation",variable:"player_manipulation",description:["Manipulation, Addiction, Materialism.","Release, Freedom, Restoration of Control.","The Devil doesn't ask anything of you, but you will give it anyway.","Channeling this card can be a daunting task, but the feeling is... euphoric. The Devil will help you pull at the threads that move people, it will help you convince someone to do your bidding all the while thinking it's their idea. Likewise, The Devil will warn of anyone doing the same to you.","Remember: to convince someone is to understand them fully, but do not mistake that for empathy. It's a cold emptiness instead. Treat people as marionettes and they will become just that."]},{name:"THE STAR",className:"charisma",variable:"player_charisma",description:["Rejuvenation, Hope, Happiness.","Insecurity, Dramatics, Lack of Faith.","Raise and clap for The Star. Clap until your hands turn to flame. Until your arms are glowing and giving off embers. Until your chest is melting.","The pull of The Star is undeniable. It warps, it burns and it fills you with light. The Star can help you appear friendly, approachable, and desirable, if you wish it so. Channel this card and you will be able to read people like open books. Weaponize empathy. Make everyone love you. The Star will shine its light unto all that's hidden, helping you detect when others are lying or being deceitful.","But all stars burnout eventually, and the brightest ones can become the most destructive of black holes."]}];let RL=(()=>{class e{constructor(t,r){this.dialog=t,this.storyService=r,this.recent=!1,this.maxStats=10,this.minStats=0,this.totalToDistribute=null,this.disableDecrease=!1,this.informationMode=t4.Simple,this.remainingStats=null,this.totalInitialStats=0,this.statValues={},this.disableIncrease=!1,this.CharacterCreation=t4.CharacterCreation,this.Simple=t4.Simple,this.Debug=t4.Debug,this.infinityIcon=nm,this.initialStats={},this.stats=FL}ngOnInit(){this.remainingStats=this.totalToDistribute,this.disableIncrease=0==this.remainingStats;for(let t of this.stats)this.initialStats[t.name]=this.getInitial(t)}clickStatBox(t){this.dialog.open(un2,{data:{title:t.name,paragraphs:t.description,statValue:this.storyService.get(t.variable)}})}checkTotal(){let t=0;for(let r in this.statValues)t+=this.statValues[r]-this.initialStats[r];null!=this.totalToDistribute&&(this.remainingStats=this.totalInitialStats+this.totalToDistribute-t),this.disableIncrease=0==this.remainingStats}onStatChange(t,r){this.statValues[r.name]=t;let i=r.variable.replace("_","_set_");this.storyService.call(`${i}`,[t]),this.checkTotal()}getInitial(t){return this.storyService.get(t.variable)}}return e.\u0275fac=function(t){return new(t||e)(G(ca),G(n4))},e.\u0275cmp=a1({type:e,selectors:[["app-stats-menu"]],inputs:{recent:"recent",maxStats:"maxStats",minStats:"minStats",totalToDistribute:"totalToDistribute",disableDecrease:"disableDecrease",informationMode:"informationMode"},decls:12,vars:13,consts:[["id","stats-menu",3,"ngClass"],[1,"content"],[1,"choose"],["class","title",4,"ngIf"],[1,"tip",3,"ngClass"],["class","remaining",4,"ngIf"],[1,"stat-grid"],["ngFor","",3,"ngForOf"],["id","old-anchor",1,"old"],[1,"title"],[1,"special"],[1,"remaining"],[1,"fa-lg",3,"icon"],[3,"initial","min","max","disableIncrease","disableDecrease","onchange"],[3,"click"],[1,"circle","top-left"],[1,"circle","top-right"],[1,"circle","bottom-left"],[1,"circle","bottom-right"]],template:function(t,r){1&t&&(F(0,"div",0)(1,"div",1)(2,"div",2),o2(3,dn2,4,0,"div",3),o2(4,hn2,3,0,"div",3),F(5,"div",4),a2(6," Click on the cards to read their descriptions "),R(),o2(7,pn2,4,1,"div",5),o2(8,mn2,4,1,"div",5),R(),F(9,"div",6),o2(10,gn2,9,15,"ng-template",7),R()(),g2(11,"div",8),R()),2&t&&(T("ngClass",Tl(7,vn2,!r.recent,r.recent,r.informationMode==r.CharacterCreation)),I(3),T("ngIf",r.informationMode==r.CharacterCreation),I(1),T("ngIf",r.informationMode==r.Simple||r.informationMode==r.Debug),I(1),T("ngClass",C3(11,Mn2,null==r.remainingStats)),I(2),T("ngIf",null!=r.remainingStats&&r.informationMode!=r.Debug),I(1),T("ngIf",r.informationMode==r.Debug),I(2),T("ngForOf",r.stats))},dependencies:[T3,ce,O3,H4,fn2],styles:["#stats-menu[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-around;height:calc(100vh - 80px);min-height:590px}#stats-menu[_ngcontent-%COMP%]   .choose[_ngcontent-%COMP%]{font-size:1.2em;text-align:left;width:100%}#stats-menu[_ngcontent-%COMP%]   .choose[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700}#stats-menu[_ngcontent-%COMP%]   .choose[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]{text-align:left}#stats-menu[_ngcontent-%COMP%]   .choose[_ngcontent-%COMP%]   .remaining[_ngcontent-%COMP%]{font-size:.8em;display:block;min-height:30px;display:flex;justify-content:center;align-items:center}#stats-menu[_ngcontent-%COMP%]   .choose[_ngcontent-%COMP%]   .remaining[_ngcontent-%COMP%]   .special[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em}#stats-menu.centralized[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .choose[_ngcontent-%COMP%]{text-align:center}#stats-menu.centralized[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .choose[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-transform:unset;font-weight:400}#stats-menu.centralized[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .choose[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]{text-align:center}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:.2fr .8fr .2fr .8fr .2fr .8fr;grid-template-rows:.8fr .2fr .8fr .2fr .8fr .2fr;grid-column-gap:0px;grid-row-gap:0px;height:80%;justify-content:center}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-name[_ngcontent-%COMP%]{font-size:.8em;font-weight:700;text-align:center;margin-bottom:10px}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{overflow:hidden;min-width:28%;font-size:.6em;background-size:cover;background-position:50% 50%;border:1px solid black;box-sizing:border-box;display:flex;align-items:flex-end;border-radius:5px;cursor:pointer;transition:transform .2s cubic-bezier(.68,-.55,.265,1.55);border:2px solid white;position:relative;box-shadow:inset 0 0 2px #000,inset 0 0 2px #000,inset 0 0 2px #000}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:scale(1.08)}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:15px;height:15px;border-color:#fff;border-width:2px}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .circle.top-left[_ngcontent-%COMP%]{border-right-style:solid;border-bottom-style:solid;border-bottom-right-radius:20px;position:absolute;left:0;top:0}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .circle.top-right[_ngcontent-%COMP%]{border-left-style:solid;border-bottom-style:solid;border-bottom-left-radius:20px;position:absolute;right:0;top:0}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .circle.bottom-left[_ngcontent-%COMP%]{border-right-style:solid;border-top-style:solid;border-top-right-radius:20px;position:absolute;left:0;bottom:0}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .circle.bottom-right[_ngcontent-%COMP%]{border-left-style:solid;border-top-style:solid;border-top-left-radius:20px;position:absolute;right:0;bottom:0}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.strenght[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/strenght2.png)}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.control[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/control2.png)}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.sleight[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/sleight2.png)}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.perception[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/perception2.png)}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.intuition[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/intuition2.png)}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.knowledge[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/knowledge2.png)}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.confidence[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/confidence2.png)}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.manipulation[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/manipulation2.png)}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.charisma[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/charisma2.png)}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-control.strenght[_ngcontent-%COMP%]{grid-area:1/1/2/2}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.strenght[_ngcontent-%COMP%]{grid-area:1/2/2/3}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-control.control[_ngcontent-%COMP%]{grid-area:1/3/2/4}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.control[_ngcontent-%COMP%]{grid-area:1/4/2/5}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-control.sleight[_ngcontent-%COMP%]{grid-area:1/5/2/6}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.sleight[_ngcontent-%COMP%]{grid-area:1/6/2/7}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-name.strenght[_ngcontent-%COMP%]{grid-area:2/2/3/3}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-name.control[_ngcontent-%COMP%]{grid-area:2/4/3/5}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-name.sleight[_ngcontent-%COMP%]{grid-area:2/6/3/7}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-control.perception[_ngcontent-%COMP%]{grid-area:3/1/4/2}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.perception[_ngcontent-%COMP%]{grid-area:3/2/4/3}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-control.intuition[_ngcontent-%COMP%]{grid-area:3/3/4/4}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.intuition[_ngcontent-%COMP%]{grid-area:3/4/4/5}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-control.knowledge[_ngcontent-%COMP%]{grid-area:3/5/4/6}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.knowledge[_ngcontent-%COMP%]{grid-area:3/6/4/7}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-name.perception[_ngcontent-%COMP%]{grid-area:4/2/5/3}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-name.intuition[_ngcontent-%COMP%]{grid-area:4/4/5/5}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-name.knowledge[_ngcontent-%COMP%]{grid-area:4/6/5/7}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-control.confidence[_ngcontent-%COMP%]{grid-area:5/1/6/2}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.confidence[_ngcontent-%COMP%]{grid-area:5/2/6/3}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-control.manipulation[_ngcontent-%COMP%]{grid-area:5/3/6/4}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.manipulation[_ngcontent-%COMP%]{grid-area:5/4/6/5}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-control.charisma[_ngcontent-%COMP%]{grid-area:5/5/6/6}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-card.charisma[_ngcontent-%COMP%]{grid-area:5/6/6/7}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-name.confidence[_ngcontent-%COMP%]{grid-area:6/2/7/3}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-name.manipulation[_ngcontent-%COMP%]{grid-area:6/4/7/5}#stats-menu[_ngcontent-%COMP%]   .stat-grid[_ngcontent-%COMP%]   .stat-name.charisma[_ngcontent-%COMP%]{grid-area:6/6/7/7}",".old[_ngcontent-%COMP%]{opacity:.5}a[_ngcontent-%COMP%]{cursor:pointer}.special[_ngcontent-%COMP%]{font-size:1.4em;color:var(--main)}.not-special[_ngcontent-%COMP%]{font-size:1em}.tip[_ngcontent-%COMP%]{font-size:.8em;color:var(--secondary-text);text-align:center}.spinner[_ngcontent-%COMP%]{font-size:2em;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),e})();var S1=(()=>{return(e=S1||(S1={}))[e.Explore=0]="Explore",e[e.Advance=1]="Advance",e[e.Think=2]="Think",e[e.Walk=3]="Walk",e[e.Speak=4]="Speak",e[e.Return=5]="Return",e[e.Debug=6]="Debug",e[e.Lock=7]="Lock",S1;var e})(),p6=(()=>{return(e=p6||(p6={}))[e.Start=0]="Start",e[e.End=1]="End",p6;var e})();class Ln2{constructor(n){this.choiceKinds=n}isExplore(){return-1!=this.choiceKinds.indexOf(S1.Explore)}isAdvance(){return-1!=this.choiceKinds.indexOf(S1.Advance)}isThink(){return-1!=this.choiceKinds.indexOf(S1.Think)}isWalk(){return-1!=this.choiceKinds.indexOf(S1.Walk)}isSpeak(){return-1!=this.choiceKinds.indexOf(S1.Speak)}isReturn(){return-1!=this.choiceKinds.indexOf(S1.Return)}isDebug(){return-1!=this.choiceKinds.indexOf(S1.Debug)}isLock(){return-1!=this.choiceKinds.indexOf(S1.Lock)}}class Vn2{constructor(n){this.cmds=n}raw(n){for(let t of this.cmds){let r=/\[(.*?)[:|\]]/.exec(t);if(r&&r[1].startsWith(n))return t}return null}get(n){let t=this.raw(n);return t?this.parseCommand(t):null}getAll(n){let t=[];for(let r of this.cmds)if(r.startsWith(n)){let i=this.parseCommand(r);i&&t.push(i)}return t}parseCommand(n){let t=/\[(.*?)\]/.exec(n);if(t){if(-1!=t[1].indexOf(":")){let r=t[1].split(":");return{name:r[0],values:r.slice(1).join(":").split(",")}}return{name:t[1],values:[]}}return null}}class yn2{constructor(n){this.tags=n}get(n){for(let t of this.tags)if(t.startsWith(n))return this.parseTag(t);return null}getAll(n){let t=[];for(let r of this.tags)r.startsWith(n)&&t.push(this.parseTag(r));return t}parseTag(n){if(-1!=n.indexOf(":")){let t=n.split(":");return{name:t[0],value:t[1]}}return{name:n,value:null}}}const BL=/\[\s*stat_box\s*:\s*(.*?),\s*(.*?)\]/g,jL=/\[\s*active_check\s*:\s*(.*?),\s*(.*?)\]/g;class WL{constructor(n,t){this.json=n,this.idx=t}getJson(){return this.json}getChoiceIdx(){return this.idx}}let n4=(()=>{class e{constructor(){this.piecesIds=0,this.storyPiecesEmitter=new Q2,this.variableEmitter=new Q2,this.story=new ln2.Story(storyContent),this.story.BindExternalFunctionGeneral("is_inky",t=>!1,!0),this.story.BindExternalFunctionGeneral("_gameplay_get_odds",t=>{let i=t[1];return 100*Math.min(1,Math.max(.1,(t[0]-i)/5+1-i/20))},!1),this.story.onError=(t,r)=>{console.error(t,r)}}ngOnDestroy(){}bindExternalFunction(t,r){this.story.BindExternalFunctionGeneral(t,r,!1)}getStoryGroups(){return this.storyPiecesEmitter.asObservable().pipe(bn())}getVariables(){return this.variableEmitter.asObservable().pipe(bn())}continue(){let t=[];for(;this.story.canContinue;){let a=this.story.Continue(),o=[],s=a;if(a){let c=a.matchAll(/\[(.*?)\]/g);for(let l of c)console.log("pushing",l[0]),o.push(l[0]),s=s?.replace(l[0],"")??null;console.log("done")}t.push({kind:"paragraph",text:s??"",tags:new yn2(this.story.currentTags??[]),cmds:new Vn2(o)})}let r=this.story.currentChoices?.map(a=>{let o=this.story.state.VisitCountAtPathString(a.pathStringOnChoice)??0;return{text:a.text,index:a.index,visited:o>0}});t.push({kind:"choice_list",choices:r??[]});let i={id:this.getNextId(),items:[]};for(let a of t){let o=this.convertPiece(a);i.items.push(...o)}this.storyPiecesEmitter.next(i)}hasRefresh(){return this.story.currentChoices.length>0&&"REFRESH"==this.story.currentChoices[0].text.trim()}chooseChoiceIndex(t){this.story.ChooseChoiceIndex(t)}save(t){let r=this.story.state.ToJson();return new WL(r,t)}load(t){this.story.state.LoadJson(t.getJson()),this.chooseChoiceIndex(t.getChoiceIdx()),this.continue()}restart(){this.story.ResetState(),this.continue()}call(t,r,i){return this.story.EvaluateFunction(t,r,i)}get(t){return this.story.variablesState.GetVariableWithName(t)}getNextId(){return this.piecesIds+=1,this.piecesIds.toString()}convertPiece(t){if("paragraph"==t.kind){let u=function(f){return null!=f};{let f=t.cmds.raw("divider");if(f)return[{id:this.getNextId(),kind:"command",text:f}]}{let f=t.cmds.raw("naming_menu");if(f)return[{id:this.getNextId(),kind:"command",text:f}]}{let f=t.cmds.raw("marking_menu");if(f)return[{id:this.getNextId(),kind:"command",text:f}]}{let f=t.cmds.raw("stats_menu");if(f)return[{id:this.getNextId(),kind:"command",text:f}]}{let f=t.cmds.raw("tutorial");if(f)return[{id:this.getNextId(),kind:"command",text:f}]}{let f=t.cmds.get("mood")||t.cmds.get("objective")||t.cmds.get("invalid")||t.cmds.get("money")||t.cmds.get("item");if(f)return[{id:this.getNextId(),kind:"paragraph",text:`[ ${f.values[0]} ]`,voice:null,className:null,difficulty:null,success:null,statCheck:!1,meets:[],trainOfThought:null}]}let r=t.cmds.get("active_result"),i=t.cmds.get("passive_check"),a=null,o=null,s=null;r&&(console.log("active",r,t.cmds),a=r.values[1],"true"==r.values[2].trim()&&(o=!0),"false"==r.values[2].trim()&&(s=!0)),i&&(console.log("passive",i,t.cmds),a=i.values[0],"true"==i.values[1].trim()&&(o=!0),"false"==i.values[1].trim()&&(s=!0));let c=t.cmds.get("voice"),C=null;return t.cmds.get("tot")&&(C=p6.Start),[{id:this.getNextId(),kind:"paragraph",text:t.text,voice:c?.values[0]||r?.values[0]||null,className:null,difficulty:a,success:!!o||!s&&null,statCheck:!!r,meets:t.tags.getAll("meet").map(f=>f.value).filter(u),trainOfThought:C}]}if("choice_list"==t.kind){let r=[];for(let i of t.choices){let a=new Ln2(this.getChoiceKinds(i.text)),o=this.getBox(i.text),s=this.getStatCheck(i.text);if(o)r.push({id:this.getNextId(),kind:"contextual_choice",text:this.filterChoiceText(i.text),index:i.index,choiceKinds:a,visited:i.visited,box:o});else if(s){let c=this.getStatFromName(s[0]);console.log("odds",s),r.push({id:this.getNextId(),kind:"active_stat_check_choice",text:this.filterChoiceText(i.text),index:i.index,choiceKinds:a,visited:i.visited,stat:c,difficulty:parseInt(s[1])})}else r.push("CONTINUE >>>"==i.text?{id:this.getNextId(),kind:"continue_choice",text:i.text,index:i.index}:{id:this.getNextId(),kind:"simple_choice",text:this.filterChoiceText(i.text),index:i.index,choiceKinds:a,visited:i.visited})}return r}throw new Error(`invalid kind for RawPiece ${t}`)}getChoiceKinds(t){let r=[];return-1!=t.indexOf("[a]")&&r.push(S1.Advance),-1!=t.indexOf("[e]")&&r.push(S1.Explore),-1!=t.indexOf("[r]")&&r.push(S1.Return),-1!=t.indexOf("[t]")&&r.push(S1.Think),-1!=t.indexOf("[w]")&&r.push(S1.Walk),-1!=t.indexOf("[s]")&&r.push(S1.Speak),-1!=t.indexOf("[$]")&&r.push(S1.Debug),/\[\s*lock\s*:\s*(true)\s*\]/.test(t)&&r.push(S1.Lock),r}getBox(t){let r=BL.exec(t);if(!r)return null;let i=r[1].toLowerCase();return[i,`${this.getStatFromName(i).name} ${r[2]}`]}getStatCheck(t){let r=jL.exec(t);return r?(console.log("getstatcheck",t),[r[1].toLowerCase(),r[2]]):null}getStatFromName(t){let r=FL.find(i=>i.className==t);if(!r)throw new Error(`Invalid stat: ${t}`);return r}filterChoiceText(t){return t.replace("[a]","").replace("[e]","").replace("[r]","").replace("[t]","").replace("[w]","").replace("[s]","").replace("[$]","").replace(BL,"").replace(jL,"").replace(/\[(.*?)\]/,"")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Hn2=(()=>{class e{constructor(t,r){this.ref=t,this.storyService=r,this.title="",this.body="";let a=JSON.parse(t.data.id[0]);console.log(a),this.title=r.call("inventory_item_name_str",[a.itemName],!0).returned,this.body=r.call("inventory_item_description_str",[a.itemName],!0).output,console.log(this.body)}}return e.\u0275fac=function(t){return new(t||e)(G(_4),G(n4))},e.\u0275cmp=a1({type:e,selectors:[["ng-component"]],decls:5,vars:2,consts:[["id","inspect-item"],[1,"title"],[1,"body"]],template:function(t,r){1&t&&(F(0,"div",0)(1,"div",1),a2(2),R(),F(3,"div",2),a2(4),R()()),2&t&&(I(2),D1(r.title),I(2),D1(r.body))},styles:["#inspect-item[_ngcontent-%COMP%]{padding:20px}#inspect-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.4em;color:var(--main);font-weight:700;text-transform:uppercase;padding-top:20px}"],changeDetection:0}),e})();function _n2(e,n){if(1&e){const t=I1();F(0,"div",4),b2("click",function(){const a=C1(t).$implicit;return u1(r2().click(a[1]))}),g2(1,"div",5)(2,"div"),F(3,"div",6)(4,"div",7),g2(5,"fa-icon",8),R()()()}if(2&e){const t=n.$implicit,r=r2();I(2),O4("picture ",r.ITEMS[t[0]].id,""),I(3),T("icon",r.iconNew)}}class r4{constructor(n){this.id=n}}const zn2={CarKeys1:new r4("CarKeys1"),DriversLicense1:new r4("DriversLicense1"),BackstoryFolder1:new r4("BackstoryFolder1"),PaperWithBookNames1:new r4("PaperWithBookNames1"),MoneyForBooks1:new r4("MoneyForBooks1"),ClubBackdoorKey1:new r4("ClubBackdoorKey1"),ZombieFriend1Letter1:new r4("ZombieFriend1Letter1"),ZombieFriend1OtherKey:new r4("ZombieFriend1OtherKey"),MagicalBook1:new r4("MagicalBook1"),MagicalRing1:new r4("MagicalRing1")};let bn2=(()=>{class e{constructor(t,r){this.ref=t,this.dialog=r,this.iconNew=Jr,this.ITEMS=zn2}get items(){return this.ref.data.items.map(t=>[JSON.parse(t[0]).itemName,t])}click(t){this.dialog.open(Hn2,{windowClass:"popup",data:{id:t}})}}return e.\u0275fac=function(t){return new(t||e)(G(_4),G(ca))},e.\u0275cmp=a1({type:e,selectors:[["ng-component"]],decls:5,vars:1,consts:[["id","inventory-popup"],["id","title"],["id","item-container"],["class","item",3,"click",4,"ngFor","ngForOf"],[1,"item",3,"click"],[1,"box"],[1,"new"],[1,"icon"],[3,"icon"]],template:function(t,r){1&t&&(F(0,"div",0)(1,"div",1),a2(2,"Inventory"),R(),F(3,"div",2),o2(4,_n2,6,4,"div",3),R()()),2&t&&(I(4),T("ngForOf",r.items))},dependencies:[ce,H4],styles:['#inventory-popup[_ngcontent-%COMP%]{padding:20px}#inventory-popup[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{font-size:1.4em;color:var(--main);font-weight:700;text-transform:uppercase;padding-top:20px}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:2px;box-sizing:border-box}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:100px;height:100px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin:2px}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover   .picture[_ngcontent-%COMP%]{transform:scale(1.1) rotate(5deg)}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover   .box[_ngcontent-%COMP%]{opacity:50%}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{z-index:0;content:"";width:70px;height:70px;border:2px solid white;background-color:#1e1e1e;opacity:30%;border-radius:10px;transition:opacity .1s ease-in-out}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]{z-index:1;width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:50% 50%;margin-left:-85%;transition:transform .1s ease-in-out}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .MoneyForBooks1[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/items/envelope01.svg)}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .CarKeys1[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/items/blue01.svg)}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .ClubBackdoorKey1[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/items/key03.svg)}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .ZombieFriend1OtherKey[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/items/key04.svg)}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .MagicalRing1[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/items/red03.svg)}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .MagicalBook1[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/items/old01.svg)}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .BackstoryFolder1[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/items/sketchbook01.svg)}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .PaperWithBookNames1[_ngcontent-%COMP%], #inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .ZombieFriend1Letter1[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/items/paper01.svg)}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .DriversLicense1[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/items/Drivers_License.webp)}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .new[_ngcontent-%COMP%]{z-index:2;width:70%;height:70%;margin-left:-90%;border-radius:10px;opacity:90%}#inventory-popup[_ngcontent-%COMP%]   #item-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .new[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:flex-end;height:100%;font-size:1em;font-weight:700;color:var(--analog1)}'],changeDetection:0}),e})(),Ca=(()=>{class e{constructor(t){this.storyService=t,this.messages=new Map,this.newMessages=[],this.onMessageAdded$=new Q2,this.newMessages$=new Q2,t.bindExternalFunction("_phone_add_message",r=>this.addMessage(r[0],r[1])),t.bindExternalFunction("_phone_get_sender_count",()=>this.getSenderCount()),t.bindExternalFunction("_phone_get_sender_at",r=>this.getSenderAt(r[0])),t.bindExternalFunction("_phone_get_sender_message_count",r=>this.getSenderMessageCount(r[0])),t.bindExternalFunction("_phone_get_sender_message_at",r=>this.getSenderMessageAt(r[0],r[1]))}getPossibleResponses(t){return[...this.storyService.call("phone_get_possible_responses",[t],!1)].map(i=>JSON.parse(i[0]).itemName).filter(i=>!this.messages.get(t)?.has(i))}addMessage(t,r){this.newMessages.push([t,r]),this.messages.has(t)?this.messages.get(t)?.add(r):this.messages.set(t,new Set([r])),console.log(this.getPossibleResponses(t)),this.onMessageAdded$.emit(),this.newMessages$.emit(this.newMessages.length)}getSenderCount(){return[...this.messages.keys()].length}getSenderAt(t){return[...this.messages.keys()][t]}getSenders(){return[...this.messages.keys()]}getSenderMessageCount(t){return this.messages.get(t)?.size??0}getSenderMessageAt(t,r){return[...this.messages.get(t)??[]][r]}getSenderMessages(t){return this.newMessages=this.newMessages.filter(r=>r[0]!=t),this.newMessages$.emit(this.newMessages.length),[...this.messages.get(t)??[]]}getSenderNewMessages(t){return this.newMessages.filter(r=>r[0]==t).length}}return e.\u0275fac=function(t){return new(t||e)(P2(n4))},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Sn2(e,n){if(1&e&&(F(0,"div",13)(1,"div",14),a2(2),R()()),2&e){const t=r2().$implicit,r=r2(2);I(2),V3(" ",r.getNewMessages(t)," ")}}function wn2(e,n){if(1&e){const t=I1();F(0,"div",7),b2("click",function(){const a=C1(t).$implicit;return u1(r2(2).setContact(a))}),g2(1,"div",8),F(2,"div",9)(3,"div",10),a2(4),R(),F(5,"div",11),a2(6),R()(),o2(7,Sn2,3,1,"div",12),R()}if(2&e){const t=n.$implicit,r=r2(2);I(4),D1(t.sender.name),I(2),D1(t.blurb),I(1),T("ngIf",r.getNewMessages(t)>0)}}function xn2(e,n){if(1&e&&(F(0,"div",5),o2(1,wn2,8,3,"div",6),R()),2&e){const t=r2();I(1),T("ngForOf",t.contacts)}}function Dn2(e,n){if(1&e&&(F(0,"p",17),a2(1),R()),2&e){const t=n.$implicit;I(1),V3(" ",t," ")}}function Nn2(e,n){if(1&e){const t=I1();F(0,"div",0),o2(1,Dn2,2,1,"p",15),F(2,"a",16),b2("click",function(){return C1(t),u1(r2().return())}),a2(3,"Return"),R()()}if(2&e){const t=r2();I(1),T("ngForOf",t.currentContact.lines)}}class En2{constructor(n,t){this.id=n,this.name=t}}class Pn2{constructor(n,t,r){this.sender=n,this.lines=t,this.responses=r,this.blurb=""}}let kn2=(()=>{class e{constructor(t,r,i){this.ref=t,this.phoneService=r,this.storyService=i,this.currentContact=null,this.contacts=[],this.contacts=r.getSenders().map(a=>{let s=r.getPossibleResponses(a),c=i.call("npc_full_name_str",[a],!0);return new Pn2(new En2(a,c.returned),[],s)}),console.log(this.contacts)}getLines(t){return this.phoneService.getSenderMessages(t).map(r=>{const i=this.storyService.call("phone_get_message_content",[r],!0);return console.log(">",i),i.output.split("\n").filter(a=>""!=a.trim())}).flat()}chooseResponse(t,r){this.phoneService.addMessage(t.sender.id,t.responses[r]),t.lines=this.getLines(t.sender.id),t.responses=this.phoneService.getPossibleResponses(t.sender.id)}return(){this.currentContact=null}setContact(t){this.currentContact=t,this.currentContact.lines=this.getLines(this.currentContact.sender.id)}getNewMessages(t){return this.phoneService.getSenderNewMessages(t.sender.id)}}return e.\u0275fac=function(t){return new(t||e)(G(_4),G(Ca),G(n4))},e.\u0275cmp=a1({type:e,selectors:[["ng-component"]],decls:7,vars:2,consts:[["id","messages"],["id","cell"],["id","title"],["id","contacts",4,"ngIf"],["id","messages",4,"ngIf"],["id","contacts"],["class","conversation",3,"click",4,"ngFor","ngForOf"],[1,"conversation",3,"click"],[1,"picture"],[1,"sender-line"],[1,"sender"],[1,"message-blurb"],["class","notification",4,"ngIf"],[1,"notification"],[1,"notification-icon"],["class","received-message",4,"ngFor","ngForOf"],[3,"click"],[1,"received-message"]],template:function(t,r){1&t&&(F(0,"div",0)(1,"div",1)(2,"header")(3,"div",2),a2(4,"Messages"),R()(),o2(5,xn2,2,1,"div",3),o2(6,Nn2,4,1,"div",4),R()()),2&t&&(I(5),T("ngIf",null==r.currentContact),I(1),T("ngIf",null!=r.currentContact))},dependencies:[ce,O3],styles:["#messages[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]{width:415px;background-image:url(/cotm4/assets/images/p-holder/cellphone-mock.png);background-size:cover;background-repeat:no-repeat;background-position:50% 50%;border-radius:53px;border:6px solid black;overflow:hidden;display:flex;flex-direction:column;justify-content:stretch}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{width:100%;background-color:#333;height:100px;color:#fff;font-size:3em;font-weight:700;display:flex;align-items:flex-end;box-sizing:border-box;padding:12px}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   #contacts[_ngcontent-%COMP%], #messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   #messages[_ngcontent-%COMP%]{width:100%;background-color:#000;flex-grow:1;display:flex;flex-direction:column;color:#fff}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   #contacts[_ngcontent-%COMP%]   .conversation[_ngcontent-%COMP%]{border-bottom:1px solid var(--secondary-text);border-top:1px solid var(--background-low-contrast);cursor:pointer;width:100%;border-left:none;border-right:none;height:80px;display:flex;align-items:center;box-sizing:border-box;padding:10px}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   #contacts[_ngcontent-%COMP%]   .conversation[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]{flex-grow:0;width:60px;height:60px;border-radius:60px;background-color:green;margin-right:10px}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   #contacts[_ngcontent-%COMP%]   .conversation[_ngcontent-%COMP%]   .sender-line[_ngcontent-%COMP%]{flex-grow:1}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   #contacts[_ngcontent-%COMP%]   .conversation[_ngcontent-%COMP%]   .sender-line[_ngcontent-%COMP%]   .sender[_ngcontent-%COMP%]{font-size:1.1em;font-weight:700;color:var(--main-text)}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   #contacts[_ngcontent-%COMP%]   .conversation[_ngcontent-%COMP%]   .sender-line[_ngcontent-%COMP%]   .message-blurb[_ngcontent-%COMP%]{font-size:.95em;color:var(--secondary-text)}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   #contacts[_ngcontent-%COMP%]   .conversation[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{flex-grow:0;width:40px;display:flex;justify-content:center;align-items:center}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   #contacts[_ngcontent-%COMP%]   .conversation[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{width:25px;height:20px;font-size:.9em;background-color:var(--success);border-radius:20px;color:#000;display:flex;justify-content:center;align-items:center}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   #messages[_ngcontent-%COMP%]{justify-content:flex-end;align-items:flex-start;padding:20px;box-sizing:border-box}#messages[_ngcontent-%COMP%]   #cell[_ngcontent-%COMP%]   #messages[_ngcontent-%COMP%]   .received-message[_ngcontent-%COMP%]{width:80%;background-color:green;padding:6px;border-radius:10px}"],changeDetection:0}),e})();function An2(e,n){if(1&e&&g2(0,"app-stats-menu",3),2&e){const t=r2();T("recent",!0)("maxStats",10)("minStats",1)("disableDecrease",!0)("totalToDistribute",0)("informationMode",t.Simple)}}function Tn2(e,n){if(1&e&&g2(0,"app-stats-menu",4),2&e){const t=r2();T("recent",!0)("maxStats",10)("minStats",0)("disableDecrease",!1)("informationMode",t.Debug)}}let UL=(()=>{class e{constructor(t){this.ref=t,this.Simple=t4.Simple,this.Debug=t4.Debug}get debug(){return this.ref.data.debug}get remainingStats(){return this.ref.data.remainingStats}}return e.\u0275fac=function(t){return new(t||e)(G(_4))},e.\u0275cmp=a1({type:e,selectors:[["ng-component"]],decls:3,vars:2,consts:[["id","player-stats"],[3,"recent","maxStats","minStats","disableDecrease","totalToDistribute","informationMode",4,"ngIf"],[3,"recent","maxStats","minStats","disableDecrease","informationMode",4,"ngIf"],[3,"recent","maxStats","minStats","disableDecrease","totalToDistribute","informationMode"],[3,"recent","maxStats","minStats","disableDecrease","informationMode"]],template:function(t,r){1&t&&(F(0,"div",0),o2(1,An2,1,6,"app-stats-menu",1),o2(2,Tn2,1,5,"app-stats-menu",2),R()),2&t&&(I(1),T("ngIf",!r.debug),I(1),T("ngIf",r.debug))},dependencies:[O3,RL],styles:["#player-stats[_ngcontent-%COMP%]{padding:20px}"],changeDetection:0}),e})(),GL=(()=>{class e{constructor(t){this.storyService=t,this.knownNpcs={Strenght:"THE CHARIOT",Control:"THE EMPEROR",Sleight:"THE FOOL",Perception:"THE MOON",Intuition:"THE HIGH PRIESTESS",Knowledge:"THE HERMIT",Confidence:"THE MAGICIAN",Manipulation:"THE DEVIL",Charisma:"THE STAR",Player:"YOU"},this.npcsMet={}}meet(t){this.npcsMet[t]={}}getFullName(t){return t in this.knownNpcs?{voice:this.knownNpcs[t]??t,className:t}:{voice:`${this.storyService.call("npc_first_name_str",[t],!0).returned??""} ${this.storyService.call("npc_last_name_str",[t],!0).returned??""}`.trim(),className:t}}save(){localStorage.setItem("npcs",JSON.stringify(this.npcsMet))}load(){let t=localStorage.getItem("npcs");t&&(this.npcsMet=JSON.parse(t))}}return e.\u0275fac=function(t){return new(t||e)(P2(n4))},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ua=(()=>{class e{constructor(){this.loading$=new L8(!0),this.loadedCount=0,this.queue=[{id:"marking1",src:"/cotm4/assets/images/marking1.png"},{id:"marking2",src:"/cotm4/assets/images/marking2.png"},{id:"marking3",src:"/cotm4/assets/images/marking3.png"},{id:"marking1",src:"/cotm4/assets/images/strenght.png"},{id:"marking2",src:"/cotm4/assets/images/control.png"},{id:"marking3",src:"/cotm4/assets/images/sleight.png"},{id:"marking1",src:"/cotm4/assets/images/perception.png"},{id:"marking2",src:"/cotm4/assets/images/intuition.png"},{id:"marking3",src:"/cotm4/assets/images/knowledge.png"},{id:"marking1",src:"/cotm4/assets/images/confidence.png"},{id:"marking2",src:"/cotm4/assets/images/manipulation.png"},{id:"marking3",src:"/cotm4/assets/images/perception.png"},{id:"marking2",src:"/cotm4/assets/images/divider-mid.png"},{id:"marking3",src:"/cotm4/assets/images/divider-side.png"}],this.loaded={};for(let t=0;t<this.queue.length;t++){let r=new Image;r.onload=((i,a,o)=>function(){o.onload(i,a)})(this.queue[t],r,this),r.src=this.queue[t].src}}onload(t,r){this.loadedCount++,this.loaded[t.id]=r,this.queue.length==this.loadedCount&&this.handleComplete()}handleComplete(){this.loading$.next(!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function On2(e,n){1&e&&(F(0,"span"),a2(1,"Success"),R())}function In2(e,n){1&e&&a2(0,"Failure")}function Fn2(e,n){if(1&e&&(F(0,"span"),a2(1),o2(2,On2,2,0,"span",3),a2(3,"] - "),o2(4,In2,1,0,"ng-template",null,5,o5),R()),2&e){const t=e6(5),r=r2(3);I(1),V3(" [",r.difficulty,": "),I(1),T("ngIf",r.success)("ngIfElse",t)}}function Rn2(e,n){1&e&&a2(0," - ")}function Bn2(e,n){if(1&e&&(k4(0),F(1,"span"),a2(2),R(),o2(3,Fn2,6,3,"span",3),o2(4,Rn2,1,0,"ng-template",null,4,o5),A4()),2&e){const t=e6(5),r=r2(2);I(1),O4("voice ",null==r.className?null:r.className.toLowerCase(),""),I(1),D1(r.voice),I(1),T("ngIf",null!=r.difficulty&&null!=r.success)("ngIfElse",t)}}const jn2=function(e,n){return{old:e,recent:n}};function Wn2(e,n){if(1&e&&(F(0,"p",1),o2(1,Bn2,6,6,"ng-container",2),a2(2),R()),2&e){const t=r2();T("ngClass",o6(3,jn2,!t.recent,t.recent)),I(1),T("ngIf",t.voice),I(1),V3(" ",t.text,"\n")}}let Un2=(()=>{class e{constructor(){this.voice=null,this.className=null,this.text=null,this.difficulty=null,this.success=null,this.recent=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a1({type:e,selectors:[["app-paragraph"]],inputs:{voice:"voice",className:"className",text:"text",difficulty:"difficulty",success:"success",recent:"recent"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["nodifficulty",""],["failure",""]],template:function(t,r){1&t&&o2(0,Wn2,3,6,"p",0),2&t&&T("ngIf",r.text)},dependencies:[T3,O3],styles:["p[_ngcontent-%COMP%]{font-size:1em;color:#fff;line-height:1.7em;font-weight:lighter}p[_ngcontent-%COMP%]   .voice[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700}p[_ngcontent-%COMP%]   .voice.strenght[_ngcontent-%COMP%], p[_ngcontent-%COMP%]   .voice.control[_ngcontent-%COMP%], p[_ngcontent-%COMP%]   .voice.sleight[_ngcontent-%COMP%]{color:var(--physical)}p[_ngcontent-%COMP%]   .voice.perception[_ngcontent-%COMP%], p[_ngcontent-%COMP%]   .voice.intuition[_ngcontent-%COMP%], p[_ngcontent-%COMP%]   .voice.knowledge[_ngcontent-%COMP%]{color:var(--mental)}p[_ngcontent-%COMP%]   .voice.confidence[_ngcontent-%COMP%], p[_ngcontent-%COMP%]   .voice.manipulation[_ngcontent-%COMP%], p[_ngcontent-%COMP%]   .voice.charisma[_ngcontent-%COMP%]{color:var(--social)}",".old[_ngcontent-%COMP%]{opacity:.5}a[_ngcontent-%COMP%]{cursor:pointer}.special[_ngcontent-%COMP%]{font-size:1.4em;color:var(--main)}.not-special[_ngcontent-%COMP%]{font-size:1em}.tip[_ngcontent-%COMP%]{font-size:.8em;color:var(--secondary-text);text-align:center}.spinner[_ngcontent-%COMP%]{font-size:2em;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),e})();function Gn2(e,n){if(1&e){const t=I1();F(0,"a",5),b2("click",function(){return C1(t),u1(r2(2).onclick())}),g2(1,"fa-icon",6)(2,"fa-icon",6)(3,"fa-icon",6)(4,"fa-icon",6),R()}if(2&e){const t=r2(2);I(1),T("icon",t.continueIcon),I(1),T("icon",t.continueIcon),I(1),T("icon",t.continueIcon),I(1),T("icon",t.continueIcon)}}function $n2(e,n){1&e&&g2(0,"fa-icon",6),2&e&&T("icon",r2(3).exploreIcon)}function qn2(e,n){1&e&&g2(0,"fa-icon",6),2&e&&T("icon",r2(3).advanceIcon)}function Kn2(e,n){1&e&&g2(0,"fa-icon",6),2&e&&T("icon",r2(3).walkIcon)}function Yn2(e,n){1&e&&g2(0,"fa-icon",6),2&e&&T("icon",r2(3).speakIcon)}function Qn2(e,n){1&e&&g2(0,"fa-icon",6),2&e&&T("icon",r2(3).returnIcon)}function Jn2(e,n){}function Zn2(e,n){1&e&&o2(0,Jn2,0,0,"ng-template")}function Xn2(e,n){if(1&e&&(F(0,"span")(1,"span",14),a2(2,"["),F(3,"span"),a2(4),R(),a2(5,":"),F(6,"span"),a2(7),R(),a2(8,"]"),R()()),2&e){const t=r2(3);I(3),Ft(t.stat.className),I(1),D1(t.stat.name),I(2),Ft(t.difficultyClass),I(1),V3("",t.difficulty,"%")}}function e02(e,n){if(1&e&&(F(0,"span"),a2(1),R()),2&e){const t=r2(3);O4("box ",t.box[0],""),I(1),D1(t.box[1])}}function t02(e,n){1&e&&g2(0,"fa-icon",15),2&e&&T("icon",r2(3).lockIcon)}const n02=function(e){return{lock:e}};function r02(e,n){if(1&e){const t=I1();F(0,"a",7),b2("click",function(){C1(t);const i=r2(2);return u1(null!=i.choiceKinds&&i.choiceKinds.isLock()?null:i.onclick())}),o2(1,$n2,1,1,"fa-icon",8),o2(2,qn2,1,1,"fa-icon",8),o2(3,Kn2,1,1,"fa-icon",8),o2(4,Yn2,1,1,"fa-icon",8),o2(5,Qn2,1,1,"fa-icon",8),o2(6,Zn2,1,0,null,9),o2(7,Xn2,9,8,"span",10),F(8,"span",11),a2(9),R(),o2(10,e02,2,4,"span",12),o2(11,t02,1,1,"fa-icon",13),R()}if(2&e){r2();const t=e6(4),r=r2();T("ngClass",C3(12,n02,null==r.choiceKinds?null:r.choiceKinds.isLock())),I(1),T("ngIf",null==r.choiceKinds?null:r.choiceKinds.isExplore()),I(1),T("ngIf",null==r.choiceKinds?null:r.choiceKinds.isAdvance()),I(1),T("ngIf",null==r.choiceKinds?null:r.choiceKinds.isWalk()),I(1),T("ngIf",null==r.choiceKinds?null:r.choiceKinds.isSpeak()),I(1),T("ngIf",null==r.choiceKinds?null:r.choiceKinds.isReturn()),I(1),T("ngIf",!(null!=r.choiceKinds&&r.choiceKinds.isThink()))("ngIfElse",t),I(1),T("ngIf",r.stat&&r.difficulty),I(2),D1(r.text.trim()),I(1),T("ngIf",r.box),I(1),T("ngIf",null==r.choiceKinds?null:r.choiceKinds.isLock())}}function i02(e,n){1&e&&g2(0,"img",16)}const a02=function(e,n,t,r){return{old:e,recent:n,visited:t,refresh:r}};function o02(e,n){if(1&e&&(F(0,"p",1),o2(1,Gn2,5,4,"a",2),o2(2,r02,12,14,"a",3),o2(3,i02,1,0,"ng-template",null,4,o5),R()),2&e){const t=r2();T("ngClass",Ol(3,a02,!t.recent,t.recent,t.visited&&t.showsVisited,t.text&&"REFRESH"==t.text.trim())),I(1),T("ngIf",t.isContinue),I(1),T("ngIf",t.text)}}let s02=(()=>{class e{constructor(){this.text=null,this.isContinue=!1,this.index=null,this.visited=!1,this.choiceKinds=null,this.stat=null,this.difficulty=null,this.box=null,this.recent=!1,this.onChoose=new Q2,this.continueIcon=mg,this.advanceIcon=Qr,this.exploreIcon=k8,this.walkIcon=ug,this.speakIcon=Jm,this.returnIcon=Yr,this.lockIcon=pm,this.difficultyClass="",this.showsVisited=!0}ngOnInit(){if(this.difficulty){this.difficulty=Math.floor(this.difficulty);let r=Math.floor(this.difficulty/10);this.difficultyClass=`d${r}`}let t=this.choiceKinds;t&&(t.isReturn()||t.isWalk())&&(this.showsVisited=!1)}onclick(){null!=this.index&&this.onChoose.emit(this.index)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a1({type:e,selectors:[["app-choice"]],inputs:{text:"text",isContinue:"isContinue",index:"index",visited:"visited",choiceKinds:"choiceKinds",stat:"stat",difficulty:"difficulty",box:"box",recent:"recent"},outputs:{onChoose:"onChoose"},decls:1,vars:1,consts:[["id","choice",3,"ngClass",4,"ngIf"],["id","choice",3,"ngClass"],["class","continue",3,"click",4,"ngIf"],["class","simple",3,"ngClass","click",4,"ngIf"],["thoughtAdvanceIcon",""],[1,"continue",3,"click"],[3,"icon"],[1,"simple",3,"ngClass","click"],[3,"icon",4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"text"],[3,"class",4,"ngIf"],["class","lock-icon",3,"icon",4,"ngIf"],[1,"stat-check"],[1,"lock-icon",3,"icon"],["src","/cotm4/assets/images/thought-bubble.png",2,"margin","0 5px","transform","translateY(5px)"]],template:function(t,r){1&t&&o2(0,o02,5,8,"p",0),2&t&&T("ngIf",r.recent)},dependencies:[T3,O3,H4],styles:["#choice[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:stretch}#choice.visited[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--secondary-text)}#choice[_ngcontent-%COMP%]   a.continue[_ngcontent-%COMP%]{flex:1;background-color:var(--main-darker);padding-top:10px;padding-bottom:10px;padding-right:35px;text-align:right;box-sizing:border-box;font-weight:700;color:var(--analog1);border-radius:4px;font-family:Quattrocento,Georgia,Times New Roman,Times,serif;transition:transform .1s;transform:rotate(.5deg)}#choice[_ngcontent-%COMP%]   a.continue[_ngcontent-%COMP%]:hover{color:#fff;transform:rotate(0)}#choice[_ngcontent-%COMP%]   a.continue[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]{flex:1;font-weight:700}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{text-decoration:underline}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-right:10px}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]{margin-right:5px}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .strenght[_ngcontent-%COMP%]{color:var(--strenght)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{color:var(--control)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .sleight[_ngcontent-%COMP%]{color:var(--sleight)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .perception[_ngcontent-%COMP%]{color:var(--perception)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .intuition[_ngcontent-%COMP%]{color:var(--intuition)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .knowledge[_ngcontent-%COMP%]{color:var(--knowledge)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .confidence[_ngcontent-%COMP%]{color:var(--confidence)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .manipulation[_ngcontent-%COMP%]{color:var(--manipulation)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .charisma[_ngcontent-%COMP%]{color:var(--charisma)}@keyframes progress{0%{color:var(--failure)}50%{color:#ff0}to{color:var(--success)}}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .d1[_ngcontent-%COMP%]{--progress: 0;animation:100s linear calc(-1s * var(--progress)) paused progress}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .d2[_ngcontent-%COMP%]{--progress: 9;animation:100s linear calc(-1s * var(--progress)) paused progress}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .d3[_ngcontent-%COMP%]{--progress: 19;animation:100s linear calc(-1s * var(--progress)) paused progress}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .d4[_ngcontent-%COMP%]{--progress: 29;animation:100s linear calc(-1s * var(--progress)) paused progress}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .d5[_ngcontent-%COMP%]{--progress: 39;animation:100s linear calc(-1s * var(--progress)) paused progress}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .d6[_ngcontent-%COMP%]{--progress: 59;animation:100s linear calc(-1s * var(--progress)) paused progress}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .d7[_ngcontent-%COMP%]{--progress: 69;animation:100s linear calc(-1s * var(--progress)) paused progress}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .d8[_ngcontent-%COMP%]{--progress: 79;animation:100s linear calc(-1s * var(--progress)) paused progress}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .d9[_ngcontent-%COMP%]{--progress: 89;animation:100s linear calc(-1s * var(--progress)) paused progress}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .stat-check[_ngcontent-%COMP%]   .d10[_ngcontent-%COMP%]{--progress: 99;animation:100s linear calc(-1s * var(--progress)) paused progress}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{margin-right:10px;background-color:#fff;color:#000;font-size:.8em;font-weight:700;border-radius:5px;padding:0 3px;margin-left:3px;white-space:nowrap}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .box.strenght[_ngcontent-%COMP%]{background-color:var(--strenght)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .box.control[_ngcontent-%COMP%]{background-color:var(--control)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .box.sleight[_ngcontent-%COMP%]{background-color:var(--sleight)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .box.perception[_ngcontent-%COMP%]{background-color:var(--perception)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .box.intuition[_ngcontent-%COMP%]{background-color:var(--intuition)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .box.knowledge[_ngcontent-%COMP%]{background-color:var(--knowledge)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .box.confidence[_ngcontent-%COMP%]{background-color:var(--confidence)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .box.manipulation[_ngcontent-%COMP%]{background-color:var(--manipulation)}#choice[_ngcontent-%COMP%]   a.simple[_ngcontent-%COMP%]   .box.charisma[_ngcontent-%COMP%]{background-color:var(--charisma)}#choice[_ngcontent-%COMP%]   a.lock[_ngcontent-%COMP%]{color:var(--secondary-text);opacity:.5;cursor:not-allowed}#choice[_ngcontent-%COMP%]   a.lock[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]{margin-left:8px}#choice[_ngcontent-%COMP%]   a.lock[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{text-decoration:none}#choice.refresh[_ngcontent-%COMP%]{display:none}",".old[_ngcontent-%COMP%]{opacity:.5}a[_ngcontent-%COMP%]{cursor:pointer}.special[_ngcontent-%COMP%]{font-size:1.4em;color:var(--main)}.not-special[_ngcontent-%COMP%]{font-size:1em}.tip[_ngcontent-%COMP%]{font-size:.8em;color:var(--secondary-text);text-align:center}.spinner[_ngcontent-%COMP%]{font-size:2em;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),e})();var he=(()=>{return(e=he||(he={})).VILITARIS="VILITARIS",e.BELLIO="BELLIO",e.NIAVIT="NIAVIT",he;var e})();function c02(e,n){1&e&&(F(0,"div",14),a2(1,"Use the arrows to pick another"),R())}function l02(e,n){if(1&e){const t=I1();F(0,"div",15),b2("click",function(){return C1(t),u1(r2().moveBackwards())}),g2(1,"fa-icon",16),R()}if(2&e){const t=r2();I(1),T("icon",t.moveBackwardsIcon)}}function C02(e,n){if(1&e){const t=I1();F(0,"div",17),b2("click",function(){return C1(t),u1(r2().moveForwards())}),g2(1,"fa-icon",16),R()}if(2&e){const t=r2();I(1),T("icon",t.moveForwardsIcon)}}function u02(e,n){if(1&e&&(F(0,"p"),a2(1),R()),2&e){const t=n.$implicit;I(1),V3(" ",t," ")}}const f02=function(e,n){return{old:e,recent:n}};let d02=(()=>{class e{constructor(t,r){this.storyService=t,this.assetsService=r,this.recent=!1,this.moveBackwardsIcon=Ju,this.moveForwardsIcon=ef,this.currentIndex=0,this.markings=[{kind:he.VILITARIS,imageClass:"marking-vilitaris",description:["Powerful bodies build powerful minds, their motto and lifestyle. Mages who are looking for control in all things, internal and external, choose this Marking.","Bonus: +1 to PHYSICAL stats.","Flaw Power Player: You can't say no to any offers of power."]},{kind:he.BELLIO,imageClass:"marking-bellio",description:["There is something fundamentaly broken with the world and you will fix it. Rebels and activists, and those with drive and passion choose this Marking.","Bonus: +1 to MENTAL stats.","Flaw Savior Complex: You can't say no to helping people."]},{kind:he.NIAVIT,imageClass:"marking-niavit",description:["What\u2019s the point of having magic if you can\u2019t have fun? Sex, drugs and alcohol are a lot more fun when there are no consequences. Those who seek hedonism choose this Marking.","Bonus: +1 to SOCIAL challenges.",'Flaw Addicted: You can\'t say no to any "fun" options.']}];let i=t.get("player_marking1"),a=t.get("player_marking2"),o=t.get("player_marking3");i>a&&i>o?this.currentIndex=0:a>i&&a>o?this.currentIndex=1:o>i&&o>a&&(this.currentIndex=2),this.setStoryValue()}ngOnInit(){}getCurrentMarking(){return this.markings[this.calcIndex()]}moveBackwards(){this.currentIndex-=1,this.currentIndex<0&&(this.currentIndex=2),this.setStoryValue()}moveForwards(){this.currentIndex+=1,this.setStoryValue()}calcIndex(){return Math.abs(this.currentIndex)%3}setStoryValue(){0==this.calcIndex()&&(this.storyService.call("player_set_marking1",[4]),this.storyService.call("player_set_marking2",[0]),this.storyService.call("player_set_marking3",[0])),1==this.calcIndex()&&(this.storyService.call("player_set_marking1",[0]),this.storyService.call("player_set_marking2",[4]),this.storyService.call("player_set_marking3",[0])),2==this.calcIndex()&&(this.storyService.call("player_set_marking1",[0]),this.storyService.call("player_set_marking2",[0]),this.storyService.call("player_set_marking3",[4]))}}return e.\u0275fac=function(t){return new(t||e)(G(n4),G(ua))},e.\u0275cmp=a1({type:e,selectors:[["app-marking-menu"]],inputs:{recent:"recent"},decls:19,vars:12,consts:[["id","marking-menu",3,"ngClass"],[1,"content"],[1,"given"],[1,"not-special"],[1,"special"],["class","tip",4,"ngIf"],[1,"marking-container"],[1,"name-box"],["class","arrow arrow-left",3,"click",4,"ngIf"],[1,"marking-name"],["class","arrow arrow-right",3,"click",4,"ngIf"],[1,"description"],[4,"ngFor","ngForOf"],["id","old-anchor",1,"old"],[1,"tip"],[1,"arrow","arrow-left",3,"click"],[1,"fa-lg",3,"icon"],[1,"arrow","arrow-right",3,"click"]],template:function(t,r){1&t&&(F(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"span",3),a2(5,"You've been given a\xa0"),R(),F(6,"span",4),a2(7,"Marking"),R()(),o2(8,c02,2,0,"div",5),R(),F(9,"div",6),g2(10,"div"),R(),F(11,"div",7),o2(12,l02,2,1,"div",8),F(13,"div",9),a2(14),R(),o2(15,C02,2,1,"div",10),R(),F(16,"div",11),o2(17,u02,2,1,"p",12),R(),g2(18,"div",13),R()()),2&t&&(T("ngClass",o6(9,f02,!r.recent,r.recent)),I(8),T("ngIf",r.recent),I(2),O4("marking ",r.getCurrentMarking().imageClass,""),I(2),T("ngIf",r.recent),I(2),D1(r.getCurrentMarking().kind),I(1),T("ngIf",r.recent),I(2),T("ngForOf",r.getCurrentMarking().description))},dependencies:[T3,ce,O3,H4],styles:["#marking-menu[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-around;height:calc(100vh - 80px);min-height:555px}#marking-menu[_ngcontent-%COMP%]   .given[_ngcontent-%COMP%]{font-size:1.2em;text-align:center}#marking-menu[_ngcontent-%COMP%]   .not-special[_ngcontent-%COMP%]{display:block}#marking-menu[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.9em;text-align:center;min-height:219px}#marking-menu[_ngcontent-%COMP%]   .name-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:stretch;color:var(--main);width:100%}#marking-menu[_ngcontent-%COMP%]   .name-box[_ngcontent-%COMP%]   .marking-name[_ngcontent-%COMP%]{flex:1;font-size:40px;text-align:center;font-weight:700;font-family:Quattrocento,Georgia,Times New Roman,Times,serif}#marking-menu[_ngcontent-%COMP%]   .name-box[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{font-size:1.6em;cursor:pointer;flex:0;min-width:40px;min-height:40px;text-align:center;line-height:40px;transition:transform .1s}#marking-menu[_ngcontent-%COMP%]   .name-box[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]:hover{transform:scale(1.2)}#marking-menu[_ngcontent-%COMP%]   .marking-container[_ngcontent-%COMP%]{min-width:240px;min-height:235px;display:flex;justify-content:center;align-items:center;flex:0}#marking-menu[_ngcontent-%COMP%]   .marking-vilitaris[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/marking1.png);width:240px;height:230px}#marking-menu[_ngcontent-%COMP%]   .marking-vilitaris--Union[_ngcontent-%COMP%]{background-position:0 0}#marking-menu[_ngcontent-%COMP%]   .marking-bellio[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/marking2.png);width:224px;height:235px}#marking-menu[_ngcontent-%COMP%]   .marking-bellio--Marking-Bellio[_ngcontent-%COMP%]{background-position:0 0}#marking-menu[_ngcontent-%COMP%]   .marking-niavit[_ngcontent-%COMP%]{background-image:url(/cotm4/assets/images/marking3.png);width:224px;height:235px}#marking-menu[_ngcontent-%COMP%]   .marking-niavit--Niavit-Markig[_ngcontent-%COMP%]{background-position:0 0}",".old[_ngcontent-%COMP%]{opacity:.5}a[_ngcontent-%COMP%]{cursor:pointer}.special[_ngcontent-%COMP%]{font-size:1.4em;color:var(--main)}.not-special[_ngcontent-%COMP%]{font-size:1em}.tip[_ngcontent-%COMP%]{font-size:.8em;color:var(--secondary-text);text-align:center}.spinner[_ngcontent-%COMP%]{font-size:2em;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),e})();const{isArray:h02}=Array,{getPrototypeOf:p02,prototype:m02,keys:g02}=Object;function L02(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function V02(...e){const n=function dy(e){return v(_n(e))?e.pop():void 0}(e),{args:t,keys:r}=function v02(e){if(1===e.length){const n=e[0];if(h02(n))return{args:n,keys:null};if(function M02(e){return e&&"object"==typeof e&&p02(e)===m02}(n)){const t=g02(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}(e),i=new N(a=>{const{length:o}=t;if(!o)return void a.complete();const s=new Array(o);let c=o,l=o;for(let C=0;C<o;C++){let u=!1;z3(t[C]).subscribe(F2(a,f=>{u||(u=!0,l--),s[C]=f},()=>c--,void 0,()=>{(!c||!u)&&(l||a.next(r?L02(r,s):s),a.complete())}))}});return n?i.pipe(bL(n)):i}let $L=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return e.\u0275fac=function(t){return new(t||e)(G(u4),G(U1))},e.\u0275dir=z2({type:e}),e})(),pe=(()=>{class e extends $L{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=H1(e)))(r||e)}}(),e.\u0275dir=z2({type:e,features:[$2]}),e})();const i4=new x2("NgValueAccessor"),H02={provide:i4,useExisting:t1(()=>cn),multi:!0},z02=new x2("CompositionEventMode");let cn=(()=>{class e extends $L{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _02(){const e=se()?se().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return e.\u0275fac=function(t){return new(t||e)(G(u4),G(U1),G(z02,8))},e.\u0275dir=z2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&b2("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[c1([H02]),$2]}),e})();const F1=new x2("NgValidators"),$4=new x2("NgAsyncValidators");function rV(e){return null!=e}function iV(e){return Ot(e)?F5(e):e}function aV(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function oV(e,n){return n.map(t=>t(e))}function sV(e){return e.map(n=>function w02(e){return!e.validate}(n)?n:t=>n.validate(t))}function fa(e){return null!=e?function cV(e){if(!e)return null;const n=e.filter(rV);return 0==n.length?null:function(t){return aV(oV(t,n))}}(sV(e)):null}function da(e){return null!=e?function lV(e){if(!e)return null;const n=e.filter(rV);return 0==n.length?null:function(t){return V02(oV(t,n).map(iV)).pipe(P1(aV))}}(sV(e)):null}function CV(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function ha(e){return e?Array.isArray(e)?e:[e]:[]}function Cn(e,n){return Array.isArray(e)?e.includes(n):e===n}function dV(e,n){const t=ha(n);return ha(e).forEach(i=>{Cn(t,i)||t.push(i)}),t}function hV(e,n){return ha(n).filter(t=>!Cn(e,t))}class pV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=fa(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=da(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class K1 extends pV{get formDirective(){return null}get path(){return null}}class q4 extends pV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let gV=(()=>{class e extends class mV{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(G(q4,2))},e.\u0275dir=z2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&T4("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[$2]}),e})();const E5="VALID",fn="INVALID",m6="PENDING",P5="DISABLED";function MV(e){return Array.isArray(e)?fa(e):e||null}function LV(e){return Array.isArray(e)?da(e):e||null}function dn(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function k5(e,n){(function Va(e,n){const t=function uV(e){return e._rawValidators}(e);null!==n.validator?e.setValidators(CV(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=function fV(e){return e._rawAsyncValidators}(e);null!==n.asyncValidator?e.setAsyncValidators(CV(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();mn(n._rawValidators,i),mn(n._rawAsyncValidators,i)})(e,n),n.valueAccessor.writeValue(e.value),e.disabled&&n.valueAccessor.setDisabledState?.(!0),function I02(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&_V(e,n)})}(e,n),function R02(e,n){const t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function F02(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&_V(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function O02(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function mn(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function _V(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function wV(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function xV(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const K02={provide:q4,useExisting:t1(()=>za)},PV=(()=>Promise.resolve(null))();let za=(()=>{class e extends q4{constructor(t,r,i,a,o){super(),this._changeDetectorRef=o,this.control=new class extends class HV{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=t,this._composedValidatorFn=MV(this._rawValidators),this._composedAsyncValidatorFn=LV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===E5}get invalid(){return this.status===fn}get pending(){return this.status==m6}get disabled(){return this.status===P5}get enabled(){return this.status!==P5}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=MV(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=LV(n)}addValidators(n){this.setValidators(dV(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(dV(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(hV(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(hV(n,this._rawAsyncValidators))}hasValidator(n){return Cn(this._rawValidators,n)}hasAsyncValidator(n){return Cn(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=m6,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=P5,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=E5,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===E5||this.status===m6)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?P5:E5}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=m6,this._hasOwnPendingAsyncValidator=!0;const t=iV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Q2,this.statusChanges=new Q2}_calculateStatus(){return this._allControlsDisabled()?P5:this.errors?fn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(m6)?m6:this._anyControlsHaveStatus(fn)?fn:E5}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){dn(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}}{constructor(n=null,t,r){super(function va(e){return(dn(e)?e.validators:e)||null}(t),function Ma(e,n){return(dn(n)?n.asyncValidators:e)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dn(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=xV(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){wV(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){wV(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){xV(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},this._registered=!1,this.update=new Q2,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Ha(e,n){if(!n)return null;let t,r,i;return Array.isArray(n),n.forEach(a=>{a.constructor===cn?t=a:function W02(e){return Object.getPrototypeOf(e.constructor)===pe}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function ya(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){k5(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){PV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&function cr(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}(r);PV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function hn(e,n){return[...n.path,e]}(t,this._parent):[t]}}return e.\u0275fac=function(t){return new(t||e)(G(K1,9),G(F1,10),G($4,10),G(i4,10),G(TC,8))},e.\u0275dir=z2({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c1([K02]),$2,i3]}),e})(),AV=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p3({type:e}),e.\u0275inj=t3({}),e})(),M72=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p3({type:e}),e.\u0275inj=t3({imports:[AV]}),e})(),L72=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p3({type:e}),e.\u0275inj=t3({imports:[M72]}),e})();const XV=function(e,n){return{old:e,recent:n}};let y72=(()=>{class e{constructor(t){this.storyService=t,this.recent=!1,this.randomizeIcon=ih,this.firstnames=["Afonso","Xavier","Jo\xe3o","Ivo","Elias","Reinaldo","Marcelo","Luciano","Ricardo","Rog\xe9rio","Marta","Carla","Sandra","Ana","Marcela","Luciana","Erica","Andressa","Let\xedcia","Suzana"],this.lastnames=["Souza","Silva","Alves","Pereira","Carvalho","Jacinto","Torres","Schmidt","Weber","Abel"],this.firstName="",this.lastName="",this.randomizeFirstName(),this.randomizeLastName(),this.saveNames()}ngOnInit(){}onFirstNameChange(){this.saveNames()}onLastNameChange(){this.saveNames()}randomizeFirstName(){let t=this.firstName;for(;this.firstName==t;){let r=Math.floor(Math.random()*this.firstnames.length);this.firstName=this.firstnames[r]}this.onFirstNameChange()}randomizeLastName(){let t=this.lastName;for(;this.lastName==t;){let r=Math.floor(Math.random()*this.lastnames.length);this.lastName=this.lastnames[r]}this.onLastNameChange()}saveNames(){this.storyService.call("player_set_first_name",[this.firstName]),this.storyService.call("player_set_last_name",[this.lastName])}}return e.\u0275fac=function(t){return new(t||e)(G(n4))},e.\u0275cmp=a1({type:e,selectors:[["app-character-name-menu"]],inputs:{recent:"recent"},decls:14,vars:14,consts:[["id","name-menu",3,"ngClass"],["for","firstname"],["id","firstname","type","text",3,"ngModel","disabled","ngModelChange","change"],[3,"icon","click"],["for","lastname"],["id","lastname","type","text",3,"ngModel","disabled","ngModelChange","change"],["id","old-anchor",3,"ngClass"]],template:function(t,r){1&t&&(F(0,"div",0)(1,"p"),a2(2,"Who are you?"),R(),F(3,"label",1),a2(4,"First name:"),R(),F(5,"div")(6,"input",2),b2("ngModelChange",function(a){return r.firstName=a})("change",function(){return r.onFirstNameChange()}),R(),F(7,"fa-icon",3),b2("click",function(){return r.randomizeFirstName()}),R()(),F(8,"label",4),a2(9,"Last name:"),R(),F(10,"div")(11,"input",5),b2("ngModelChange",function(a){return r.lastName=a})("change",function(){return r.onLastNameChange()}),R(),F(12,"fa-icon",3),b2("click",function(){return r.randomizeLastName()}),R()(),g2(13,"div",6),R()),2&t&&(T("ngClass",o6(8,XV,!r.recent,r.recent)),I(6),T("ngModel",r.firstName)("disabled",!r.recent),I(1),T("icon",r.randomizeIcon),I(4),T("ngModel",r.lastName)("disabled",!r.recent),I(1),T("icon",r.randomizeIcon),I(1),T("ngClass",o6(11,XV,!r.recent,r.recent)))},dependencies:[T3,H4,cn,gV,za],styles:["#name-menu[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:35px;line-height:30px;color:var(--analog1);font-size:1em;font-weight:700;padding:21px;box-sizing:border-box;border-radius:4px;background-color:var(--background);border:1px solid var(--background-low-contrast);margin-bottom:10px;font-family:inherit}#name-menu[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative}#name-menu[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9em}#name-menu[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:1.5em;cursor:pointer;position:absolute;right:10px;top:1px}#name-menu.old[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{display:none}#name-menu.old[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:var(--background)}",".old[_ngcontent-%COMP%]{opacity:.5}a[_ngcontent-%COMP%]{cursor:pointer}.special[_ngcontent-%COMP%]{font-size:1.4em;color:var(--main)}.not-special[_ngcontent-%COMP%]{font-size:1em}.tip[_ngcontent-%COMP%]{font-size:.8em;color:var(--secondary-text);text-align:center}.spinner[_ngcontent-%COMP%]{font-size:2em;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),e})();function H72(e,n){if(1&e&&(F(0,"div")(1,"div",3),a2(2,"Take your time"),R(),F(3,"div",4),a2(4,"While choices marked with a "),g2(5,"fa-icon",5),a2(6," will never advance the story, they can still have consequences, positive and negative."),R()()),2&e){const t=r2();I(5),T("icon",t.exploreIcon)}}function _72(e,n){if(1&e&&(F(0,"div")(1,"div",3),a2(2,"Feel free to explore"),R(),F(3,"div",4),a2(4,"Only choices marked with a "),g2(5,"fa-icon",5),a2(6," can advance the story."),R()()),2&e){const t=r2();I(5),T("icon",t.advanceIcon)}}function z72(e,n){}function b72(e,n){1&e&&o2(0,z72,0,0,"ng-template")}function S72(e,n){if(1&e&&(F(0,"div")(1,"div",3),a2(2,"Learn more about yourself"),R(),F(3,"div",4),a2(4,"Choices marked with a "),o2(5,b72,1,0,null,6),a2(6," are just thoughts. Use them to build your character."),R()()),2&e){r2();const t=e6(8);I(5),T("ngIf",!1)("ngIfElse",t)}}function w72(e,n){1&e&&(F(0,"div")(1,"div",4),a2(2,"You can hail a cab from the street to visit places further than walking distance."),R()())}function x72(e,n){1&e&&(F(0,"div")(1,"div",4),a2(2,"Read your messages to unlock more choices and progress."),R()())}function D72(e,n){1&e&&(F(0,"div")(1,"div",4),a2(2,"Active checks cannot be retried, make sure you save before an important choice. Or roll with the punches, the story will not end if you fail, just follow a different path."),R()())}function N72(e,n){1&e&&g2(0,"img",7)}const E72=function(e){return{old:e}};let P72=(()=>{class e{constructor(){this.recent=!1,this.command="",this.exploreIcon=k8,this.advanceIcon=Ld,this.thoughtAdvanceIcon=Yf}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a1({type:e,selectors:[["app-tutorial-box"]],inputs:{recent:"recent",command:"command"},decls:9,vars:9,consts:[["id","tutorial-box",3,"ngClass"],[4,"ngIf"],["thoughtAdvanceIcon",""],[1,"title"],[1,"explanation"],[3,"icon"],[4,"ngIf","ngIfElse"],["src","/cotm4/assets/images/thought-bubble.png",2,"margin","0 5px","transform","translateY(5px)"]],template:function(t,r){1&t&&(F(0,"div",0),o2(1,H72,7,1,"div",1),o2(2,_72,7,1,"div",1),o2(3,S72,7,2,"div",1),o2(4,w72,3,0,"div",1),o2(5,x72,3,0,"div",1),o2(6,D72,3,0,"div",1),o2(7,N72,1,0,"ng-template",null,2,o5),R()),2&t&&(T("ngClass",C3(7,E72,!r.recent)),I(1),T("ngIf","[tutorial:explore_tip]"==r.command),I(1),T("ngIf","[tutorial:continue_tip]"==r.command),I(1),T("ngIf","[tutorial:thought_tip]"==r.command),I(1),T("ngIf","[tutorial:cab]"==r.command),I(1),T("ngIf","[tutorial:phone]"==r.command),I(1),T("ngIf","[tutorial:active_check]"==r.command))},dependencies:[T3,O3,H4],styles:["#tutorial-box[_ngcontent-%COMP%]{background-color:#222;width:100%;min-height:100px;display:flex;justify-content:center;align-items:center;flex-direction:column;box-sizing:border-box;padding:10px 14px 14px}#tutorial-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}#tutorial-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--complementary);font-size:1.1em;display:none}",".old[_ngcontent-%COMP%]{opacity:.5}a[_ngcontent-%COMP%]{cursor:pointer}.special[_ngcontent-%COMP%]{font-size:1.4em;color:var(--main)}.not-special[_ngcontent-%COMP%]{font-size:1em}.tip[_ngcontent-%COMP%]{font-size:.8em;color:var(--secondary-text);text-align:center}.spinner[_ngcontent-%COMP%]{font-size:2em;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),e})(),k72=(()=>{class e{constructor(){this.loadingIcon=Ad}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a1({type:e,selectors:[["app-loader"]],decls:3,vars:1,consts:[["id","loader"],[1,"spinner"],[3,"icon"]],template:function(t,r){1&t&&(F(0,"div",0)(1,"div",1),g2(2,"fa-icon",2),R()()),2&t&&(I(2),T("icon",r.loadingIcon))},dependencies:[H4],styles:["#loader[_ngcontent-%COMP%]{width:100vw;height:100vh;display:flex;justify-content:center;align-items:center}",".old[_ngcontent-%COMP%]{opacity:.5}a[_ngcontent-%COMP%]{cursor:pointer}.special[_ngcontent-%COMP%]{font-size:1.4em;color:var(--main)}.not-special[_ngcontent-%COMP%]{font-size:1em}.tip[_ngcontent-%COMP%]{font-size:.8em;color:var(--secondary-text);text-align:center}.spinner[_ngcontent-%COMP%]{font-size:2em;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),e})();function A72(e,n){1&e&&g2(0,"app-loader")}function T72(e,n){if(1&e){const t=I1();F(0,"app-sidebar",4),b2("onShowStats",function(){return C1(t),u1(r2().showStats())})("onUndo",function(){return C1(t),u1(r2().undo())})("onShowStatsDebug",function(){return C1(t),u1(r2().showStatsDebug())})("onRestart",function(){return C1(t),u1(r2().restart())})("onSave",function(){return C1(t),u1(r2().save())})("onInventory",function(){return C1(t),u1(r2().inventory())})("onMessages",function(){return C1(t),u1(r2().messages())}),R()}if(2&e){const t=r2();T("saveState$",t.saveState$)("messageNotifications$",t.messageNotifications$)("inventoryNotifications",t.inventoryNotifications)}}function O72(e,n){if(1&e&&g2(0,"app-paragraph",18),2&e){const t=r2(),r=t.$implicit,i=t.index,a=r2(2).$implicit;T("text",r.text)("voice",r.voice)("className",r.className)("difficulty",r.difficulty)("success",r.success)("recent",a.recent&&(0!=i||"YOU"!=r.voice))}}function I72(e,n){1&e&&g2(0,"app-marking-menu",19),2&e&&T("recent",r2(3).$implicit.recent)}function F72(e,n){if(1&e&&g2(0,"app-stats-menu",20),2&e){const t=r2(3).$implicit,r=r2(2);T("recent",t.recent)("maxStats",5)("minStats",1)("totalToDistribute",6)("informationMode",r.informationMode)}}function R72(e,n){1&e&&g2(0,"app-character-name-menu",19),2&e&&T("recent",r2(3).$implicit.recent)}const B72=function(e){return{old:e}};function j72(e,n){if(1&e&&(F(0,"div",21),g2(1,"div",22)(2,"div",23)(3,"div",24),R()),2&e){const t=r2(3).$implicit;T("ngClass",C3(1,B72,!t.recent))}}function W72(e,n){if(1&e&&g2(0,"app-tutorial-box",25),2&e){const t=r2().$implicit;T("recent",r2(2).$implicit.recent)("command",t.text.trim())}}function U72(e,n){if(1&e){const t=I1();F(0,"app-choice",26),b2("onChoose",function(i){return C1(t),u1(r2(5).chooseChoiceIndex(i))}),R()}if(2&e){const t=r2().$implicit,r=r2(2).$implicit;T("index",t.index)("isContinue",!0)("recent",r.recent)}}function G72(e,n){if(1&e){const t=I1();F(0,"app-choice",27),b2("onChoose",function(i){return C1(t),u1(r2(5).chooseChoiceIndex(i))}),R()}if(2&e){const t=r2().$implicit,r=r2(2).$implicit;T("index",t.index)("text",t.text)("visited",t.visited)("recent",r.recent)("choiceKinds",t.choiceKinds)}}function $72(e,n){if(1&e){const t=I1();F(0,"app-choice",28),b2("onChoose",function(i){return C1(t),u1(r2(5).chooseChoiceIndex(i))}),R()}if(2&e){const t=r2().$implicit,r=r2(2).$implicit;T("index",t.index)("text",t.text)("visited",t.visited)("box",t.box)("recent",r.recent)("choiceKinds",t.choiceKinds)}}function q72(e,n){if(1&e){const t=I1();F(0,"app-choice",29),b2("onChoose",function(i){return C1(t),u1(r2(5).chooseChoiceIndex(i))}),R()}if(2&e){const t=r2().$implicit,r=r2(2).$implicit;T("index",t.index)("text",t.text)("visited",t.visited)("stat",t.stat)("difficulty",t.difficulty)("recent",r.recent)("choiceKinds",t.choiceKinds)}}function K72(e,n){if(1&e&&(o2(0,O72,1,6,"app-paragraph",9),o2(1,I72,1,1,"app-marking-menu",10),o2(2,F72,1,5,"app-stats-menu",11),o2(3,R72,1,1,"app-character-name-menu",10),o2(4,j72,4,3,"div",12),o2(5,W72,1,2,"app-tutorial-box",13),o2(6,U72,1,3,"app-choice",14),o2(7,G72,1,5,"app-choice",15),o2(8,$72,1,6,"app-choice",16),o2(9,q72,1,7,"app-choice",17)),2&e){const t=n.$implicit;T("ngIf","paragraph"==t.kind),I(1),T("ngIf","command"==t.kind&&t.text.trim().toLowerCase().startsWith("[marking_menu:")),I(1),T("ngIf","command"==t.kind&&"[stats_menu]"==t.text.trim().toLowerCase()),I(1),T("ngIf","command"==t.kind&&"[naming_menu]"==t.text.trim().toLowerCase()),I(1),T("ngIf","command"==t.kind&&"[divider]"==t.text.trim().toLowerCase()),I(1),T("ngIf","command"==t.kind&&t.text.trim().toLowerCase().startsWith("[tutorial:")),I(1),T("ngIf","continue_choice"==t.kind),I(1),T("ngIf","simple_choice"==t.kind),I(1),T("ngIf","contextual_choice"==t.kind),I(1),T("ngIf","active_stat_check_choice"==t.kind)}}function Y72(e,n){if(1&e&&o2(0,K72,10,10,"ng-template",7),2&e){const t=r2().$implicit,r=r2(2);T("ngForOf",t.items)("ngForTrackBy",r.trackById)}}function Q72(e,n){if(1&e&&(F(0,"div",8),o2(1,Y72,1,2,null,1),R()),2&e){const t=n.$implicit;I(1),T("ngIf",t.visible)}}function J72(e,n){if(1&e&&(F(0,"div",5)(1,"div",6)(2,"span"),a2(3,"Children"),R(),F(4,"span"),a2(5," of the "),R(),F(6,"span"),a2(7,"Moon"),R()(),o2(8,Q72,2,1,"ng-template",7),I4(9,"async"),R()),2&e){const t=r2();I(8),T("ngForOf",F4(9,2,t.groups$))("ngForTrackBy",t.trackById)}}const z4=function YE(e,...n){const{state:t,config:r}=function WE(...e){const n={config:{},state:{}};for(const{config:t,props:r}of e)Object.assign(n.config,t),Object.assign(n.state,r);return n}(...n),{name:i}=e;return new KE({name:i,state:t,config:r})}({name:"storyStore"},sP());let ey=(()=>{class e{constructor(t){this.all$=z4.pipe(function mP(e={}){const{ref:{entitiesKey:n,idsKey:t}=W2}=e;return m(function v5(e){return Nu((n,t)=>n[e]===t[e])}(n),P1(r=>r[t].map(i=>r[n][i])))}()),this.added$=new Q2,this.storyGroupSubscription=t.getStoryGroups().subscribe(r=>{this.addGroup({visible:!1,recent:!0,...r})})}ngOnDestroy(){this.storyGroupSubscription.unsubscribe()}addGroup(t){z4.update(function Tu(e,n={}){return function(t,r){const{prepend:i=!1,ref:a=W2}=n,{entitiesKey:o,idsKey:s}=a,c=function g5(e,n){return e.config[n.idKeyRef]}(r,a),l=C6(e);if(!l.length)return t;(function CP(e,n,t,r){e.forEach(i=>{const a=i[n];if(t[r][a])throw Error(`Entity already exists. ${n} ${a}`)})})(l,c,t,o),function uP(e,n){const t=new Set;e.forEach(r=>{const i=r[n];if(t.has(i))throw Error(`Duplicate entity id provided. ${n} ${i}`);t.add(i)})}(l,c);const{ids:C,asObject:u}=_8(l,c);return Object.assign({},t,{[o]:Object.assign({},t[o],u),[s]:i?[...C,...t[s]]:[...t[s],...C]})}}(t)),this.added$.emit(t)}clearNonRecent(){z4.update(function cP(e,n={}){return function(r,i){const a=function z8(e,n,t){const{idsKey:r,entitiesKey:i}=n,a=e[i];return e[r].filter(o=>t(a[o]))}(r,n.ref||W2,e);return a.length?Er(a,n)(r,i):r}}(t=>0==t.recent))}clearAll(){z4.update(function lP(e={}){return function(t){const{ref:{idsKey:r,entitiesKey:i}=W2}=e;return Object.assign({},t,{[i]:{},[r]:[]})}}())}updateGroup(t,r){z4.update(b8(t,r))}updateAllGroups(t){z4.update(function pP(e,n={}){return function(t,r){const{ref:{idsKey:i}=W2}=n;return b8(t[i],e,n)(t,r)}}(t))}deleteLast(){return z4.pipe(Ru(),V8(1)).pipe(P1(t=>(t&&z4.update(Er(t.id)),t??null)))}updateLast(t){return z4.pipe(Ru(),V8(1)).pipe(P1(r=>{r&&this.updateGroup(r.id,t)}))}}return e.\u0275fac=function(t){return new(t||e)(P2(n4))},e.\u0275prov=B2({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Z72=(()=>{class e{constructor(t,r,i,a,o,s){this.dialog=t,this.phoneService=r,this.storyService=i,this.storyStore=a,this.npcService=o,this.assetsService=s,this.title="cotm-front2",this.saveState$=new L8(e4.Idle),this.bgClass=null,this.soundLib={"check-start":new Howl({src:["/cotm4/assets/sounds/check-start.wav"],loop:!1,volume:1}),"check-failure":new Howl({src:["/cotm4/assets/sounds/check-failure.wav"],loop:!1,volume:1}),"check-success":new Howl({src:["/cotm4/assets/sounds/check-success.wav"],loop:!1,volume:1.5})},this.informationMode=t4.CharacterCreation,this.saveStack=[],this.inventoryItems=[],this.inventoryNotifications=0,this.groups$=a.all$,this.storyGroupSubscription=a.added$.subscribe(c=>this.onGroupAdded(c)),this.loading$=s.loading$,this.messageNotifications$=r.newMessages$}ngOnInit(){let t=!0;this.storyService.bindExternalFunction("on_inventory_update",r=>{}),this.load(),this.syncInventory(),t=!1}ngOnDestroy(){this.storyGroupSubscription.unsubscribe()}onGroupAdded(t){var r=this;return l6(function*(){let i=0,a=null;for(let o of t.items)if("paragraph"==o.kind){if(i||(i=o.statCheck?900:0,o.statCheck&&(r.bgClass="tot",a=o.success)),(o.trainOfThought==p6.Start||o.trainOfThought==p6.End)&&(r.bgClass="tot"==r.bgClass?null:"tot"),o.voice){let s=r.npcService.getFullName(o.voice);o.voice=s.voice,o.className=s.className}if(o.meets)for(let s of o.meets)r.npcService.meet(s)}0==i?(r.storyStore.updateGroup(t.id,o=>({...o,visible:!0})),r.scrollToLatest()):(r.soundLib["check-start"].play(),yield r.sleep(i),r.storyStore.updateGroup(t.id,o=>({...o,visible:!0})),!0===a?(r.soundLib["check-success"].play(),r.bgClass="success"):!1===a&&(r.soundLib["check-failure"].play(),r.bgClass="failure"),r.scrollToLatest(),yield r.sleep(800),r.bgClass=null)})()}undo(){var t=this;return l6(function*(){let r=t.saveStack[t.saveStack.length-2];!r||(yield Bu(t.storyStore.deleteLast()),yield Bu(t.storyStore.deleteLast()),t.storyService.load(r),t.saveStack.pop(),t.scrollToLatest(),t.syncInventory())})()}restart(){var r,t=this;this.dialog.open(la,{windowClass:"popup",enableClose:!1,closeButton:!1,data:{title:"Restart game?",body:"You will start the story from the begining.",accept:(r=l6(function*(){t.storyStore.clearAll(),t.storyService.restart(),t.saveStack=[],t.syncInventory()}),function(){return r.apply(this,arguments)}),deny:()=>{}}})}save(){var r,t=this;this.saveState$.value==e4.Idle&&(this.saveState$.next(e4.Saving),this.dialog.open(la,{windowClass:"popup",enableClose:!1,closeButton:!1,data:{title:"Are you sure you want to save?",body:"This will overwrite any previous save.",accept:(r=l6(function*(){t.npcService.save();let i=t.saveStack[t.saveStack.length-1];i?(localStorage.setItem("save",i.getJson()),localStorage.setItem("idx",i.getChoiceIdx().toString())):(localStorage.removeItem("save"),localStorage.removeItem("idx")),t.saveState$.next(e4.Saved),yield t.sleep(2e3),t.saveState$.next(e4.Idle)}),function(){return r.apply(this,arguments)}),deny:()=>{this.saveState$.next(e4.Idle)}}}))}load(){let t=localStorage.getItem("save"),r=localStorage.getItem("idx");if(null!=t&&null!=r){let i=new WL(t,parseInt(r));this.npcService.load(),this.saveStack.push(i),this.storyService.load(i),this.syncInventory()}else this.storyService.continue()}inventory(){this.syncInventory(),this.dialog.open(bn2,{data:{items:this.inventoryItems}}).afterClosed$.subscribe(t=>{this.storyService.hasRefresh()&&this.chooseChoiceIndex(0)})}syncInventory(){this.inventoryItems=[...this.storyService.get("player_inventory").value]}messages(){this.dialog.open(kn2,{windowClass:"popup",data:{}}).afterClosed$.subscribe(r=>{this.storyService.hasRefresh()&&this.chooseChoiceIndex(0)})}showStats(){this.dialog.open(UL,{data:{debug:!1,remainingStats:0}})}showStatsDebug(){this.dialog.open(UL,{data:{debug:!0,remainingStats:null}})}chooseChoiceIndex(t){this.saveStack.push(this.storyService.save(t)),this.storyStore.updateAllGroups(r=>({...r,recent:!1})),this.storyService.chooseChoiceIndex(t),this.storyService.continue()}trackById(t,r){return r&&r.id}onLoadComplete(){}sleep(t){return new Promise(r=>setTimeout(r,t))}scrollToLatest(){window.setTimeout(()=>{let t=Array.from(document.querySelectorAll(".old")).reverse();for(let r of t){console.log(r),window.scrollTo({top:window.scrollY+r.getBoundingClientRect().top,behavior:"smooth"});break}},0)}}return e.\u0275fac=function(t){return new(t||e)(G(ca),G(Ca),G(n4),G(ey),G(GL),G(ua))},e.\u0275cmp=a1({type:e,selectors:[["app-root"]],decls:7,vars:12,consts:[["id","app"],[4,"ngIf"],[3,"saveState$","messageNotifications$","inventoryNotifications","onShowStats","onUndo","onShowStatsDebug","onRestart","onSave","onInventory","onMessages",4,"ngIf"],["class","content",4,"ngIf"],[3,"saveState$","messageNotifications$","inventoryNotifications","onShowStats","onUndo","onShowStatsDebug","onRestart","onSave","onInventory","onMessages"],[1,"content"],[1,"title"],["ngFor","",3,"ngForOf","ngForTrackBy"],[1,"group"],[3,"text","voice","className","difficulty","success","recent",4,"ngIf"],[3,"recent",4,"ngIf"],[3,"recent","maxStats","minStats","totalToDistribute","informationMode",4,"ngIf"],["class","divider",3,"ngClass",4,"ngIf"],[3,"recent","command",4,"ngIf"],[3,"index","isContinue","recent","onChoose",4,"ngIf"],[3,"index","text","visited","recent","choiceKinds","onChoose",4,"ngIf"],[3,"index","text","visited","box","recent","choiceKinds","onChoose",4,"ngIf"],[3,"index","text","visited","stat","difficulty","recent","choiceKinds","onChoose",4,"ngIf"],[3,"text","voice","className","difficulty","success","recent"],[3,"recent"],[3,"recent","maxStats","minStats","totalToDistribute","informationMode"],[1,"divider",3,"ngClass"],[1,"left"],[1,"mid"],[1,"right"],[3,"recent","command"],[3,"index","isContinue","recent","onChoose"],[3,"index","text","visited","recent","choiceKinds","onChoose"],[3,"index","text","visited","box","recent","choiceKinds","onChoose"],[3,"index","text","visited","stat","difficulty","recent","choiceKinds","onChoose"]],template:function(t,r){1&t&&(F(0,"div",0),o2(1,A72,1,0,"app-loader",1),I4(2,"async"),o2(3,T72,1,3,"app-sidebar",2),I4(4,"async"),o2(5,J72,10,4,"div",3),I4(6,"async"),R()),2&t&&(Ft(r.bgClass),I(1),T("ngIf",F4(2,6,r.loading$)),I(2),T("ngIf",!F4(4,8,r.loading$)),I(2),T("ngIf",!F4(6,10,r.loading$)))},dependencies:[T3,ce,O3,Un2,s02,d02,RL,E82,y72,P72,k72,Mr],styles:["#app[_ngcontent-%COMP%]{display:flex;justify-content:center;transition:background-color .2s ease-in;background-color:var(--background)}#app.tot[_ngcontent-%COMP%]{background-color:#777}#app.success[_ngcontent-%COMP%]{background-color:var(--success)}#app.failure[_ngcontent-%COMP%]{background-color:var(--failure)}#app[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{max-width:min(600px,82%);width:100%;max-height:100%;background-color:var(--background);box-shadow:-10px 0 0 var(--background),10px 0 0 var(--background)}#app[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2.5em;font-family:Quattrocento,Georgia,Times New Roman,Times,serif;text-align:center;margin-top:40px}#app[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:100%;height:45px;margin:20px 0;display:flex;justify-content:stretch;align-items:center}#app[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], #app[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:0;min-width:41px;min-height:39px;background-image:url(/cotm4/assets/images/divider-side.png);background-size:contain;background-repeat:no-repeat;background-position:50% 50%}#app[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{min-width:37.5px;min-height:39px;transform:scaleX(-1)}#app[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   .mid[_ngcontent-%COMP%]{flex:1;background-image:url(/cotm4/assets/images/divider-mid.png);background-size:contain;background-repeat:repeat-x;background-position:50% 50%;min-height:100%}#app[_ngcontent-%COMP%]   .divider.old[_ngcontent-%COMP%]{opacity:.5}"]}),e})(),X72=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p3({type:e}),e.\u0275inj=t3({imports:[p8,zL,L72]}),e})(),er2=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p3({type:e}),e.\u0275inj=t3({providers:[n4,GL,ua,Ca],imports:[p8]}),e})(),tr2=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p3({type:e,bootstrap:[Z72]}),e.\u0275inj=t3({providers:[ey],imports:[EE,er2,X72,zL,cn2.forRoot({confirm:{component:la},closeButton:!0,enableClose:!0,backdrop:!0,resizable:!1,draggable:!1,windowClass:"modal"})]}),e})();(function bD(){PC=!1})(),NE().bootstrapModule(tr2).catch(e=>console.error(e))},802:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.CallStack=void 0;const v=z(927),y=z(313),O=z(441),w=z(936),L=z(843),M=z(259),x=z(689),_=z(966),H=z(723),g=z(919);class k{constructor(){if(this._threadCounter=0,this._startOfRoot=x.Pointer.Null,arguments[0]instanceof O.Story)this._startOfRoot=x.Pointer.StartOf(arguments[0].rootContentContainer),this.Reset();else{let p=arguments[0];this._threads=[];for(let q of p._threads)this._threads.push(q.Copy());this._threadCounter=p._threadCounter,this._startOfRoot=p._startOfRoot.copy()}}get elements(){return this.callStack}get depth(){return this.elements.length}get currentElement(){let q=this._threads[this._threads.length-1].callstack;return q[q.length-1]}get currentElementIndex(){return this.callStack.length-1}get currentThread(){return this._threads[this._threads.length-1]}set currentThread(p){_.Debug.Assert(1==this._threads.length,"Shouldn't be directly setting the current thread when we have a stack of them"),this._threads.length=0,this._threads.push(p)}get canPop(){return this.callStack.length>1}Reset(){this._threads=[],this._threads.push(new k.Thread),this._threads[0].callstack.push(new k.Element(v.PushPopType.Tunnel,this._startOfRoot))}SetJsonToken(p,q){this._threads.length=0;let e2=p.threads;for(let n2 of e2){let t2=new k.Thread(n2,q);this._threads.push(t2)}this._threadCounter=parseInt(p.threadCounter),this._startOfRoot=x.Pointer.StartOf(q.rootContentContainer)}WriteJson(p){p.WriteObject(q=>{q.WritePropertyStart("threads"),q.WriteArrayStart();for(let e2 of this._threads)e2.WriteJson(q);q.WriteArrayEnd(),q.WritePropertyEnd(),q.WritePropertyStart("threadCounter"),q.WriteInt(this._threadCounter),q.WritePropertyEnd()})}PushThread(){let p=this.currentThread.Copy();this._threadCounter++,p.threadIndex=this._threadCounter,this._threads.push(p)}ForkThread(){let p=this.currentThread.Copy();return this._threadCounter++,p.threadIndex=this._threadCounter,p}PopThread(){if(!this.canPopThread)throw new Error("Can't pop thread");this._threads.splice(this._threads.indexOf(this.currentThread),1)}get canPopThread(){return this._threads.length>1&&!this.elementIsEvaluateFromGame}get elementIsEvaluateFromGame(){return this.currentElement.type==v.PushPopType.FunctionEvaluationFromGame}Push(p,q=0,e2=0){let n2=new k.Element(p,this.currentElement.currentPointer,!1);n2.evaluationStackHeightWhenPushed=q,n2.functionStartInOutputStream=e2,this.callStack.push(n2)}CanPop(p=null){return!!this.canPop&&(null==p||this.currentElement.type==p)}Pop(p=null){if(!this.CanPop(p))throw new Error("Mismatched push/pop in Callstack");this.callStack.pop()}GetTemporaryVariableWithName(p,q=-1){-1==q&&(q=this.currentElementIndex+1);let n2=H.tryGetValueFromMap(this.callStack[q-1].temporaryVariables,p,null);return n2.exists?n2.result:null}SetTemporaryVariable(p,q,e2,n2=-1){-1==n2&&(n2=this.currentElementIndex+1);let K=this.callStack[n2-1];if(!e2&&!K.temporaryVariables.get(p))throw new Error("Could not find temporary variable to set: "+p);let t2=H.tryGetValueFromMap(K.temporaryVariables,p,null);t2.exists&&L.ListValue.RetainListOriginsForAssignment(t2.result,q),K.temporaryVariables.set(p,q)}ContextForVariableNamed(p){return this.currentElement.temporaryVariables.get(p)?this.currentElementIndex+1:0}ThreadWithIndex(p){let q=this._threads.filter(e2=>{if(e2.threadIndex==p)return e2});return q.length>0?q[0]:null}get callStack(){return this.currentThread.callstack}get callStackTrace(){let p=new M.StringBuilder;for(let q=0;q<this._threads.length;q++){let e2=this._threads[q];p.AppendFormat("=== THREAD {0}/{1} {2}===\n",q+1,this._threads.length,q==this._threads.length-1?"(current) ":"");for(let K=0;K<e2.callstack.length;K++){p.Append(e2.callstack[K].type==v.PushPopType.Function?"  [FUNCTION] ":"  [TUNNEL] ");let t2=e2.callstack[K].currentPointer;if(!t2.isNull){if(p.Append("<SOMEWHERE IN "),null===t2.container)return g.throwNullException("pointer.container");p.Append(t2.container.path.toString()),p.AppendLine(">")}}}return p.toString()}}b.CallStack=k,function(d){class p{constructor(n2,K,t2=!1){this.evaluationStackHeightWhenPushed=0,this.functionStartInOutputStream=0,this.currentPointer=K.copy(),this.inExpressionEvaluation=t2,this.temporaryVariables=new Map,this.type=n2}Copy(){let n2=new p(this.type,this.currentPointer,this.inExpressionEvaluation);return n2.temporaryVariables=new Map(this.temporaryVariables),n2.evaluationStackHeightWhenPushed=this.evaluationStackHeightWhenPushed,n2.functionStartInOutputStream=this.functionStartInOutputStream,n2}}d.Element=p;class q{constructor(){if(this.threadIndex=0,this.previousPointer=x.Pointer.Null,this.callstack=[],arguments[0]&&arguments[1]){let n2=arguments[0],K=arguments[1];this.threadIndex=parseInt(n2.threadIndex);let t2=n2.callstack;for(let p2 of t2){let U,H2=p2,P=parseInt(H2.type),j=x.Pointer.Null,h=H2.cPath;if(typeof h<"u"){U=h.toString();let l2=K.ContentAtPath(new y.Path(U));if(j.container=l2.container,j.index=parseInt(H2.idx),null==l2.obj)throw new Error("When loading state, internal story location couldn't be found: "+U+". Has the story changed since this save data was created?");if(l2.approximate){if(null===j.container)return g.throwNullException("pointer.container");K.Warning("When loading state, exact internal story location couldn't be found: '"+U+"', so it was approximated to '"+j.container.path.toString()+"' to recover. Has the story changed since this save data was created?")}}let $=new p(P,j,!!H2.exp),f2=H2.temp;typeof f2<"u"?$.temporaryVariables=w.JsonSerialisation.JObjectToDictionaryRuntimeObjs(f2):$.temporaryVariables.clear(),this.callstack.push($)}let Y=n2.previousContentObject;if(typeof Y<"u"){let p2=new y.Path(Y.toString());this.previousPointer=K.PointerAtPath(p2)}}}Copy(){let n2=new q;n2.threadIndex=this.threadIndex;for(let K of this.callstack)n2.callstack.push(K.Copy());return n2.previousPointer=this.previousPointer.copy(),n2}WriteJson(n2){n2.WriteObjectStart(),n2.WritePropertyStart("callstack"),n2.WriteArrayStart();for(let K of this.callstack){if(n2.WriteObjectStart(),!K.currentPointer.isNull){if(null===K.currentPointer.container)return g.throwNullException("el.currentPointer.container");n2.WriteProperty("cPath",K.currentPointer.container.path.componentsString),n2.WriteIntProperty("idx",K.currentPointer.index)}n2.WriteProperty("exp",K.inExpressionEvaluation),n2.WriteIntProperty("type",K.type),K.temporaryVariables.size>0&&(n2.WritePropertyStart("temp"),w.JsonSerialisation.WriteDictionaryRuntimeObjs(n2,K.temporaryVariables),n2.WritePropertyEnd()),n2.WriteObjectEnd()}if(n2.WriteArrayEnd(),n2.WritePropertyEnd(),n2.WriteIntProperty("threadIndex",this.threadIndex),!this.previousPointer.isNull){let K=this.previousPointer.Resolve();if(null===K)return g.throwNullException("this.previousPointer.Resolve()");n2.WriteProperty("previousContentObject",K.path.toString())}n2.WriteObjectEnd()}}d.Thread=q}(k=b.CallStack||(b.CallStack={}))},904:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Choice=void 0;const v=z(313),y=z(919),O=z(522);b.Choice=class w extends O.InkObject{constructor(){super(...arguments),this.text="",this.index=0,this.threadAtGeneration=null,this.sourcePath="",this.targetPath=null,this.isInvisibleDefault=!1,this.originalThreadIndex=0}get pathStringOnChoice(){return null===this.targetPath?y.throwNullException("Choice.targetPath"):this.targetPath.toString()}set pathStringOnChoice(M){this.targetPath=new v.Path(M)}}},793:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ChoicePoint=void 0;const v=z(522),y=z(313),O=z(919);b.ChoicePoint=class w extends v.InkObject{constructor(M=!0){super(),this._pathOnChoice=null,this.hasCondition=!1,this.hasStartContent=!1,this.hasChoiceOnlyContent=!1,this.isInvisibleDefault=!1,this.onceOnly=!0,this.onceOnly=M}get pathOnChoice(){if(null!=this._pathOnChoice&&this._pathOnChoice.isRelative){let M=this.choiceTarget;M&&(this._pathOnChoice=M.path)}return this._pathOnChoice}set pathOnChoice(M){this._pathOnChoice=M}get choiceTarget(){return null===this._pathOnChoice?O.throwNullException("ChoicePoint._pathOnChoice"):this.ResolvePath(this._pathOnChoice).container}get pathStringOnChoice(){return null===this.pathOnChoice?O.throwNullException("ChoicePoint.pathOnChoice"):this.CompactPathString(this.pathOnChoice)}set pathStringOnChoice(M){this.pathOnChoice=new y.Path(M)}get flags(){let M=0;return this.hasCondition&&(M|=1),this.hasStartContent&&(M|=2),this.hasChoiceOnlyContent&&(M|=4),this.isInvisibleDefault&&(M|=8),this.onceOnly&&(M|=16),M}set flags(M){this.hasCondition=(1&M)>0,this.hasStartContent=(2&M)>0,this.hasChoiceOnlyContent=(4&M)>0,this.isInvisibleDefault=(8&M)>0,this.onceOnly=(16&M)>0}toString(){if(null===this.pathOnChoice)return O.throwNullException("ChoicePoint.pathOnChoice");return"Choice: -> "+this.pathOnChoice.toString()}}},372:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Container=void 0;const v=z(843),y=z(919),O=z(259),w=z(522),L=z(296),M=z(313),x=z(966),_=z(723),H=z(138);class g extends w.InkObject{constructor(){super(...arguments),this.name=null,this._content=[],this.namedContent=new Map,this.visitsShouldBeCounted=!1,this.turnIndexShouldBeCounted=!1,this.countingAtStartOnly=!1,this._pathToFirstLeafContent=null}get hasValidName(){return null!=this.name&&this.name.length>0}get content(){return this._content}set content(d){this.AddContent(d)}get namedOnlyContent(){let d=new Map;for(let[p,q]of this.namedContent){let e2=H.asOrThrows(q,w.InkObject);d.set(p,e2)}for(let p of this.content){let q=H.asINamedContentOrNull(p);null!=q&&q.hasValidName&&d.delete(q.name)}return 0==d.size&&(d=null),d}set namedOnlyContent(d){let p=this.namedOnlyContent;if(null!=p)for(let[q]of p)this.namedContent.delete(q);if(null!=d)for(let[,q]of d){let e2=H.asINamedContentOrNull(q);null!=e2&&this.AddToNamedContentOnly(e2)}}get countFlags(){let d=0;return this.visitsShouldBeCounted&&(d|=g.CountFlags.Visits),this.turnIndexShouldBeCounted&&(d|=g.CountFlags.Turns),this.countingAtStartOnly&&(d|=g.CountFlags.CountStartOnly),d==g.CountFlags.CountStartOnly&&(d=0),d}set countFlags(d){let p=d;(p&g.CountFlags.Visits)>0&&(this.visitsShouldBeCounted=!0),(p&g.CountFlags.Turns)>0&&(this.turnIndexShouldBeCounted=!0),(p&g.CountFlags.CountStartOnly)>0&&(this.countingAtStartOnly=!0)}get pathToFirstLeafContent(){return null==this._pathToFirstLeafContent&&(this._pathToFirstLeafContent=this.path.PathByAppendingPath(this.internalPathToFirstLeafContent)),this._pathToFirstLeafContent}get internalPathToFirstLeafContent(){let d=[],p=this;for(;p instanceof g;)p.content.length>0&&(d.push(new M.Path.Component(0)),p=p.content[0]);return new M.Path(d)}AddContent(d){if(d instanceof Array){let p=d;for(let q of p)this.AddContent(q)}else{let p=d;if(this._content.push(p),p.parent)throw new Error("content is already in "+p.parent);p.parent=this,this.TryAddNamedContent(p)}}TryAddNamedContent(d){let p=H.asINamedContentOrNull(d);null!=p&&p.hasValidName&&this.AddToNamedContentOnly(p)}AddToNamedContentOnly(d){if(x.Debug.AssertType(d,w.InkObject,"Can only add Runtime.Objects to a Runtime.Container"),H.asOrThrows(d,w.InkObject).parent=this,null===d.name)return y.throwNullException("namedContentObj.name");this.namedContent.set(d.name,d)}ContentAtPath(d,p=0,q=-1){-1==q&&(q=d.length);let e2=new L.SearchResult;e2.approximate=!1;let n2=this,K=this;for(let t2=p;t2<q;++t2){let Y=d.GetComponent(t2);if(null==n2){e2.approximate=!0;break}let p2=n2.ContentWithPathComponent(Y);if(null==p2){e2.approximate=!0;break}K=p2,n2=H.asOrNull(p2,g)}return e2.obj=K,e2}InsertContent(d,p){if(this.content.splice(p,0,d),d.parent)throw new Error("content is already in "+d.parent);d.parent=this,this.TryAddNamedContent(d)}AddContentsOfContainer(d){this.content.push(...d.content);for(let p of d.content)p.parent=this,this.TryAddNamedContent(p)}ContentWithPathComponent(d){if(d.isIndex)return d.index>=0&&d.index<this.content.length?this.content[d.index]:null;if(d.isParent)return this.parent;{if(null===d.name)return y.throwNullException("component.name");let p=_.tryGetValueFromMap(this.namedContent,d.name,null);return p.exists?H.asOrThrows(p.result,w.InkObject):null}}BuildStringOfHierarchy(){let d;if(0==arguments.length)return d=new O.StringBuilder,this.BuildStringOfHierarchy(d,0,null),d.toString();d=arguments[0];let p=arguments[1],q=arguments[2];function e2(){for(let t2=0;t2<4*p;++t2)d.Append(" ")}e2(),d.Append("["),this.hasValidName&&d.AppendFormat(" ({0})",this.name),this==q&&d.Append("  <---"),d.AppendLine(),p++;for(let K=0;K<this.content.length;++K){let t2=this.content[K];t2 instanceof g?t2.BuildStringOfHierarchy(d,p,q):(e2(),t2 instanceof v.StringValue?(d.Append('"'),d.Append(t2.toString().replace("\n","\\n")),d.Append('"')):d.Append(t2.toString())),K!=this.content.length-1&&d.Append(","),!(t2 instanceof g)&&t2==q&&d.Append("  <---"),d.AppendLine()}let n2=new Map;for(let[K,t2]of this.namedContent)this.content.indexOf(H.asOrThrows(t2,w.InkObject))>=0||n2.set(K,t2);if(n2.size>0){e2(),d.AppendLine("-- named: --");for(let[,K]of n2)x.Debug.AssertType(K,g,"Can only print out named Containers"),K.BuildStringOfHierarchy(d,p,q),d.AppendLine()}p--,e2(),d.Append("]")}}b.Container=g,function(k){let d;var p;(p=d=k.CountFlags||(k.CountFlags={}))[p.Visits=1]="Visits",p[p.Turns=2]="Turns",p[p.CountStartOnly=4]="CountStartOnly"}(g=b.Container||(b.Container={}))},517:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ControlCommand=void 0;const v=z(522);class y extends v.InkObject{constructor(w=y.CommandType.NotSet){super(),this._commandType=w}get commandType(){return this._commandType}Copy(){return new y(this.commandType)}static EvalStart(){return new y(y.CommandType.EvalStart)}static EvalOutput(){return new y(y.CommandType.EvalOutput)}static EvalEnd(){return new y(y.CommandType.EvalEnd)}static Duplicate(){return new y(y.CommandType.Duplicate)}static PopEvaluatedValue(){return new y(y.CommandType.PopEvaluatedValue)}static PopFunction(){return new y(y.CommandType.PopFunction)}static PopTunnel(){return new y(y.CommandType.PopTunnel)}static BeginString(){return new y(y.CommandType.BeginString)}static EndString(){return new y(y.CommandType.EndString)}static NoOp(){return new y(y.CommandType.NoOp)}static ChoiceCount(){return new y(y.CommandType.ChoiceCount)}static Turns(){return new y(y.CommandType.Turns)}static TurnsSince(){return new y(y.CommandType.TurnsSince)}static ReadCount(){return new y(y.CommandType.ReadCount)}static Random(){return new y(y.CommandType.Random)}static SeedRandom(){return new y(y.CommandType.SeedRandom)}static VisitIndex(){return new y(y.CommandType.VisitIndex)}static SequenceShuffleIndex(){return new y(y.CommandType.SequenceShuffleIndex)}static StartThread(){return new y(y.CommandType.StartThread)}static Done(){return new y(y.CommandType.Done)}static End(){return new y(y.CommandType.End)}static ListFromInt(){return new y(y.CommandType.ListFromInt)}static ListRange(){return new y(y.CommandType.ListRange)}static ListRandom(){return new y(y.CommandType.ListRandom)}toString(){return this.commandType.toString()}}b.ControlCommand=y,function(O){let w;var L;(L=w=O.CommandType||(O.CommandType={}))[L.NotSet=-1]="NotSet",L[L.EvalStart=0]="EvalStart",L[L.EvalOutput=1]="EvalOutput",L[L.EvalEnd=2]="EvalEnd",L[L.Duplicate=3]="Duplicate",L[L.PopEvaluatedValue=4]="PopEvaluatedValue",L[L.PopFunction=5]="PopFunction",L[L.PopTunnel=6]="PopTunnel",L[L.BeginString=7]="BeginString",L[L.EndString=8]="EndString",L[L.NoOp=9]="NoOp",L[L.ChoiceCount=10]="ChoiceCount",L[L.Turns=11]="Turns",L[L.TurnsSince=12]="TurnsSince",L[L.Random=13]="Random",L[L.SeedRandom=14]="SeedRandom",L[L.VisitIndex=15]="VisitIndex",L[L.SequenceShuffleIndex=16]="SequenceShuffleIndex",L[L.StartThread=17]="StartThread",L[L.Done=18]="Done",L[L.End=19]="End",L[L.ListFromInt=20]="ListFromInt",L[L.ListRange=21]="ListRange",L[L.ListRandom=22]="ListRandom",L[L.ReadCount=23]="ReadCount",L[L.TOTAL_VALUES=24]="TOTAL_VALUES"}(y=b.ControlCommand||(b.ControlCommand={}))},966:(A2,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Debug=void 0,function(v){function O(w,L){if(!w)throw typeof L<"u"&&console.warn(L),console.trace&&console.trace(),new Error("")}v.AssertType=function y(w,L,M){O(w instanceof L,M)},v.Assert=O}(b.Debug||(b.Debug={}))},462:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Divert=void 0;const v=z(313),y=z(927),O=z(259),w=z(522),L=z(689),M=z(372),x=z(919);class _ extends w.InkObject{constructor(g){super(),this._targetPath=null,this._targetPointer=L.Pointer.Null,this.variableDivertName=null,this.pushesToStack=!1,this.stackPushType=0,this.isExternal=!1,this.externalArgs=0,this.isConditional=!1,this.pushesToStack=!1,typeof g<"u"&&(this.pushesToStack=!0,this.stackPushType=g)}get targetPath(){if(null!=this._targetPath&&this._targetPath.isRelative){let g=this.targetPointer.Resolve();g&&(this._targetPath=g.path)}return this._targetPath}set targetPath(g){this._targetPath=g,this._targetPointer=L.Pointer.Null}get targetPointer(){if(this._targetPointer.isNull){let g=this.ResolvePath(this._targetPath).obj;if(null===this._targetPath)return x.throwNullException("this._targetPath");if(null===this._targetPath.lastComponent)return x.throwNullException("this._targetPath.lastComponent");if(this._targetPath.lastComponent.isIndex){if(null===g)return x.throwNullException("targetObj");this._targetPointer.container=g.parent instanceof M.Container?g.parent:null,this._targetPointer.index=this._targetPath.lastComponent.index}else this._targetPointer=L.Pointer.StartOf(g instanceof M.Container?g:null)}return this._targetPointer.copy()}get targetPathString(){return null==this.targetPath?null:this.CompactPathString(this.targetPath)}set targetPathString(g){this.targetPath=null==g?null:new v.Path(g)}get hasVariableTarget(){return null!=this.variableDivertName}Equals(g){let k=g;return k instanceof _&&this.hasVariableTarget==k.hasVariableTarget&&(this.hasVariableTarget?this.variableDivertName==k.variableDivertName:null===this.targetPath?x.throwNullException("this.targetPath"):this.targetPath.Equals(k.targetPath))}toString(){if(this.hasVariableTarget)return"Divert(variable: "+this.variableDivertName+")";if(null==this.targetPath)return"Divert(null)";{let g=new O.StringBuilder,k=this.targetPath.toString(),d=null;return null!=d&&(k="line "+d),g.Append("Divert"),this.isConditional&&g.Append("?"),this.pushesToStack&&g.Append(this.stackPushType==y.PushPopType.Function?" function":" tunnel"),g.Append(" -> "),g.Append(this.targetPathString),g.Append(" ("),g.Append(k),g.Append(")"),g.toString()}}}b.Divert=_},767:(A2,b)=>{var v;Object.defineProperty(b,"__esModule",{value:!0}),b.ErrorType=void 0,(v=b.ErrorType||(b.ErrorType={}))[v.Author=0]="Author",v[v.Warning=1]="Warning",v[v.Error=2]="Error"},532:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Flow=void 0;const v=z(802),y=z(936),O=z(919);b.Flow=class w{constructor(){let x=arguments[1];if(this.name=arguments[0],this.callStack=new v.CallStack(x),arguments[2]){let _=arguments[2];this.callStack.SetJsonToken(_.callstack,x),this.outputStream=y.JsonSerialisation.JArrayToRuntimeObjList(_.outputStream),this.currentChoices=y.JsonSerialisation.JArrayToRuntimeObjList(_.currentChoices);let H=_.choiceThreads;typeof H<"u"&&this.LoadFlowChoiceThreads(H,x)}else this.outputStream=[],this.currentChoices=[]}WriteJson(M){M.WriteObjectStart(),M.WriteProperty("callstack",_=>this.callStack.WriteJson(_)),M.WriteProperty("outputStream",_=>y.JsonSerialisation.WriteListRuntimeObjs(_,this.outputStream));let x=!1;for(let _ of this.currentChoices){if(null===_.threadAtGeneration)return O.throwNullException("c.threadAtGeneration");_.originalThreadIndex=_.threadAtGeneration.threadIndex,null===this.callStack.ThreadWithIndex(_.originalThreadIndex)&&(x||(x=!0,M.WritePropertyStart("choiceThreads"),M.WriteObjectStart()),M.WritePropertyStart(_.originalThreadIndex),_.threadAtGeneration.WriteJson(M),M.WritePropertyEnd())}x&&(M.WriteObjectEnd(),M.WritePropertyEnd()),M.WriteProperty("currentChoices",_=>{_.WriteArrayStart();for(let H of this.currentChoices)y.JsonSerialisation.WriteChoice(_,H);_.WriteArrayEnd()}),M.WriteObjectEnd()}LoadFlowChoiceThreads(M,x){for(let _ of this.currentChoices){let H=this.callStack.ThreadWithIndex(_.originalThreadIndex);_.threadAtGeneration=null!==H?H.Copy():new v.CallStack.Thread(M[`${_.originalThreadIndex}`],x)}}}},729:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Glue=void 0;const v=z(522);b.Glue=class y extends v.InkObject{toString(){return"Glue"}}},673:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.InkList=b.InkListItem=void 0;const v=z(919),y=z(259);class O{constructor(){if(this.originName=null,this.itemName=null,typeof arguments[1]<"u"){let x=arguments[1];this.originName=arguments[0],this.itemName=x}else if(arguments[0]){let x=arguments[0].toString().split(".");this.originName=x[0],this.itemName=x[1]}}static get Null(){return new O(null,null)}get isNull(){return null==this.originName&&null==this.itemName}get fullName(){return(null!==this.originName?this.originName:"?")+"."+this.itemName}toString(){return this.fullName}Equals(M){if(M instanceof O){let x=M;return x.itemName==this.itemName&&x.originName==this.originName}return!1}copy(){return new O(this.originName,this.itemName)}serialized(){return JSON.stringify({originName:this.originName,itemName:this.itemName})}static fromSerializedKey(M){let x=JSON.parse(M);return O.isLikeInkListItem(x)?new O(x.originName,x.itemName):O.Null}static isLikeInkListItem(M){return!("object"!=typeof M||!M.hasOwnProperty("originName")||!M.hasOwnProperty("itemName")||"string"!=typeof M.originName&&null!==typeof M.originName||"string"!=typeof M.itemName&&null!==typeof M.itemName)}}b.InkListItem=O;class w extends Map{constructor(){if(super(arguments[0]instanceof w?arguments[0]:[]),this.origins=null,this._originNames=[],arguments[0]instanceof w){let M=arguments[0];this._originNames=M.originNames,null!==M.origins&&(this.origins=M.origins.slice())}else if("string"==typeof arguments[0]){let M=arguments[0],x=arguments[1];if(this.SetInitialOriginName(M),null===x.listDefinitions)return v.throwNullException("originStory.listDefinitions");let _=x.listDefinitions.TryListGetDefinition(M,null);if(!_.exists)throw new Error("InkList origin could not be found in story when constructing new list: "+M);if(null===_.result)return v.throwNullException("def.result");this.origins=[_.result]}else if("object"==typeof arguments[0]&&arguments[0].hasOwnProperty("Key")&&arguments[0].hasOwnProperty("Value")){let M=arguments[0];this.Add(M.Key,M.Value)}}static FromString(M,x){var _;let H=null===(_=x.listDefinitions)||void 0===_?void 0:_.FindSingleItemListWithName(M);if(H)return null===H.value?v.throwNullException("listValue.value"):new w(H.value);throw new Error("Could not find the InkListItem from the string '"+M+"' to create an InkList because it doesn't exist in the original list definition in ink.")}AddItem(M){if(M instanceof O){let x=M;if(null==x.originName)return void this.AddItem(x.itemName);if(null===this.origins)return v.throwNullException("this.origins");for(let _ of this.origins)if(_.name==x.originName){let H=_.TryGetValueForItem(x,0);if(H.exists)return void this.Add(x,H.result);throw new Error("Could not add the item "+x+" to this list because it doesn't exist in the original list definition in ink.")}throw new Error("Failed to add item to list because the item was from a new list definition that wasn't previously known to this list. Only items from previously known lists can be used, so that the int value can be found.")}{let x=M,_=null;if(null===this.origins)return v.throwNullException("this.origins");for(let k of this.origins){if(null===x)return v.throwNullException("itemName");if(k.ContainsItemWithName(x)){if(null!=_)throw new Error("Could not add the item "+x+" to this list because it could come from either "+k.name+" or "+_.name);_=k}}if(null==_)throw new Error("Could not add the item "+x+" to this list because it isn't known to any list definitions previously associated with this list.");let H=new O(_.name,x),g=_.ValueForItem(H);this.Add(H,g)}}ContainsItemNamed(M){for(let[x]of this)if(O.fromSerializedKey(x).itemName==M)return!0;return!1}ContainsKey(M){return this.has(M.serialized())}Add(M,x){let _=M.serialized();if(this.has(_))throw new Error(`The Map already contains an entry for ${M}`);this.set(_,x)}Remove(M){return this.delete(M.serialized())}get Count(){return this.size}get originOfMaxItem(){if(null==this.origins)return null;let M=this.maxItem.Key.originName,x=null;return this.origins.every(_=>_.name!=M||(x=_,!1)),x}get originNames(){if(this.Count>0){null==this._originNames&&this.Count>0?this._originNames=[]:(this._originNames||(this._originNames=[]),this._originNames.length=0);for(let[M]of this){let x=O.fromSerializedKey(M);if(null===x.originName)return v.throwNullException("item.originName");this._originNames.push(x.originName)}}return this._originNames}SetInitialOriginName(M){this._originNames=[M]}SetInitialOriginNames(M){this._originNames=null==M?null:M.slice()}get maxItem(){let M={Key:O.Null,Value:0};for(let[x,_]of this){let H=O.fromSerializedKey(x);(M.Key.isNull||_>M.Value)&&(M={Key:H,Value:_})}return M}get minItem(){let M={Key:O.Null,Value:0};for(let[x,_]of this){let H=O.fromSerializedKey(x);(M.Key.isNull||_<M.Value)&&(M={Key:H,Value:_})}return M}get inverse(){let M=new w;if(null!=this.origins)for(let x of this.origins)for(let[_,H]of x.items){let g=O.fromSerializedKey(_);this.ContainsKey(g)||M.Add(g,H)}return M}get all(){let M=new w;if(null!=this.origins)for(let x of this.origins)for(let[_,H]of x.items){let g=O.fromSerializedKey(_);M.set(g.serialized(),H)}return M}Union(M){let x=new w(this);for(let[_,H]of M)x.set(_,H);return x}Intersect(M){let x=new w;for(let[_,H]of this)M.has(_)&&x.set(_,H);return x}Without(M){let x=new w(this);for(let[_]of M)x.delete(_);return x}Contains(M){for(let[x]of M)if(!this.has(x))return!1;return!0}GreaterThan(M){return 0!=this.Count&&(0==M.Count||this.minItem.Value>M.maxItem.Value)}GreaterThanOrEquals(M){return 0!=this.Count&&(0==M.Count||this.minItem.Value>=M.minItem.Value&&this.maxItem.Value>=M.maxItem.Value)}LessThan(M){return 0!=M.Count&&(0==this.Count||this.maxItem.Value<M.minItem.Value)}LessThanOrEquals(M){return 0!=M.Count&&(0==this.Count||this.maxItem.Value<=M.maxItem.Value&&this.minItem.Value<=M.minItem.Value)}MaxAsList(){return this.Count>0?new w(this.maxItem):new w}MinAsList(){return this.Count>0?new w(this.minItem):new w}ListWithSubRange(M,x){if(0==this.Count)return new w;let _=this.orderedItems,H=0,g=Number.MAX_SAFE_INTEGER;Number.isInteger(M)?H=M:M instanceof w&&M.Count>0&&(H=M.minItem.Value),Number.isInteger(x)?g=x:M instanceof w&&M.Count>0&&(g=x.maxItem.Value);let k=new w;k.SetInitialOriginNames(this.originNames);for(let d of _)d.Value>=H&&d.Value<=g&&k.Add(d.Key,d.Value);return k}Equals(M){if(!(M instanceof w)||M.Count!=this.Count)return!1;for(let[x]of this)if(!M.has(x))return!1;return!0}get orderedItems(){let M=new Array;for(let[x,_]of this){let H=O.fromSerializedKey(x);M.push({Key:H,Value:_})}return M.sort((x,_)=>null===x.Key.originName?v.throwNullException("x.Key.originName"):null===_.Key.originName?v.throwNullException("y.Key.originName"):x.Value==_.Value?x.Key.originName.localeCompare(_.Key.originName):x.Value<_.Value?-1:x.Value>_.Value?1:0),M}toString(){let M=this.orderedItems,x=new y.StringBuilder;for(let _=0;_<M.length;_++){_>0&&x.Append(", ");let H=M[_].Key;if(null===H.itemName)return v.throwNullException("item.itemName");x.Append(H.itemName)}return x.toString()}valueOf(){return NaN}}b.InkList=w},936:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.JsonSerialisation=void 0;const v=z(372),y=z(843),O=z(729),w=z(517),L=z(927),M=z(462),x=z(793),_=z(159),H=z(618),g=z(174),k=z(565),d=z(912),p=z(313),q=z(904),e2=z(64),n2=z(588),K=z(673),t2=z(138),Y=z(919);class p2{static JArrayToRuntimeObjList(P,j=!1){let U=P.length;j&&U--;let h=[];for(let D=0;D<U;D++){let f2=this.JTokenToRuntimeObject(P[D]);if(null===f2)return Y.throwNullException("runtimeObj");h.push(f2)}return h}static WriteDictionaryRuntimeObjs(P,j){P.WriteObjectStart();for(let[U,h]of j)P.WritePropertyStart(U),this.WriteRuntimeObject(P,h),P.WritePropertyEnd();P.WriteObjectEnd()}static WriteListRuntimeObjs(P,j){P.WriteArrayStart();for(let U of j)this.WriteRuntimeObject(P,U);P.WriteArrayEnd()}static WriteIntDictionary(P,j){P.WriteObjectStart();for(let[U,h]of j)P.WriteIntProperty(U,h);P.WriteObjectEnd()}static WriteRuntimeObject(P,j){let U=t2.asOrNull(j,v.Container);if(U)return void this.WriteRuntimeContainer(P,U);let h=t2.asOrNull(j,M.Divert);if(h){let d1,F2="->";return h.isExternal?F2="x()":h.pushesToStack&&(h.stackPushType==L.PushPopType.Function?F2="f()":h.stackPushType==L.PushPopType.Tunnel&&(F2="->t->")),d1=h.hasVariableTarget?h.variableDivertName:h.targetPathString,P.WriteObjectStart(),P.WriteProperty(F2,d1),h.hasVariableTarget&&P.WriteProperty("var",!0),h.isConditional&&P.WriteProperty("c",!0),h.externalArgs>0&&P.WriteIntProperty("exArgs",h.externalArgs),void P.WriteObjectEnd()}let D=t2.asOrNull(j,x.ChoicePoint);if(D)return P.WriteObjectStart(),P.WriteProperty("*",D.pathStringOnChoice),P.WriteIntProperty("flg",D.flags),void P.WriteObjectEnd();let $=t2.asOrNull(j,y.BoolValue);if($)return void P.WriteBool($.value);let f2=t2.asOrNull(j,y.IntValue);if(f2)return void P.WriteInt(f2.value);let l2=t2.asOrNull(j,y.FloatValue);if(l2)return void P.WriteFloat(l2.value);let N2=t2.asOrNull(j,y.StringValue);if(N2)return void(N2.isNewline?P.Write("\n",!1):(P.WriteStringStart(),P.WriteStringInner("^"),P.WriteStringInner(N2.value),P.WriteStringEnd()));let m=t2.asOrNull(j,y.ListValue);if(m)return void this.WriteInkList(P,m);let S=t2.asOrNull(j,y.DivertTargetValue);if(S)return P.WriteObjectStart(),null===S.value?Y.throwNullException("divTargetVal.value"):(P.WriteProperty("^->",S.value.componentsString),void P.WriteObjectEnd());let N=t2.asOrNull(j,y.VariablePointerValue);if(N)return P.WriteObjectStart(),P.WriteProperty("^var",N.value),P.WriteIntProperty("ci",N.contextIndex),void P.WriteObjectEnd();if(t2.asOrNull(j,O.Glue))return void P.Write("<>");let Q=t2.asOrNull(j,w.ControlCommand);if(Q)return void P.Write(p2._controlCommandNames[Q.commandType]);let m2=t2.asOrNull(j,g.NativeFunctionCall);if(m2){let F2=m2.name;return"^"==F2&&(F2="L^"),void P.Write(F2)}let T2=t2.asOrNull(j,_.VariableReference);if(T2){P.WriteObjectStart();let F2=T2.pathStringForCount;return null!=F2?P.WriteProperty("CNT?",F2):P.WriteProperty("VAR?",T2.name),void P.WriteObjectEnd()}let I2=t2.asOrNull(j,H.VariableAssignment);if(I2)return P.WriteObjectStart(),P.WriteProperty(I2.isGlobal?"VAR=":"temp=",I2.variableName),I2.isNewDeclaration||P.WriteProperty("re",!0),void P.WriteObjectEnd();if(t2.asOrNull(j,k.Void))return void P.Write("void");let R3=t2.asOrNull(j,d.Tag);if(R3)return P.WriteObjectStart(),P.WriteProperty("#",R3.text),void P.WriteObjectEnd();let l1=t2.asOrNull(j,q.Choice);if(!l1)throw new Error("Failed to convert runtime object to Json token: "+j);this.WriteChoice(P,l1)}static JObjectToDictionaryRuntimeObjs(P){let j=new Map;for(let U in P)if(P.hasOwnProperty(U)){let h=this.JTokenToRuntimeObject(P[U]);if(null===h)return Y.throwNullException("inkObject");j.set(U,h)}return j}static JObjectToIntDictionary(P){let j=new Map;for(let U in P)P.hasOwnProperty(U)&&j.set(U,parseInt(P[U]));return j}static JTokenToRuntimeObject(P){if("number"==typeof P&&!isNaN(P)||"boolean"==typeof P)return y.Value.Create(P);if("string"==typeof P){let j=P.toString(),U=j[0];if("^"==U)return new y.StringValue(j.substring(1));if("\n"==U&&1==j.length)return new y.StringValue("\n");if("<>"==j)return new O.Glue;for(let h=0;h<p2._controlCommandNames.length;++h)if(j==p2._controlCommandNames[h])return new w.ControlCommand(h);if("L^"==j&&(j="^"),g.NativeFunctionCall.CallExistsWithName(j))return g.NativeFunctionCall.CallWithName(j);if("->->"==j)return w.ControlCommand.PopTunnel();if("~ret"==j)return w.ControlCommand.PopFunction();if("void"==j)return new k.Void}if("object"==typeof P&&!Array.isArray(P)){let U,j=P;if(j["^->"])return U=j["^->"],new y.DivertTargetValue(new p.Path(U.toString()));if(j["^var"]){U=j["^var"];let m=new y.VariablePointerValue(U.toString());return"ci"in j&&(U=j.ci,m.contextIndex=parseInt(U)),m}let h=!1,D=!1,$=L.PushPopType.Function,f2=!1;if((U=j["->"])?h=!0:(U=j["f()"])?(h=!0,D=!0,$=L.PushPopType.Function):(U=j["->t->"])?(h=!0,D=!0,$=L.PushPopType.Tunnel):(U=j["x()"])&&(h=!0,f2=!0,D=!1,$=L.PushPopType.Function),h){let m=new M.Divert;m.pushesToStack=D,m.stackPushType=$,m.isExternal=f2;let S=U.toString();return(U=j.var)?m.variableDivertName=S:m.targetPathString=S,m.isConditional=!!j.c,f2&&(U=j.exArgs)&&(m.externalArgs=parseInt(U)),m}if(U=j["*"]){let m=new x.ChoicePoint;return m.pathStringOnChoice=U.toString(),(U=j.flg)&&(m.flags=parseInt(U)),m}if(U=j["VAR?"])return new _.VariableReference(U.toString());if(U=j["CNT?"]){let m=new _.VariableReference;return m.pathStringForCount=U.toString(),m}let l2=!1,N2=!1;if((U=j["VAR="])?(l2=!0,N2=!0):(U=j["temp="])&&(l2=!0,N2=!1),l2){let m=U.toString(),N=new H.VariableAssignment(m,!j.re);return N.isGlobal=N2,N}if(void 0!==j["#"])return U=j["#"],new d.Tag(U.toString());if(U=j.list){let m=U,S=new K.InkList;(U=j.origins)&&S.SetInitialOriginNames(U);for(let N in m)if(m.hasOwnProperty(N)){let A=m[N],Q=new K.InkListItem(N),m2=parseInt(A);S.Add(Q,m2)}return new y.ListValue(S)}if(null!=j.originalChoicePath)return this.JObjectToChoice(j)}if(Array.isArray(P))return this.JArrayToContainer(P);if(null==P)return null;throw new Error("Failed to convert token to runtime object: "+this.toJson(P,["parent"]))}static toJson(P,j,U){return JSON.stringify(P,(h,D)=>j?.some($=>$===h)?void 0:D,U)}static WriteRuntimeContainer(P,j,U=!1){if(P.WriteArrayStart(),null===j)return Y.throwNullException("container");for(let l2 of j.content)this.WriteRuntimeObject(P,l2);let h=j.namedOnlyContent,D=j.countFlags,$=null!=j.name&&!U,f2=null!=h||D>0||$;if(f2&&P.WriteObjectStart(),null!=h)for(let[l2,N2]of h){let m=l2,S=t2.asOrNull(N2,v.Container);P.WritePropertyStart(m),this.WriteRuntimeContainer(P,S,!0),P.WritePropertyEnd()}D>0&&P.WriteIntProperty("#f",D),$&&P.WriteProperty("#n",j.name),f2?P.WriteObjectEnd():P.WriteNull(),P.WriteArrayEnd()}static JArrayToContainer(P){let j=new v.Container;j.content=this.JArrayToRuntimeObjList(P,!0);let U=P[P.length-1];if(null!=U){let h=new Map;for(let D in U)if("#f"==D)j.countFlags=parseInt(U[D]);else if("#n"==D)j.name=U[D].toString();else{let $=this.JTokenToRuntimeObject(U[D]),f2=t2.asOrNull($,v.Container);f2&&(f2.name=D),h.set(D,$)}j.namedOnlyContent=h}return j}static JObjectToChoice(P){let j=new q.Choice;return j.text=P.text.toString(),j.index=parseInt(P.index),j.sourcePath=P.originalChoicePath.toString(),j.originalThreadIndex=parseInt(P.originalThreadIndex),j.pathStringOnChoice=P.targetPath.toString(),j}static WriteChoice(P,j){P.WriteObjectStart(),P.WriteProperty("text",j.text),P.WriteIntProperty("index",j.index),P.WriteProperty("originalChoicePath",j.sourcePath),P.WriteIntProperty("originalThreadIndex",j.originalThreadIndex),P.WriteProperty("targetPath",j.pathStringOnChoice),P.WriteObjectEnd()}static WriteInkList(P,j){let U=j.value;if(null===U)return Y.throwNullException("rawList");P.WriteObjectStart(),P.WritePropertyStart("list"),P.WriteObjectStart();for(let[h,D]of U){let $=K.InkListItem.fromSerializedKey(h),f2=D;if(null===$.itemName)return Y.throwNullException("item.itemName");P.WritePropertyNameStart(),P.WritePropertyNameInner($.originName?$.originName:"?"),P.WritePropertyNameInner("."),P.WritePropertyNameInner($.itemName),P.WritePropertyNameEnd(),P.Write(f2),P.WritePropertyEnd()}if(P.WriteObjectEnd(),P.WritePropertyEnd(),0==U.Count&&null!=U.originNames&&U.originNames.length>0){P.WritePropertyStart("origins"),P.WriteArrayStart();for(let h of U.originNames)P.Write(h);P.WriteArrayEnd(),P.WritePropertyEnd()}P.WriteObjectEnd()}static ListDefinitionsToJToken(P){let j={};for(let U of P.lists){let h={};for(let[D,$]of U.items){let f2=K.InkListItem.fromSerializedKey(D);if(null===f2.itemName)return Y.throwNullException("item.itemName");h[f2.itemName]=$}j[U.name]=h}return j}static JTokenToListDefinitions(P){let j=P,U=[];for(let h in j)if(j.hasOwnProperty(h)){let D=h.toString(),$=j[h],f2=new Map;for(let N2 in $)j.hasOwnProperty(h)&&f2.set(N2,parseInt($[N2]));let l2=new e2.ListDefinition(D,f2);U.push(l2)}return new n2.ListDefinitionsOrigin(U)}}b.JsonSerialisation=p2,p2._controlCommandNames=(()=>{let H2=[];H2[w.ControlCommand.CommandType.EvalStart]="ev",H2[w.ControlCommand.CommandType.EvalOutput]="out",H2[w.ControlCommand.CommandType.EvalEnd]="/ev",H2[w.ControlCommand.CommandType.Duplicate]="du",H2[w.ControlCommand.CommandType.PopEvaluatedValue]="pop",H2[w.ControlCommand.CommandType.PopFunction]="~ret",H2[w.ControlCommand.CommandType.PopTunnel]="->->",H2[w.ControlCommand.CommandType.BeginString]="str",H2[w.ControlCommand.CommandType.EndString]="/str",H2[w.ControlCommand.CommandType.NoOp]="nop",H2[w.ControlCommand.CommandType.ChoiceCount]="choiceCnt",H2[w.ControlCommand.CommandType.Turns]="turn",H2[w.ControlCommand.CommandType.TurnsSince]="turns",H2[w.ControlCommand.CommandType.ReadCount]="readc",H2[w.ControlCommand.CommandType.Random]="rnd",H2[w.ControlCommand.CommandType.SeedRandom]="srnd",H2[w.ControlCommand.CommandType.VisitIndex]="visit",H2[w.ControlCommand.CommandType.SequenceShuffleIndex]="seq",H2[w.ControlCommand.CommandType.StartThread]="thread",H2[w.ControlCommand.CommandType.Done]="done",H2[w.ControlCommand.CommandType.End]="end",H2[w.ControlCommand.CommandType.ListFromInt]="listInt",H2[w.ControlCommand.CommandType.ListRange]="range",H2[w.ControlCommand.CommandType.ListRandom]="lrnd";for(let P=0;P<w.ControlCommand.CommandType.TOTAL_VALUES;++P)if(null==H2[P])throw new Error("Control command not accounted for in serialisation");return H2})()},64:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ListDefinition=void 0;const v=z(673);b.ListDefinition=class y{constructor(w,L){this._name=w||"",this._items=null,this._itemNameToValues=L||new Map}get name(){return this._name}get items(){if(null==this._items){this._items=new Map;for(let[w,L]of this._itemNameToValues){let M=new v.InkListItem(this.name,w);this._items.set(M.serialized(),L)}}return this._items}ValueForItem(w){if(!w.itemName)return 0;let L=this._itemNameToValues.get(w.itemName);return typeof L<"u"?L:0}ContainsItem(w){return!(!w.itemName||w.originName!=this.name)&&this._itemNameToValues.has(w.itemName)}ContainsItemWithName(w){return this._itemNameToValues.has(w)}TryGetItemWithValue(w,L){for(let[M,x]of this._itemNameToValues)if(x==w)return{result:new v.InkListItem(this.name,M),exists:!0};return{result:v.InkListItem.Null,exists:!1}}TryGetValueForItem(w,L){if(!w.itemName)return{result:0,exists:!1};let M=this._itemNameToValues.get(w.itemName);return M?{result:M,exists:!0}:{result:0,exists:!1}}}},588:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ListDefinitionsOrigin=void 0;const v=z(673),y=z(843),O=z(919);b.ListDefinitionsOrigin=class w{constructor(M){this._lists=new Map,this._allUnambiguousListValueCache=new Map;for(let x of M){this._lists.set(x.name,x);for(let[_,H]of x.items){let g=v.InkListItem.fromSerializedKey(_),k=new y.ListValue(g,H);if(!g.itemName)throw new Error("item.itemName is null or undefined.");this._allUnambiguousListValueCache.set(g.itemName,k),this._allUnambiguousListValueCache.set(g.fullName,k)}}}get lists(){let M=[];for(let[,x]of this._lists)M.push(x);return M}TryListGetDefinition(M,x){if(null===M)return{result:x,exists:!1};let _=this._lists.get(M);return _?{result:_,exists:!0}:{result:x,exists:!1}}FindSingleItemListWithName(M){if(null===M)return O.throwNullException("name");let x=this._allUnambiguousListValueCache.get(M);return typeof x<"u"?x:null}}},174:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NativeFunctionCall=void 0;const v=z(843),y=z(500),O=z(565),w=z(673),L=z(522),M=z(138),x=z(919);class _ extends L.InkObject{constructor(){if(super(),this._name=null,this._numberOfParameters=0,this._prototype=null,this._isPrototype=!1,this._operationFuncs=null,0===arguments.length)_.GenerateNativeFunctionsIfNecessary();else if(1===arguments.length){let g=arguments[0];_.GenerateNativeFunctionsIfNecessary(),this.name=g}else if(2===arguments.length){let g=arguments[0],k=arguments[1];this._isPrototype=!0,this.name=g,this.numberOfParameters=k}}static CallWithName(g){return new _(g)}static CallExistsWithName(g){return this.GenerateNativeFunctionsIfNecessary(),this._nativeFunctions.get(g)}get name(){return null===this._name?x.throwNullException("NativeFunctionCall._name"):this._name}set name(g){this._name=g,this._isPrototype||(null===_._nativeFunctions?x.throwNullException("NativeFunctionCall._nativeFunctions"):this._prototype=_._nativeFunctions.get(this._name)||null)}get numberOfParameters(){return this._prototype?this._prototype.numberOfParameters:this._numberOfParameters}set numberOfParameters(g){this._numberOfParameters=g}Call(g){if(this._prototype)return this._prototype.Call(g);if(this.numberOfParameters!=g.length)throw new Error("Unexpected number of parameters");let k=!1;for(let q of g){if(q instanceof O.Void)throw new y.StoryException('Attempting to perform operation on a void value. Did you forget to "return" a value from a function you called here?');q instanceof v.ListValue&&(k=!0)}if(2==g.length&&k)return this.CallBinaryListOperation(g);let d=this.CoerceValuesToSingleType(g),p=d[0].valueType;return p==v.ValueType.Int||p==v.ValueType.Float||p==v.ValueType.String||p==v.ValueType.DivertTarget||p==v.ValueType.List?this.CallType(d):null}CallType(g){let k=M.asOrThrows(g[0],v.Value),d=k.valueType,p=k,q=g.length;if(2==q||1==q){if(null===this._operationFuncs)return x.throwNullException("NativeFunctionCall._operationFuncs");let e2=this._operationFuncs.get(d);if(!e2)throw new y.StoryException("Cannot perform operation "+this.name+" on "+v.ValueType[d]);if(2==q){let K=M.asOrThrows(g[1],v.Value),t2=e2;if(null===p.value||null===K.value)return x.throwNullException("NativeFunctionCall.Call BinaryOp values");let Y=t2(p.value,K.value);return v.Value.Create(Y)}{let n2=e2;if(null===p.value)return x.throwNullException("NativeFunctionCall.Call UnaryOp value");let K=n2(p.value);return v.Value.Create(K,this.name===_.Int?v.ValueType.Int:this.name===_.Float?v.ValueType.Float:k.valueType)}}throw new Error("Unexpected number of parameters to NativeFunctionCall: "+g.length)}CallBinaryListOperation(g){if(("+"==this.name||"-"==this.name)&&g[0]instanceof v.ListValue&&g[1]instanceof v.IntValue)return this.CallListIncrementOperation(g);let k=M.asOrThrows(g[0],v.Value),d=M.asOrThrows(g[1],v.Value);if(!("&&"!=this.name&&"||"!=this.name||k.valueType==v.ValueType.List&&d.valueType==v.ValueType.List)){if(null===this._operationFuncs)return x.throwNullException("NativeFunctionCall._operationFuncs");let p=this._operationFuncs.get(v.ValueType.Int);if(null===p)return x.throwNullException("NativeFunctionCall.CallBinaryListOperation op");let q=M.asBooleanOrThrows(p(k.isTruthy?1:0,d.isTruthy?1:0));return new v.BoolValue(q)}if(k.valueType==v.ValueType.List&&d.valueType==v.ValueType.List)return this.CallType([k,d]);throw new y.StoryException("Can not call use "+this.name+" operation on "+v.ValueType[k.valueType]+" and "+v.ValueType[d.valueType])}CallListIncrementOperation(g){let k=M.asOrThrows(g[0],v.ListValue),d=M.asOrThrows(g[1],v.IntValue),p=new w.InkList;if(null===k.value)return x.throwNullException("NativeFunctionCall.CallListIncrementOperation listVal.value");for(let[q,e2]of k.value){let n2=w.InkListItem.fromSerializedKey(q);if(null===this._operationFuncs)return x.throwNullException("NativeFunctionCall._operationFuncs");let K=this._operationFuncs.get(v.ValueType.Int);if(null===d.value)return x.throwNullException("NativeFunctionCall.CallListIncrementOperation intVal.value");let t2=K(e2,d.value),Y=null;if(null===k.value.origins)return x.throwNullException("NativeFunctionCall.CallListIncrementOperation listVal.value.origins");for(let p2 of k.value.origins)if(p2.name==n2.originName){Y=p2;break}if(null!=Y){let p2=Y.TryGetItemWithValue(t2,w.InkListItem.Null);p2.exists&&p.Add(p2.result,t2)}}return new v.ListValue(p)}CoerceValuesToSingleType(g){let k=v.ValueType.Int,d=null;for(let q of g){let e2=M.asOrThrows(q,v.Value);e2.valueType>k&&(k=e2.valueType),e2.valueType==v.ValueType.List&&(d=M.asOrNull(e2,v.ListValue))}let p=[];if(v.ValueType[k]==v.ValueType[v.ValueType.List])for(let q of g){let e2=M.asOrThrows(q,v.Value);if(e2.valueType==v.ValueType.List)p.push(e2);else{if(e2.valueType!=v.ValueType.Int)throw new y.StoryException("Cannot mix Lists and "+v.ValueType[e2.valueType]+" values in this operation");{let n2=parseInt(e2.valueObject);if(d=M.asOrThrows(d,v.ListValue),null===d.value)return x.throwNullException("NativeFunctionCall.CoerceValuesToSingleType specialCaseList.value");let K=d.value.originOfMaxItem;if(null===K)return x.throwNullException("NativeFunctionCall.CoerceValuesToSingleType list");let t2=K.TryGetItemWithValue(n2,w.InkListItem.Null);if(!t2.exists)throw new y.StoryException("Could not find List item with the value "+n2+" in "+K.name);{let Y=new v.ListValue(t2.result,n2);p.push(Y)}}}}else for(let q of g){let n2=M.asOrThrows(q,v.Value).Cast(k);p.push(n2)}return p}static Identity(g){return g}static GenerateNativeFunctionsIfNecessary(){if(null==this._nativeFunctions){this._nativeFunctions=new Map,this.AddIntBinaryOp(this.Add,(d,p)=>d+p),this.AddIntBinaryOp(this.Subtract,(d,p)=>d-p),this.AddIntBinaryOp(this.Multiply,(d,p)=>d*p),this.AddIntBinaryOp(this.Divide,(d,p)=>Math.floor(d/p)),this.AddIntBinaryOp(this.Mod,(d,p)=>d%p),this.AddIntUnaryOp(this.Negate,d=>-d),this.AddIntBinaryOp(this.Equal,(d,p)=>d==p),this.AddIntBinaryOp(this.Greater,(d,p)=>d>p),this.AddIntBinaryOp(this.Less,(d,p)=>d<p),this.AddIntBinaryOp(this.GreaterThanOrEquals,(d,p)=>d>=p),this.AddIntBinaryOp(this.LessThanOrEquals,(d,p)=>d<=p),this.AddIntBinaryOp(this.NotEquals,(d,p)=>d!=p),this.AddIntUnaryOp(this.Not,d=>0==d),this.AddIntBinaryOp(this.And,(d,p)=>0!=d&&0!=p),this.AddIntBinaryOp(this.Or,(d,p)=>0!=d||0!=p),this.AddIntBinaryOp(this.Max,(d,p)=>Math.max(d,p)),this.AddIntBinaryOp(this.Min,(d,p)=>Math.min(d,p)),this.AddIntBinaryOp(this.Pow,(d,p)=>Math.pow(d,p)),this.AddIntUnaryOp(this.Floor,_.Identity),this.AddIntUnaryOp(this.Ceiling,_.Identity),this.AddIntUnaryOp(this.Int,_.Identity),this.AddIntUnaryOp(this.Float,d=>d),this.AddFloatBinaryOp(this.Add,(d,p)=>d+p),this.AddFloatBinaryOp(this.Subtract,(d,p)=>d-p),this.AddFloatBinaryOp(this.Multiply,(d,p)=>d*p),this.AddFloatBinaryOp(this.Divide,(d,p)=>d/p),this.AddFloatBinaryOp(this.Mod,(d,p)=>d%p),this.AddFloatUnaryOp(this.Negate,d=>-d),this.AddFloatBinaryOp(this.Equal,(d,p)=>d==p),this.AddFloatBinaryOp(this.Greater,(d,p)=>d>p),this.AddFloatBinaryOp(this.Less,(d,p)=>d<p),this.AddFloatBinaryOp(this.GreaterThanOrEquals,(d,p)=>d>=p),this.AddFloatBinaryOp(this.LessThanOrEquals,(d,p)=>d<=p),this.AddFloatBinaryOp(this.NotEquals,(d,p)=>d!=p),this.AddFloatUnaryOp(this.Not,d=>0==d),this.AddFloatBinaryOp(this.And,(d,p)=>0!=d&&0!=p),this.AddFloatBinaryOp(this.Or,(d,p)=>0!=d||0!=p),this.AddFloatBinaryOp(this.Max,(d,p)=>Math.max(d,p)),this.AddFloatBinaryOp(this.Min,(d,p)=>Math.min(d,p)),this.AddFloatBinaryOp(this.Pow,(d,p)=>Math.pow(d,p)),this.AddFloatUnaryOp(this.Floor,d=>Math.floor(d)),this.AddFloatUnaryOp(this.Ceiling,d=>Math.ceil(d)),this.AddFloatUnaryOp(this.Int,d=>Math.floor(d)),this.AddFloatUnaryOp(this.Float,_.Identity),this.AddStringBinaryOp(this.Add,(d,p)=>d+p),this.AddStringBinaryOp(this.Equal,(d,p)=>d===p),this.AddStringBinaryOp(this.NotEquals,(d,p)=>d!==p),this.AddStringBinaryOp(this.Has,(d,p)=>d.includes(p)),this.AddStringBinaryOp(this.Hasnt,(d,p)=>!d.includes(p)),this.AddListBinaryOp(this.Add,(d,p)=>d.Union(p)),this.AddListBinaryOp(this.Subtract,(d,p)=>d.Without(p)),this.AddListBinaryOp(this.Has,(d,p)=>d.Contains(p)),this.AddListBinaryOp(this.Hasnt,(d,p)=>!d.Contains(p)),this.AddListBinaryOp(this.Intersect,(d,p)=>d.Intersect(p)),this.AddListBinaryOp(this.Equal,(d,p)=>d.Equals(p)),this.AddListBinaryOp(this.Greater,(d,p)=>d.GreaterThan(p)),this.AddListBinaryOp(this.Less,(d,p)=>d.LessThan(p)),this.AddListBinaryOp(this.GreaterThanOrEquals,(d,p)=>d.GreaterThanOrEquals(p)),this.AddListBinaryOp(this.LessThanOrEquals,(d,p)=>d.LessThanOrEquals(p)),this.AddListBinaryOp(this.NotEquals,(d,p)=>!d.Equals(p)),this.AddListBinaryOp(this.And,(d,p)=>d.Count>0&&p.Count>0),this.AddListBinaryOp(this.Or,(d,p)=>d.Count>0||p.Count>0),this.AddListUnaryOp(this.Not,d=>0==d.Count?1:0),this.AddListUnaryOp(this.Invert,d=>d.inverse),this.AddListUnaryOp(this.All,d=>d.all),this.AddListUnaryOp(this.ListMin,d=>d.MinAsList()),this.AddListUnaryOp(this.ListMax,d=>d.MaxAsList()),this.AddListUnaryOp(this.Count,d=>d.Count),this.AddListUnaryOp(this.ValueOfList,d=>d.maxItem.Value);let k=(d,p)=>!d.Equals(p);this.AddOpToNativeFunc(this.Equal,2,v.ValueType.DivertTarget,(d,p)=>d.Equals(p)),this.AddOpToNativeFunc(this.NotEquals,2,v.ValueType.DivertTarget,k)}}AddOpFuncForType(g,k){null==this._operationFuncs&&(this._operationFuncs=new Map),this._operationFuncs.set(g,k)}static AddOpToNativeFunc(g,k,d,p){if(null===this._nativeFunctions)return x.throwNullException("NativeFunctionCall._nativeFunctions");let q=this._nativeFunctions.get(g);q||(q=new _(g,k),this._nativeFunctions.set(g,q)),q.AddOpFuncForType(d,p)}static AddIntBinaryOp(g,k){this.AddOpToNativeFunc(g,2,v.ValueType.Int,k)}static AddIntUnaryOp(g,k){this.AddOpToNativeFunc(g,1,v.ValueType.Int,k)}static AddFloatBinaryOp(g,k){this.AddOpToNativeFunc(g,2,v.ValueType.Float,k)}static AddFloatUnaryOp(g,k){this.AddOpToNativeFunc(g,1,v.ValueType.Float,k)}static AddStringBinaryOp(g,k){this.AddOpToNativeFunc(g,2,v.ValueType.String,k)}static AddListBinaryOp(g,k){this.AddOpToNativeFunc(g,2,v.ValueType.List,k)}static AddListUnaryOp(g,k){this.AddOpToNativeFunc(g,1,v.ValueType.List,k)}toString(){return'Native "'+this.name+'"'}}b.NativeFunctionCall=_,_.Add="+",_.Subtract="-",_.Divide="/",_.Multiply="*",_.Mod="%",_.Negate="_",_.Equal="==",_.Greater=">",_.Less="<",_.GreaterThanOrEquals=">=",_.LessThanOrEquals="<=",_.NotEquals="!=",_.Not="!",_.And="&&",_.Or="||",_.Min="MIN",_.Max="MAX",_.Pow="POW",_.Floor="FLOOR",_.Ceiling="CEILING",_.Int="INT",_.Float="FLOAT",_.Has="?",_.Hasnt="!?",_.Intersect="^",_.ListMin="LIST_MIN",_.ListMax="LIST_MAX",_.All="LIST_ALL",_.Count="LIST_COUNT",_.ValueOfList="LIST_VALUE",_.Invert="LIST_INVERT",_._nativeFunctions=null},919:(A2,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.throwNullException=b.NullException=void 0;class z extends Error{}b.NullException=z,b.throwNullException=function v(y){throw new z(`${y} is null or undefined`)}},522:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.InkObject=void 0;const v=z(313),y=z(372),O=z(966),w=z(138),L=z(919);b.InkObject=class M{constructor(){this.parent=null,this._debugMetadata=null,this._path=null}get debugMetadata(){return null===this._debugMetadata&&this.parent?this.parent.debugMetadata:this._debugMetadata}set debugMetadata(_){this._debugMetadata=_}get ownDebugMetadata(){return this._debugMetadata}DebugLineNumberOfPath(_){if(null===_)return null;let H=this.rootContentContainer;if(H){let g=H.ContentAtPath(_).obj;if(g){let k=g.debugMetadata;if(null!==k)return k.startLineNumber}}return null}get path(){if(null==this._path)if(null==this.parent)this._path=new v.Path;else{let _=[],H=this,g=w.asOrNull(H.parent,y.Container);for(;null!==g;){let k=w.asINamedContentOrNull(H);if(null!=k&&k.hasValidName){if(null===k.name)return L.throwNullException("namedChild.name");_.unshift(new v.Path.Component(k.name))}else _.unshift(new v.Path.Component(g.content.indexOf(H)));H=g,g=w.asOrNull(g.parent,y.Container)}this._path=new v.Path(_)}return this._path}ResolvePath(_){if(null===_)return L.throwNullException("path");if(_.isRelative){let H=w.asOrNull(this,y.Container);return null===H&&(O.Debug.Assert(null!==this.parent,"Can't resolve relative path because we don't have a parent"),H=w.asOrNull(this.parent,y.Container),O.Debug.Assert(null!==H,"Expected parent to be a container"),O.Debug.Assert(_.GetComponent(0).isParent),_=_.tail),null===H?L.throwNullException("nearestContainer"):H.ContentAtPath(_)}{let H=this.rootContentContainer;return null===H?L.throwNullException("contentContainer"):H.ContentAtPath(_)}}ConvertPathToRelative(_){let H=this.path,g=Math.min(_.length,H.length),k=-1;for(let e2=0;e2<g;++e2){let n2=H.GetComponent(e2),K=_.GetComponent(e2);if(!n2.Equals(K))break;k=e2}if(-1==k)return _;let d=H.componentCount-1-k,p=[];for(let e2=0;e2<d;++e2)p.push(v.Path.Component.ToParent());for(let e2=k+1;e2<_.componentCount;++e2)p.push(_.GetComponent(e2));return new v.Path(p,!0)}CompactPathString(_){let H=null,g=null;return _.isRelative?(g=_.componentsString,H=this.path.PathByAppendingPath(_).componentsString):(g=this.ConvertPathToRelative(_).componentsString,H=_.componentsString),g.length<H.length?g:H}get rootContentContainer(){let _=this;for(;_.parent;)_=_.parent;return w.asOrNull(_,y.Container)}Copy(){throw Error("Not Implemented: Doesn't support copying")}SetChild(_,H,g){_[H]&&(_[H]=null),_[H]=g,_[H]&&(_[H].parent=this)}Equals(_){return _===this}}},947:(A2,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.PRNG=void 0,b.PRNG=class z{constructor(y){this.seed=y%2147483647,this.seed<=0&&(this.seed+=2147483646)}next(){return this.seed=48271*this.seed%2147483647}nextFloat(){return(this.next()-1)/2147483646}}},313:(A2,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Path=void 0;class z{constructor(){if(this._components=[],this._componentsString=null,this._isRelative=!1,"string"==typeof arguments[0])this.componentsString=arguments[0];else if(arguments[0]instanceof z.Component&&arguments[1]instanceof z){let O=arguments[1];this._components.push(arguments[0]),this._components=this._components.concat(O._components)}else if(arguments[0]instanceof Array){let O=!!arguments[1];this._components=this._components.concat(arguments[0]),this._isRelative=O}}get isRelative(){return this._isRelative}get componentCount(){return this._components.length}get head(){return this._components.length>0?this._components[0]:null}get tail(){if(this._components.length>=2){let y=this._components.slice(1,this._components.length);return new z(y)}return z.self}get length(){return this._components.length}get lastComponent(){let y=this._components.length-1;return y>=0?this._components[y]:null}get containsNamedComponent(){for(let y=0,O=this._components.length;y<O;y++)if(!this._components[y].isIndex)return!0;return!1}static get self(){let y=new z;return y._isRelative=!0,y}GetComponent(y){return this._components[y]}PathByAppendingPath(y){let O=new z,w=0;for(let L=0;L<y._components.length&&y._components[L].isParent;++L)w++;for(let L=0;L<this._components.length-w;++L)O._components.push(this._components[L]);for(let L=w;L<y._components.length;++L)O._components.push(y._components[L]);return O}get componentsString(){return null==this._componentsString&&(this._componentsString=this._components.join("."),this.isRelative&&(this._componentsString="."+this._componentsString)),this._componentsString}set componentsString(y){if(this._components.length=0,this._componentsString=y,null==this._componentsString||""==this._componentsString)return;"."==this._componentsString[0]&&(this._isRelative=!0,this._componentsString=this._componentsString.substring(1));let O=this._componentsString.split(".");for(let w of O)/^(\-|\+)?([0-9]+|Infinity)$/.test(w)?this._components.push(new z.Component(parseInt(w))):this._components.push(new z.Component(w))}toString(){return this.componentsString}Equals(y){if(null==y||y._components.length!=this._components.length||y.isRelative!=this.isRelative)return!1;for(let O=0,w=y._components.length;O<w;O++)if(!y._components[O].Equals(this._components[O]))return!1;return!0}PathByAppendingComponent(y){let O=new z;return O._components.push(...this._components),O._components.push(y),O}}b.Path=z,z.parentId="^",function(v){class y{constructor(w){this.index=-1,this.name=null,"string"==typeof w?this.name=w:this.index=w}get isIndex(){return this.index>=0}get isParent(){return this.name==v.parentId}static ToParent(){return new y(v.parentId)}toString(){return this.isIndex?this.index.toString():this.name}Equals(w){return null!=w&&w.isIndex==this.isIndex&&(this.isIndex?this.index==w.index:this.name==w.name)}}v.Component=y}(z=b.Path||(b.Path={}))},689:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Pointer=void 0;const v=z(313);class y{constructor(){this.container=null,this.index=-1,2===arguments.length&&(this.container=arguments[0],this.index=arguments[1])}Resolve(){return this.index<0?this.container:null==this.container?null:0==this.container.content.length?this.container:this.index>=this.container.content.length?null:this.container.content[this.index]}get isNull(){return null==this.container}get path(){return this.isNull?null:this.index>=0?this.container.path.PathByAppendingComponent(new v.Path.Component(this.index)):this.container.path}toString(){return this.container?"Ink Pointer -> "+this.container.path.toString()+" -- index "+this.index:"Ink Pointer (null)"}copy(){return new y(this.container,this.index)}static StartOf(w){return new y(w,0)}static get Null(){return new y(null,-1)}}b.Pointer=y},927:(A2,b)=>{var v;Object.defineProperty(b,"__esModule",{value:!0}),b.PushPopType=void 0,(v=b.PushPopType||(b.PushPopType={}))[v.Tunnel=0]="Tunnel",v[v.Function=1]="Function",v[v.FunctionEvaluationFromGame=2]="FunctionEvaluationFromGame"},296:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SearchResult=void 0;const v=z(372);class y{constructor(){this.obj=null,this.approximate=!1}get correctObj(){return this.approximate?null:this.obj}get container(){return this.obj instanceof v.Container?this.obj:null}copy(){let w=new y;return w.obj=this.obj,w.approximate=this.approximate,w}}b.SearchResult=y},764:(A2,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SimpleJson=void 0;class z{static TextToDictionary(y){return new z.Reader(y).ToDictionary()}static TextToArray(y){return new z.Reader(y).ToArray()}}b.SimpleJson=z,function(v){v.Reader=class y{constructor(L){this._rootObject=JSON.parse(L)}ToDictionary(){return this._rootObject}ToArray(){return this._rootObject}};class O{constructor(){this._currentPropertyName=null,this._currentString=null,this._stateStack=[],this._collectionStack=[],this._propertyNameStack=[],this._jsonObject=null}WriteObject(L){this.WriteObjectStart(),L(this),this.WriteObjectEnd()}WriteObjectStart(){this.StartNewObject(!0);let L={};if(this.state===v.Writer.State.Property){this.Assert(null!==this.currentCollection),this.Assert(null!==this.currentPropertyName);let M=this._propertyNameStack.pop();this.currentCollection[M]=L,this._collectionStack.push(L)}else this.state===v.Writer.State.Array?(this.Assert(null!==this.currentCollection),this.currentCollection.push(L),this._collectionStack.push(L)):(this.Assert(this.state===v.Writer.State.None),this._jsonObject=L,this._collectionStack.push(L));this._stateStack.push(new v.Writer.StateElement(v.Writer.State.Object))}WriteObjectEnd(){this.Assert(this.state===v.Writer.State.Object),this._collectionStack.pop(),this._stateStack.pop()}WriteProperty(L,M){this.WritePropertyStart(L),arguments[1]instanceof Function?(0,arguments[1])(this):this.Write(arguments[1]),this.WritePropertyEnd()}WriteIntProperty(L,M){this.WritePropertyStart(L),this.WriteInt(M),this.WritePropertyEnd()}WriteFloatProperty(L,M){this.WritePropertyStart(L),this.WriteFloat(M),this.WritePropertyEnd()}WritePropertyStart(L){this.Assert(this.state===v.Writer.State.Object),this._propertyNameStack.push(L),this.IncrementChildCount(),this._stateStack.push(new v.Writer.StateElement(v.Writer.State.Property))}WritePropertyEnd(){this.Assert(this.state===v.Writer.State.Property),this.Assert(1===this.childCount),this._stateStack.pop()}WritePropertyNameStart(){this.Assert(this.state===v.Writer.State.Object),this.IncrementChildCount(),this._currentPropertyName="",this._stateStack.push(new v.Writer.StateElement(v.Writer.State.Property)),this._stateStack.push(new v.Writer.StateElement(v.Writer.State.PropertyName))}WritePropertyNameEnd(){this.Assert(this.state===v.Writer.State.PropertyName),this.Assert(null!==this._currentPropertyName),this._propertyNameStack.push(this._currentPropertyName),this._currentPropertyName=null,this._stateStack.pop()}WritePropertyNameInner(L){this.Assert(this.state===v.Writer.State.PropertyName),this.Assert(null!==this._currentPropertyName),this._currentPropertyName+=L}WriteArrayStart(){this.StartNewObject(!0);let L=[];if(this.state===v.Writer.State.Property){this.Assert(null!==this.currentCollection),this.Assert(null!==this.currentPropertyName);let M=this._propertyNameStack.pop();this.currentCollection[M]=L,this._collectionStack.push(L)}else this.state===v.Writer.State.Array?(this.Assert(null!==this.currentCollection),this.currentCollection.push(L),this._collectionStack.push(L)):(this.Assert(this.state===v.Writer.State.None),this._jsonObject=L,this._collectionStack.push(L));this._stateStack.push(new v.Writer.StateElement(v.Writer.State.Array))}WriteArrayEnd(){this.Assert(this.state===v.Writer.State.Array),this._collectionStack.pop(),this._stateStack.pop()}Write(L,M=!0){null!==L?(this.StartNewObject(!1),this._addToCurrentObject(L)):console.error("Warning: trying to write a null value")}WriteBool(L){null!==L&&(this.StartNewObject(!1),this._addToCurrentObject(L))}WriteInt(L){null!==L&&(this.StartNewObject(!1),this._addToCurrentObject(Math.floor(L)))}WriteFloat(L){null!==L&&(this.StartNewObject(!1),L==Number.POSITIVE_INFINITY?this._addToCurrentObject(34e37):L==Number.NEGATIVE_INFINITY?this._addToCurrentObject(-34e37):isNaN(L)?this._addToCurrentObject(0):this._addToCurrentObject(L))}WriteNull(){this.StartNewObject(!1),this._addToCurrentObject(null)}WriteStringStart(){this.StartNewObject(!1),this._currentString="",this._stateStack.push(new v.Writer.StateElement(v.Writer.State.String))}WriteStringEnd(){this.Assert(this.state==v.Writer.State.String),this._stateStack.pop(),this._addToCurrentObject(this._currentString),this._currentString=null}WriteStringInner(L,M=!0){this.Assert(this.state===v.Writer.State.String),null!==L?this._currentString+=L:console.error("Warning: trying to write a null string")}toString(){return null===this._jsonObject?"":JSON.stringify(this._jsonObject)}StartNewObject(L){this.Assert(L?this.state===v.Writer.State.None||this.state===v.Writer.State.Property||this.state===v.Writer.State.Array:this.state===v.Writer.State.Property||this.state===v.Writer.State.Array),this.state===v.Writer.State.Property&&this.Assert(0===this.childCount),(this.state===v.Writer.State.Array||this.state===v.Writer.State.Property)&&this.IncrementChildCount()}get state(){return this._stateStack.length>0?this._stateStack[this._stateStack.length-1].type:v.Writer.State.None}get childCount(){return this._stateStack.length>0?this._stateStack[this._stateStack.length-1].childCount:0}get currentCollection(){return this._collectionStack.length>0?this._collectionStack[this._collectionStack.length-1]:null}get currentPropertyName(){return this._propertyNameStack.length>0?this._propertyNameStack[this._propertyNameStack.length-1]:null}IncrementChildCount(){this.Assert(this._stateStack.length>0);let L=this._stateStack.pop();L.childCount++,this._stateStack.push(L)}Assert(L){if(!L)throw Error("Assert failed while writing JSON")}_addToCurrentObject(L){this.Assert(null!==this.currentCollection),this.state===v.Writer.State.Array?(this.Assert(Array.isArray(this.currentCollection)),this.currentCollection.push(L)):this.state===v.Writer.State.Property&&(this.Assert(!Array.isArray(this.currentCollection)),this.Assert(null!==this.currentPropertyName),this.currentCollection[this.currentPropertyName]=L,this._propertyNameStack.pop())}}v.Writer=O,function(w){let L;var x;(x=L=w.State||(w.State={}))[x.None=0]="None",x[x.Object=1]="Object",x[x.Array=2]="Array",x[x.Property=3]="Property",x[x.PropertyName=4]="PropertyName",x[x.String=5]="String",w.StateElement=class M{constructor(_){this.type=v.Writer.State.None,this.childCount=0,this.type=_}}}(O=v.Writer||(v.Writer={}))}(z=b.SimpleJson||(b.SimpleJson={}))},169:(A2,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.StatePatch=void 0,b.StatePatch=class z{constructor(){if(this._changedVariables=new Set,this._visitCounts=new Map,this._turnIndices=new Map,1===arguments.length&&null!==arguments[0]){let y=arguments[0];this._globals=new Map(y._globals),this._changedVariables=new Set(y._changedVariables),this._visitCounts=new Map(y._visitCounts),this._turnIndices=new Map(y._turnIndices)}else this._globals=new Map,this._changedVariables=new Set,this._visitCounts=new Map,this._turnIndices=new Map}get globals(){return this._globals}get changedVariables(){return this._changedVariables}get visitCounts(){return this._visitCounts}get turnIndices(){return this._turnIndices}TryGetGlobal(y,O){return null!==y&&this._globals.has(y)?{result:this._globals.get(y),exists:!0}:{result:O,exists:!1}}SetGlobal(y,O){this._globals.set(y,O)}AddChangedVariable(y){return this._changedVariables.add(y)}TryGetVisitCount(y,O){return this._visitCounts.has(y)?{result:this._visitCounts.get(y),exists:!0}:{result:O,exists:!1}}SetVisitCount(y,O){this._visitCounts.set(y,O)}SetTurnIndex(y,O){this._turnIndices.set(y,O)}TryGetTurnIndex(y,O){return this._turnIndices.has(y)?{result:this._turnIndices.get(y),exists:!0}:{result:O,exists:!1}}}},119:(A2,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Stopwatch=void 0,b.Stopwatch=class z{constructor(){this.startTime=void 0}get ElapsedMilliseconds(){return typeof this.startTime>"u"?0:(new Date).getTime()-this.startTime}Start(){this.startTime=(new Date).getTime()}Stop(){this.startTime=void 0}}},441:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Story=b.InkList=void 0;const v=z(372),y=z(522),O=z(936),w=z(884),L=z(517),M=z(927),x=z(793),_=z(904),H=z(462),g=z(843),k=z(313),d=z(565),p=z(912),q=z(618),e2=z(159),n2=z(174),K=z(500),t2=z(947),Y=z(259),p2=z(588),H2=z(119),P=z(689),j=z(673),U=z(138),h=z(919),D=z(764),$=z(767);var f2=z(673);Object.defineProperty(b,"InkList",{enumerable:!0,get:function(){return f2.InkList}}),Number.isInteger||(Number.isInteger=function(m){return"number"==typeof m&&isFinite(m)&&m>-9007199254740992&&m<9007199254740992&&Math.floor(m)===m});class l2 extends y.InkObject{constructor(){super(),this.inkVersionMinimumCompatible=18,this.onError=null,this.onDidContinue=null,this.onMakeChoice=null,this.onEvaluateFunction=null,this.onCompleteEvaluateFunction=null,this.onChoosePathString=null,this._prevContainers=[],this.lastChoice=null,this.lastContainer=null,this.allowExternalFunctionFallbacks=!1,this._listDefinitions=null,this._variableObservers=null,this._hasValidatedExternals=!1,this._temporaryEvaluationContainer=null,this._asyncContinueActive=!1,this._stateSnapshotAtLastNewline=null,this._sawLookaheadUnsafeFunctionAfterNewline=!1,this._recursiveContinueCount=0,this._asyncSaving=!1,this._profiler=null;let m,S=null,N=null;if(arguments[0]instanceof v.Container?(m=arguments[0],typeof arguments[1]<"u"&&(S=arguments[1]),this._mainContentContainer=m):N="string"==typeof arguments[0]?D.SimpleJson.TextToDictionary(arguments[0]):arguments[0],null!=S&&(this._listDefinitions=new p2.ListDefinitionsOrigin(S)),this._externals=new Map,null!==N){let A=N,Q=A.inkVersion;if(null==Q)throw new Error("ink version number not found. Are you sure it's a valid .ink.json file?");let m2=parseInt(Q);if(m2>l2.inkVersionCurrent)throw new Error("Version of ink used to build story was newer than the current version of the engine");if(m2<this.inkVersionMinimumCompatible)throw new Error("Version of ink used to build story is too old to be loaded by this version of the engine");m2!=l2.inkVersionCurrent&&console.warn("WARNING: Version of ink used to build story doesn't match current version of engine. Non-critical, but recommend synchronising.");let I2,T2=A.root;if(null==T2)throw new Error("Root node for ink not found. Are you sure it's a valid .ink.json file?");(I2=A.listDefs)&&(this._listDefinitions=O.JsonSerialisation.JTokenToListDefinitions(I2)),this._mainContentContainer=U.asOrThrows(O.JsonSerialisation.JTokenToRuntimeObject(T2),v.Container),this.ResetState()}}get currentChoices(){let m=[];if(null===this._state)return h.throwNullException("this._state");for(let S of this._state.currentChoices)S.isInvisibleDefault||(S.index=m.length,m.push(S));return m}get currentText(){return this.IfAsyncWeCant("call currentText since it's a work in progress"),this.state.currentText}get currentTags(){return this.IfAsyncWeCant("call currentTags since it's a work in progress"),this.state.currentTags}get currentErrors(){return this.state.currentErrors}get currentWarnings(){return this.state.currentWarnings}get currentFlowName(){return this.state.currentFlowName}get hasError(){return this.state.hasError}get hasWarning(){return this.state.hasWarning}get variablesState(){return this.state.variablesState}get listDefinitions(){return this._listDefinitions}get state(){return this._state}StartProfiling(){}EndProfiling(){}ToJson(m){let S=!1;if(m||(S=!0,m=new D.SimpleJson.Writer),m.WriteObjectStart(),m.WriteIntProperty("inkVersion",l2.inkVersionCurrent),m.WriteProperty("root",N=>O.JsonSerialisation.WriteRuntimeContainer(N,this._mainContentContainer)),null!=this._listDefinitions){m.WritePropertyStart("listDefs"),m.WriteObjectStart();for(let N of this._listDefinitions.lists){m.WritePropertyStart(N.name),m.WriteObjectStart();for(let[A,Q]of N.items){let m2=j.InkListItem.fromSerializedKey(A);m.WriteIntProperty(m2.itemName,Q)}m.WriteObjectEnd(),m.WritePropertyEnd()}m.WriteObjectEnd(),m.WritePropertyEnd()}if(m.WriteObjectEnd(),S)return m.toString()}ResetState(){this.IfAsyncWeCant("ResetState"),this._state=new w.StoryState(this),this._state.variablesState.ObserveVariableChange(this.VariableStateDidChangeEvent.bind(this)),this.ResetGlobals()}ResetErrors(){if(null===this._state)return h.throwNullException("this._state");this._state.ResetErrors()}ResetCallstack(){if(this.IfAsyncWeCant("ResetCallstack"),null===this._state)return h.throwNullException("this._state");this._state.ForceEnd()}ResetGlobals(){if(this._mainContentContainer.namedContent.get("global decl")){let m=this.state.currentPointer.copy();this.ChoosePath(new k.Path("global decl"),!1),this.ContinueInternal(),this.state.currentPointer=m}this.state.variablesState.SnapshotDefaultGlobals()}SwitchFlow(m){if(this.IfAsyncWeCant("switch flow"),this._asyncSaving)throw new Error("Story is already in background saving mode, can't switch flow to "+m);this.state.SwitchFlow_Internal(m)}RemoveFlow(m){this.state.RemoveFlow_Internal(m)}SwitchToDefaultFlow(){this.state.SwitchToDefaultFlow_Internal()}Continue(){return this.ContinueAsync(0),this.currentText}get canContinue(){return this.state.canContinue}get asyncContinueComplete(){return!this._asyncContinueActive}ContinueAsync(m){this._hasValidatedExternals||this.ValidateExternalBindings(),this.ContinueInternal(m)}ContinueInternal(m=0){null!=this._profiler&&this._profiler.PreContinue();let S=m>0;if(this._recursiveContinueCount++,!this._asyncContinueActive){if(this._asyncContinueActive=S,!this.canContinue)throw new Error("Can't continue - should check canContinue before calling Continue");this._state.didSafeExit=!1,this._state.ResetOutput(),1==this._recursiveContinueCount&&(this._state.variablesState.batchObservingVariableChanges=!0)}let N=new H2.Stopwatch;N.Start();let A=!1;this._sawLookaheadUnsafeFunctionAfterNewline=!1;do{try{A=this.ContinueSingleStep()}catch(Q){if(!(Q instanceof K.StoryException))throw Q;this.AddError(Q.message,void 0,Q.useEndLineNumber);break}if(A||this._asyncContinueActive&&N.ElapsedMilliseconds>m)break}while(this.canContinue);if(N.Stop(),(A||!this.canContinue)&&(null!==this._stateSnapshotAtLastNewline&&this.RestoreStateSnapshot(),this.canContinue||(this.state.callStack.canPopThread&&this.AddError("Thread available to pop, threads should always be flat by the end of evaluation?"),0==this.state.generatedChoices.length&&!this.state.didSafeExit&&null==this._temporaryEvaluationContainer&&(this.state.callStack.CanPop(M.PushPopType.Tunnel)?this.AddError("unexpectedly reached end of content. Do you need a '->->' to return from a tunnel?"):this.state.callStack.CanPop(M.PushPopType.Function)?this.AddError("unexpectedly reached end of content. Do you need a '~ return'?"):this.AddError(this.state.callStack.canPop?"unexpectedly reached end of content for unknown reason. Please debug compiler!":"ran out of content. Do you need a '-> DONE' or '-> END'?"))),this.state.didSafeExit=!1,this._sawLookaheadUnsafeFunctionAfterNewline=!1,1==this._recursiveContinueCount&&(this._state.variablesState.batchObservingVariableChanges=!1),this._asyncContinueActive=!1,null!==this.onDidContinue&&this.onDidContinue()),this._recursiveContinueCount--,null!=this._profiler&&this._profiler.PostContinue(),this.state.hasError||this.state.hasWarning){if(null===this.onError){let Q=new Y.StringBuilder;throw Q.Append("Ink had "),this.state.hasError&&(Q.Append(`${this.state.currentErrors.length}`),Q.Append(1==this.state.currentErrors.length?" error":"errors"),this.state.hasWarning&&Q.Append(" and ")),this.state.hasWarning&&(Q.Append(`${this.state.currentWarnings.length}`),Q.Append(1==this.state.currentWarnings.length?" warning":"warnings"),this.state.hasWarning&&Q.Append(" and ")),Q.Append(". It is strongly suggested that you assign an error handler to story.onError. The first issue was: "),Q.Append(this.state.hasError?this.state.currentErrors[0]:this.state.currentWarnings[0]),new K.StoryException(Q.toString())}if(this.state.hasError)for(let Q of this.state.currentErrors)this.onError(Q,$.ErrorType.Error);if(this.state.hasWarning)for(let Q of this.state.currentWarnings)this.onError(Q,$.ErrorType.Warning);this.ResetErrors()}}ContinueSingleStep(){if(null!=this._profiler&&this._profiler.PreStep(),this.Step(),null!=this._profiler&&this._profiler.PostStep(),!this.canContinue&&!this.state.callStack.elementIsEvaluateFromGame&&this.TryFollowDefaultInvisibleChoice(),null!=this._profiler&&this._profiler.PreSnapshot(),!this.state.inStringEvaluation){if(null!==this._stateSnapshotAtLastNewline){if(null===this._stateSnapshotAtLastNewline.currentTags)return h.throwNullException("this._stateAtLastNewline.currentTags");if(null===this.state.currentTags)return h.throwNullException("this.state.currentTags");let m=this.CalculateNewlineOutputStateChange(this._stateSnapshotAtLastNewline.currentText,this.state.currentText,this._stateSnapshotAtLastNewline.currentTags.length,this.state.currentTags.length);if(m==l2.OutputStateChange.ExtendedBeyondNewline||this._sawLookaheadUnsafeFunctionAfterNewline)return this.RestoreStateSnapshot(),!0;m==l2.OutputStateChange.NewlineRemoved&&this.DiscardSnapshot()}this.state.outputStreamEndsInNewline&&(this.canContinue?null==this._stateSnapshotAtLastNewline&&this.StateSnapshot():this.DiscardSnapshot())}return null!=this._profiler&&this._profiler.PostSnapshot(),!1}CalculateNewlineOutputStateChange(m,S,N,A){if(null===m)return h.throwNullException("prevText");if(null===S)return h.throwNullException("currText");let Q=S.length>=m.length&&"\n"==S.charAt(m.length-1);if(N==A&&m.length==S.length&&Q)return l2.OutputStateChange.NoChange;if(!Q)return l2.OutputStateChange.NewlineRemoved;if(A>N)return l2.OutputStateChange.ExtendedBeyondNewline;for(let m2=m.length;m2<S.length;m2++){let T2=S.charAt(m2);if(" "!=T2&&"\t"!=T2)return l2.OutputStateChange.ExtendedBeyondNewline}return l2.OutputStateChange.NoChange}ContinueMaximally(){this.IfAsyncWeCant("ContinueMaximally");let m=new Y.StringBuilder;for(;this.canContinue;)m.Append(this.Continue());return m.toString()}ContentAtPath(m){return this.mainContentContainer.ContentAtPath(m)}KnotContainerWithName(m){let S=this.mainContentContainer.namedContent.get(m);return S instanceof v.Container?S:null}PointerAtPath(m){if(0==m.length)return P.Pointer.Null;let S=new P.Pointer,N=m.length,A=null;return null===m.lastComponent?h.throwNullException("path.lastComponent"):(m.lastComponent.isIndex?(N=m.length-1,A=this.mainContentContainer.ContentAtPath(m,void 0,N),S.container=A.container,S.index=m.lastComponent.index):(A=this.mainContentContainer.ContentAtPath(m),S.container=A.container,S.index=-1),null==A.obj||A.obj==this.mainContentContainer&&N>0?this.Error("Failed to find content at path '"+m+"', and no approximation of it was possible."):A.approximate&&this.Warning("Failed to find content at path '"+m+"', so it was approximated to: '"+A.obj.path+"'."),S)}StateSnapshot(){this._stateSnapshotAtLastNewline=this._state,this._state=this._state.CopyAndStartPatching()}RestoreStateSnapshot(){null===this._stateSnapshotAtLastNewline&&h.throwNullException("_stateSnapshotAtLastNewline"),this._stateSnapshotAtLastNewline.RestoreAfterPatch(),this._state=this._stateSnapshotAtLastNewline,this._stateSnapshotAtLastNewline=null,this._asyncSaving||this._state.ApplyAnyPatch()}DiscardSnapshot(){this._asyncSaving||this._state.ApplyAnyPatch(),this._stateSnapshotAtLastNewline=null}CopyStateForBackgroundThreadSave(){if(this.IfAsyncWeCant("start saving on a background thread"),this._asyncSaving)throw new Error("Story is already in background saving mode, can't call CopyStateForBackgroundThreadSave again!");let m=this._state;return this._state=this._state.CopyAndStartPatching(),this._asyncSaving=!0,m}BackgroundSaveComplete(){null===this._stateSnapshotAtLastNewline&&this._state.ApplyAnyPatch(),this._asyncSaving=!1}Step(){let m=!0,S=this.state.currentPointer.copy();if(S.isNull)return;let N=U.asOrNull(S.Resolve(),v.Container);for(;N&&(this.VisitContainer(N,!0),0!=N.content.length);)S=P.Pointer.StartOf(N),N=U.asOrNull(S.Resolve(),v.Container);this.state.currentPointer=S.copy(),null!=this._profiler&&this._profiler.Step(this.state.callStack);let A=S.Resolve(),Q=this.PerformLogicAndFlowControl(A);if(this.state.currentPointer.isNull)return;Q&&(m=!1);let m2=U.asOrNull(A,x.ChoicePoint);if(m2){let I2=this.ProcessChoice(m2);I2&&this.state.generatedChoices.push(I2),A=null,m=!1}if(A instanceof v.Container&&(m=!1),m){let I2=U.asOrNull(A,g.VariablePointerValue);if(I2&&-1==I2.contextIndex){let E1=this.state.callStack.ContextForVariableNamed(I2.variableName);A=new g.VariablePointerValue(I2.variableName,E1)}this.state.inExpressionEvaluation?this.state.PushEvaluationStack(A):this.state.PushToOutputStream(A)}this.NextContent();let T2=U.asOrNull(A,L.ControlCommand);T2&&T2.commandType==L.ControlCommand.CommandType.StartThread&&this.state.callStack.PushThread()}VisitContainer(m,S){(!m.countingAtStartOnly||S)&&(m.visitsShouldBeCounted&&this.state.IncrementVisitCountForContainer(m),m.turnIndexShouldBeCounted&&this.state.RecordTurnIndexVisitToContainer(m))}VisitChangedContainersDueToDivert(){let m=this.state.previousPointer.copy(),S=this.state.currentPointer.copy();if(S.isNull||-1==S.index)return;if(this._prevContainers.length=0,!m.isNull){let m2=m.Resolve(),T2=U.asOrNull(m2,v.Container)||U.asOrNull(m.container,v.Container);for(;T2;)this._prevContainers.push(T2),T2=U.asOrNull(T2.parent,v.Container)}let N=S.Resolve();if(null==N)return;let A=U.asOrNull(N.parent,v.Container),Q=!0;for(;A&&(this._prevContainers.indexOf(A)<0||A.countingAtStartOnly);){let m2=A.content.length>0&&N==A.content[0]&&Q;m2||(Q=!1),this.VisitContainer(A,m2),N=A,A=U.asOrNull(A.parent,v.Container)}}ProcessChoice(m){let S=!0;if(m.hasCondition){let m2=this.state.PopEvaluationStack();this.IsTruthy(m2)||(S=!1)}let N="",A="";if(m.hasChoiceOnlyContent&&(A=U.asOrThrows(this.state.PopEvaluationStack(),g.StringValue).value||""),m.hasStartContent&&(N=U.asOrThrows(this.state.PopEvaluationStack(),g.StringValue).value||""),m.onceOnly&&this.state.VisitCountForContainer(m.choiceTarget)>0&&(S=!1),!S)return null;let Q=new _.Choice;return Q.targetPath=m.pathOnChoice,Q.sourcePath=m.path.toString(),Q.isInvisibleDefault=m.isInvisibleDefault,Q.threadAtGeneration=this.state.callStack.ForkThread(),Q.text=(N+A).replace(/^[ \t]+|[ \t]+$/g,""),Q}IsTruthy(m){if(m instanceof g.Value){let N=m;return N instanceof g.DivertTargetValue?(this.Error("Shouldn't use a divert target (to "+N.targetPath+") as a conditional value. Did you intend a function call 'likeThis()' or a read count check 'likeThis'? (no arrows)"),!1):N.isTruthy}return!1}PerformLogicAndFlowControl(m){if(null==m)return!1;if(m instanceof H.Divert){let S=m;if(S.isConditional){let N=this.state.PopEvaluationStack();if(!this.IsTruthy(N))return!0}if(S.hasVariableTarget){let N=S.variableDivertName,A=this.state.variablesState.GetVariableWithName(N);if(null==A)this.Error("Tried to divert using a target from a variable that could not be found ("+N+")");else if(!(A instanceof g.DivertTargetValue)){let m2=U.asOrNull(A,g.IntValue),T2="Tried to divert to a target from a variable, but the variable ("+N+") didn't contain a divert target, it ";T2+=m2 instanceof g.IntValue&&0==m2.value?"was empty/null (the value 0).":"contained '"+A+"'.",this.Error(T2)}let Q=U.asOrThrows(A,g.DivertTargetValue);this.state.divertedPointer=this.PointerAtPath(Q.targetPath)}else{if(S.isExternal)return this.CallExternalFunction(S.targetPathString,S.externalArgs),!0;this.state.divertedPointer=S.targetPointer.copy()}return S.pushesToStack&&this.state.callStack.Push(S.stackPushType,void 0,this.state.outputStream.length),this.state.divertedPointer.isNull&&!S.isExternal&&this.Error(S&&S.debugMetadata&&null!=S.debugMetadata.sourceName?"Divert target doesn't exist: "+S.debugMetadata.sourceName:"Divert resolution failed: "+S),!0}if(m instanceof L.ControlCommand){let S=m;switch(S.commandType){case L.ControlCommand.CommandType.EvalStart:this.Assert(!1===this.state.inExpressionEvaluation,"Already in expression evaluation?"),this.state.inExpressionEvaluation=!0;break;case L.ControlCommand.CommandType.EvalEnd:this.Assert(!0===this.state.inExpressionEvaluation,"Not in expression evaluation mode"),this.state.inExpressionEvaluation=!1;break;case L.ControlCommand.CommandType.EvalOutput:if(this.state.evaluationStack.length>0){let G2=this.state.PopEvaluationStack();if(!(G2 instanceof d.Void)){let h1=new g.StringValue(G2.toString());this.state.PushToOutputStream(h1)}}break;case L.ControlCommand.CommandType.NoOp:break;case L.ControlCommand.CommandType.Duplicate:this.state.PushEvaluationStack(this.state.PeekEvaluationStack());break;case L.ControlCommand.CommandType.PopEvaluatedValue:this.state.PopEvaluationStack();break;case L.ControlCommand.CommandType.PopFunction:case L.ControlCommand.CommandType.PopTunnel:let N=S.commandType==L.ControlCommand.CommandType.PopFunction?M.PushPopType.Function:M.PushPopType.Tunnel,A=null;if(N==M.PushPopType.Tunnel){let G2=this.state.PopEvaluationStack();A=U.asOrNull(G2,g.DivertTargetValue),null===A&&this.Assert(G2 instanceof d.Void,"Expected void if ->-> doesn't override target")}if(this.state.TryExitFunctionEvaluationFromGame())break;if(this.state.callStack.currentElement.type==N&&this.state.callStack.canPop)this.state.PopCallStack(),A&&(this.state.divertedPointer=this.PointerAtPath(A.targetPath));else{let G2=new Map;G2.set(M.PushPopType.Function,"function return statement (~ return)"),G2.set(M.PushPopType.Tunnel,"tunnel onwards statement (->->)");let h1=G2.get(this.state.callStack.currentElement.type);this.state.callStack.canPop||(h1="end of flow (-> END or choice)");let w1="Found "+G2.get(N)+", when expected "+h1;this.Error(w1)}break;case L.ControlCommand.CommandType.BeginString:this.state.PushToOutputStream(S),this.Assert(!0===this.state.inExpressionEvaluation,"Expected to be in an expression when evaluating a string"),this.state.inExpressionEvaluation=!1;break;case L.ControlCommand.CommandType.EndString:let Q=[],m2=0;for(let G2=this.state.outputStream.length-1;G2>=0;--G2){let h1=this.state.outputStream[G2];m2++;let w1=U.asOrNull(h1,L.ControlCommand);if(w1&&w1.commandType==L.ControlCommand.CommandType.BeginString)break;h1 instanceof g.StringValue&&Q.push(h1)}this.state.PopFromOutputStream(m2),Q=Q.reverse();let T2=new Y.StringBuilder;for(let G2 of Q)T2.Append(G2.toString());this.state.inExpressionEvaluation=!0,this.state.PushEvaluationStack(new g.StringValue(T2.toString()));break;case L.ControlCommand.CommandType.ChoiceCount:this.state.PushEvaluationStack(new g.IntValue(this.state.generatedChoices.length));break;case L.ControlCommand.CommandType.Turns:this.state.PushEvaluationStack(new g.IntValue(this.state.currentTurnIndex+1));break;case L.ControlCommand.CommandType.TurnsSince:case L.ControlCommand.CommandType.ReadCount:let E1=this.state.PopEvaluationStack();if(!(E1 instanceof g.DivertTargetValue)){let G2="";E1 instanceof g.IntValue&&(G2=". Did you accidentally pass a read count ('knot_name') instead of a target ('-> knot_name')?"),this.Error("TURNS_SINCE / READ_COUNT expected a divert target (knot, stitch, label name), but saw "+E1+G2);break}let F2,R3=U.asOrThrows(E1,g.DivertTargetValue),l1=U.asOrNull(this.ContentAtPath(R3.targetPath).correctObj,v.Container);null!=l1?F2=S.commandType==L.ControlCommand.CommandType.TurnsSince?this.state.TurnsSinceForContainer(l1):this.state.VisitCountForContainer(l1):(F2=S.commandType==L.ControlCommand.CommandType.TurnsSince?-1:0,this.Warning("Failed to find container for "+S.toString()+" lookup at "+R3.targetPath.toString())),this.state.PushEvaluationStack(new g.IntValue(F2));break;case L.ControlCommand.CommandType.Random:{let G2=U.asOrNull(this.state.PopEvaluationStack(),g.IntValue),h1=U.asOrNull(this.state.PopEvaluationStack(),g.IntValue);if(null==h1||!(h1 instanceof g.IntValue))return this.Error("Invalid value for minimum parameter of RANDOM(min, max)");if(null==G2||!(h1 instanceof g.IntValue))return this.Error("Invalid value for maximum parameter of RANDOM(min, max)");if(null===G2.value)return h.throwNullException("maxInt.value");if(null===h1.value)return h.throwNullException("minInt.value");let w1=G2.value-h1.value+1;(!isFinite(w1)||w1>Number.MAX_SAFE_INTEGER)&&(w1=Number.MAX_SAFE_INTEGER,this.Error("RANDOM was called with a range that exceeds the size that ink numbers can use.")),w1<=0&&this.Error("RANDOM was called with minimum as "+h1.value+" and maximum as "+G2.value+". The maximum must be larger");let ge=new t2.PRNG(this.state.storySeed+this.state.previousRandom).next();this.state.PushEvaluationStack(new g.IntValue(ge%w1+h1.value)),this.state.previousRandom=ge;break}case L.ControlCommand.CommandType.SeedRandom:let d1=U.asOrNull(this.state.PopEvaluationStack(),g.IntValue);if(null==d1||!(d1 instanceof g.IntValue))return this.Error("Invalid value passed to SEED_RANDOM");if(null===d1.value)return h.throwNullException("minInt.value");this.state.storySeed=d1.value,this.state.previousRandom=0,this.state.PushEvaluationStack(new d.Void);break;case L.ControlCommand.CommandType.VisitIndex:let P1=this.state.VisitCountForContainer(this.state.currentPointer.container)-1;this.state.PushEvaluationStack(new g.IntValue(P1));break;case L.ControlCommand.CommandType.SequenceShuffleIndex:let K4=this.NextSequenceShuffleIndex();this.state.PushEvaluationStack(new g.IntValue(K4));break;case L.ControlCommand.CommandType.StartThread:break;case L.ControlCommand.CommandType.Done:this.state.callStack.canPopThread?this.state.callStack.PopThread():(this.state.didSafeExit=!0,this.state.currentPointer=P.Pointer.Null);break;case L.ControlCommand.CommandType.End:this.state.ForceEnd();break;case L.ControlCommand.CommandType.ListFromInt:let g6=U.asOrNull(this.state.PopEvaluationStack(),g.IntValue),v6=U.asOrThrows(this.state.PopEvaluationStack(),g.StringValue);if(null===g6)throw new K.StoryException("Passed non-integer when creating a list element from a numerical value.");let M6=null;if(null===this.listDefinitions)return h.throwNullException("this.listDefinitions");let vn=this.listDefinitions.TryListGetDefinition(v6.value,null);if(!vn.exists)throw new K.StoryException("Failed to find LIST called "+v6.value);{if(null===g6.value)return h.throwNullException("minInt.value");let G2=vn.result.TryGetItemWithValue(g6.value,j.InkListItem.Null);G2.exists&&(M6=new g.ListValue(G2.result,g6.value))}null==M6&&(M6=new g.ListValue),this.state.PushEvaluationStack(M6);break;case L.ControlCommand.CommandType.ListRange:let Mn=U.asOrNull(this.state.PopEvaluationStack(),g.Value),Ln=U.asOrNull(this.state.PopEvaluationStack(),g.Value),L6=U.asOrNull(this.state.PopEvaluationStack(),g.ListValue);if(null===L6||null===Ln||null===Mn)throw new K.StoryException("Expected list, minimum and maximum for LIST_RANGE");if(null===L6.value)return h.throwNullException("targetList.value");let Fa=L6.value.ListWithSubRange(Ln.valueObject,Mn.valueObject);this.state.PushEvaluationStack(new g.ListValue(Fa));break;case L.ControlCommand.CommandType.ListRandom:{let G2=this.state.PopEvaluationStack();if(null===G2)throw new K.StoryException("Expected list for LIST_RANDOM");let h1=G2.value,w1=null;if(null===h1)throw h.throwNullException("list");if(0==h1.Count)w1=new j.InkList;else{let ge=new t2.PRNG(this.state.storySeed+this.state.previousRandom).next(),T5=ge%h1.Count,B3=h1.entries();for(let I5=0;I5<=T5-1;I5++)B3.next();let O5=B3.next().value,y6={Key:j.InkListItem.fromSerializedKey(O5[0]),Value:O5[1]};if(null===y6.Key.originName)return h.throwNullException("randomItem.Key.originName");w1=new j.InkList(y6.Key.originName,this),w1.Add(y6.Key,y6.Value),this.state.previousRandom=ge}this.state.PushEvaluationStack(new g.ListValue(w1));break}default:this.Error("unhandled ControlCommand: "+S)}return!0}if(m instanceof q.VariableAssignment){let S=m,N=this.state.PopEvaluationStack();return this.state.variablesState.Assign(S,N),!0}if(m instanceof e2.VariableReference){let S=m,N=null;if(null!=S.pathForCount){let Q=this.state.VisitCountForContainer(S.containerForCount);N=new g.IntValue(Q)}else N=this.state.variablesState.GetVariableWithName(S.name),null==N&&(this.Warning("Variable not found: '"+S.name+"'. Using default value of 0 (false). This can happen with temporary variables if the declaration hasn't yet been hit. Globals are always given a default value on load if a value doesn't exist in the save state."),N=new g.IntValue(0));return this.state.PushEvaluationStack(N),!0}if(m instanceof n2.NativeFunctionCall){let S=m,N=this.state.PopEvaluationStack(S.numberOfParameters),A=S.Call(N);return this.state.PushEvaluationStack(A),!0}return!1}ChoosePathString(m,S=!0,N=[]){if(this.IfAsyncWeCant("call ChoosePathString right now"),null!==this.onChoosePathString&&this.onChoosePathString(m,N),S)this.ResetCallstack();else if(this.state.callStack.currentElement.type==M.PushPopType.Function){let A="",Q=this.state.callStack.currentElement.currentPointer.container;throw null!=Q&&(A="("+Q.path.toString()+") "),new Error("Story was running a function "+A+"when you called ChoosePathString("+m+") - this is almost certainly not not what you want! Full stack trace: \n"+this.state.callStack.callStackTrace)}this.state.PassArgumentsToEvaluationStack(N),this.ChoosePath(new k.Path(m))}IfAsyncWeCant(m){if(this._asyncContinueActive)throw new Error("Can't "+m+". Story is in the middle of a ContinueAsync(). Make more ContinueAsync() calls or a single Continue() call beforehand.")}ChoosePath(m,S=!0){this.state.SetChosenPath(m,S),this.VisitChangedContainersDueToDivert()}CryForMeArgentina(){console.log("don't",this.lastChoice,this.lastContainer)}ChooseChoiceIndex(m){let S=this.currentChoices;this.Assert(m>=0&&m<S.length,"choice out of range");let N=S[m];return null!==this.onMakeChoice&&this.onMakeChoice(N),null===N.threadAtGeneration?h.throwNullException("choiceToChoose.threadAtGeneration"):null===N.targetPath?h.throwNullException("choiceToChoose.targetPath"):(this.lastChoice=N,this.state.callStack.currentThread=N.threadAtGeneration,void this.ChoosePath(N.targetPath))}HasFunction(m){try{return null!=this.KnotContainerWithName(m)}catch{return!1}}EvaluateFunction(m,S=[],N=!1){if(null!==this.onEvaluateFunction&&this.onEvaluateFunction(m,S),this.IfAsyncWeCant("evaluate a function"),null==m)throw new Error("Function is null");if(""==m||""==m.trim())throw new Error("Function is empty or white space.");let A=this.KnotContainerWithName(m);if(null==A)throw new Error("Function doesn't exist: '"+m+"'");let Q=[];Q.push(...this.state.outputStream),this._state.ResetOutput(),this.state.StartFunctionEvaluationFromGame(A,S);let m2=new Y.StringBuilder;for(;this.canContinue;)m2.Append(this.Continue());let T2=m2.toString();this._state.ResetOutput(Q);let I2=this.state.CompleteFunctionEvaluationFromGame();return null!=this.onCompleteEvaluateFunction&&this.onCompleteEvaluateFunction(m,S,T2,I2),N?{returned:I2,output:T2}:I2}EvaluateExpression(m){let S=this.state.callStack.elements.length;this.state.callStack.Push(M.PushPopType.Tunnel),this._temporaryEvaluationContainer=m,this.lastContainer=m,this.state.GoToStart();let N=this.state.evaluationStack.length;return this.Continue(),this._temporaryEvaluationContainer=null,this.state.callStack.elements.length>S&&this.state.PopCallStack(),this.state.evaluationStack.length>N?this.state.PopEvaluationStack():null}CallExternalFunction(m,S){if(null===m)return h.throwNullException("funcName");let N=this._externals.get(m),A=null,Q=typeof N<"u";if(Q&&!N.lookAheadSafe&&null!==this._stateSnapshotAtLastNewline)return void(this._sawLookaheadUnsafeFunctionAfterNewline=!0);if(!Q){if(this.allowExternalFunctionFallbacks)return A=this.KnotContainerWithName(m),this.Assert(null!==A,"Trying to call EXTERNAL function '"+m+"' which has not been bound, and fallback ink function could not be found."),this.state.callStack.Push(M.PushPopType.Function,void 0,this.state.outputStream.length),void(this.state.divertedPointer=P.Pointer.StartOf(A));this.Assert(!1,"Trying to call EXTERNAL function '"+m+"' which has not been bound (and ink fallbacks disabled).")}let m2=[];for(let E1=0;E1<S;++E1){let l1=U.asOrThrows(this.state.PopEvaluationStack(),g.Value).valueObject;m2.push(l1)}m2.reverse();let T2=N.function(m2),I2=null;null!=T2?(I2=g.Value.Create(T2),this.Assert(null!==I2,"Could not create ink value from returned object of type "+typeof T2)):I2=new d.Void,this.state.PushEvaluationStack(I2)}BindExternalFunctionGeneral(m,S,N){this.IfAsyncWeCant("bind an external function"),this.Assert(!this._externals.has(m),"Function '"+m+"' has already been bound."),this._externals.set(m,{function:S,lookAheadSafe:N})}TryCoerce(m){return m}BindExternalFunction(m,S,N){this.Assert(null!=S,"Can't bind a null function"),this.BindExternalFunctionGeneral(m,A=>{this.Assert(A.length>=S.length,"External function expected "+S.length+" arguments");let Q=[];for(let m2=0,T2=A.length;m2<T2;m2++)Q[m2]=this.TryCoerce(A[m2]);return S.apply(null,Q)},N)}UnbindExternalFunction(m){this.IfAsyncWeCant("unbind an external a function"),this.Assert(this._externals.has(m),"Function '"+m+"' has not been bound."),this._externals.delete(m)}ValidateExternalBindings(){let m=null,S=null,N=arguments[1]||new Set;if(arguments[0]instanceof v.Container&&(m=arguments[0]),arguments[0]instanceof y.InkObject&&(S=arguments[0]),null===m&&null===S)if(this.ValidateExternalBindings(this._mainContentContainer,N),this._hasValidatedExternals=!0,0==N.size)this._hasValidatedExternals=!0;else{let A="Error: Missing function binding for external";A+=N.size>1?"s":"",A+=": '",A+=Array.from(N).join("', '"),A+="' ",A+=this.allowExternalFunctionFallbacks?", and no fallback ink function found.":" (ink fallbacks disabled)",this.Error(A)}else if(null!=m){for(let A of m.content){let Q=A;(null==Q||!Q.hasValidName)&&this.ValidateExternalBindings(A,N)}for(let[,A]of m.namedContent)this.ValidateExternalBindings(U.asOrNull(A,y.InkObject),N)}else if(null!=S){let A=U.asOrNull(S,H.Divert);if(A&&A.isExternal){let Q=A.targetPathString;if(null===Q)return h.throwNullException("name");this._externals.has(Q)||this.allowExternalFunctionFallbacks&&this.mainContentContainer.namedContent.has(Q)||N.add(Q)}}}ObserveVariable(m,S){if(this.IfAsyncWeCant("observe a new variable"),null===this._variableObservers&&(this._variableObservers=new Map),!this.state.variablesState.GlobalVariableExistsWithName(m))throw new Error("Cannot observe variable '"+m+"' because it wasn't declared in the ink story.");this._variableObservers.has(m)?this._variableObservers.get(m).push(S):this._variableObservers.set(m,[S])}ObserveVariables(m,S){for(let N=0,A=m.length;N<A;N++)this.ObserveVariable(m[N],S[N])}RemoveVariableObserver(m,S){if(this.IfAsyncWeCant("remove a variable observer"),null!==this._variableObservers)if(null!=S){if(this._variableObservers.has(S))if(null!=m){let N=this._variableObservers.get(S);null!=N&&(N.splice(N.indexOf(m),1),0===N.length&&this._variableObservers.delete(S))}else this._variableObservers.delete(S)}else if(null!=m){let N=this._variableObservers.keys();for(let A of N){let Q=this._variableObservers.get(A);null!=Q&&(Q.splice(Q.indexOf(m),1),0===Q.length&&this._variableObservers.delete(A))}}}VariableStateDidChangeEvent(m,S){if(null===this._variableObservers)return;let N=this._variableObservers.get(m);if(typeof N<"u"){if(!(S instanceof g.Value))throw new Error("Tried to get the value of a variable that isn't a standard type");let A=U.asOrThrows(S,g.Value);for(let Q of N)Q(m,A.valueObject)}}get globalTags(){return this.TagsAtStartOfFlowContainerWithPathString("")}TagsForContentAtPath(m){return this.TagsAtStartOfFlowContainerWithPathString(m)}TagsAtStartOfFlowContainerWithPathString(m){let S=new k.Path(m),N=this.ContentAtPath(S).container;if(null===N)return h.throwNullException("flowContainer");for(;;){let Q=N.content[0];if(!(Q instanceof v.Container))break;N=Q}let A=null;for(let Q of N.content){let m2=U.asOrNull(Q,p.Tag);if(!m2)break;null==A&&(A=[]),A.push(m2.text)}return A}BuildStringOfHierarchy(){let m=new Y.StringBuilder;return this.mainContentContainer.BuildStringOfHierarchy(m,0,this.state.currentPointer.Resolve()),m.toString()}BuildStringOfContainer(m){let S=new Y.StringBuilder;return m.BuildStringOfHierarchy(S,0,this.state.currentPointer.Resolve()),S.toString()}NextContent(){if(this.state.previousPointer=this.state.currentPointer.copy(),(this.state.divertedPointer.isNull||(this.state.currentPointer=this.state.divertedPointer.copy(),this.state.divertedPointer=P.Pointer.Null,this.VisitChangedContainersDueToDivert(),this.state.currentPointer.isNull))&&!this.IncrementContentPointer()){let S=!1;this.state.callStack.CanPop(M.PushPopType.Function)?(this.state.PopCallStack(M.PushPopType.Function),this.state.inExpressionEvaluation&&this.state.PushEvaluationStack(new d.Void),S=!0):this.state.callStack.canPopThread?(this.state.callStack.PopThread(),S=!0):this.state.TryExitFunctionEvaluationFromGame(),S&&!this.state.currentPointer.isNull&&this.NextContent()}}IncrementContentPointer(){let m=!0,S=this.state.callStack.currentElement.currentPointer.copy();if(S.index++,null===S.container)return h.throwNullException("pointer.container");for(;S.index>=S.container.content.length;){m=!1;let N=U.asOrNull(S.container.parent,v.Container);if(!(N instanceof v.Container))break;let A=N.content.indexOf(S.container);if(-1==A)break;if(S=new P.Pointer(N,A),S.index++,m=!0,null===S.container)return h.throwNullException("pointer.container")}return m||(S=P.Pointer.Null),this.state.callStack.currentElement.currentPointer=S.copy(),m}TryFollowDefaultInvisibleChoice(){let m=this._state.currentChoices,S=m.filter(A=>A.isInvisibleDefault);if(0==S.length||m.length>S.length)return!1;let N=S[0];return null===N.targetPath?h.throwNullException("choice.targetPath"):null===N.threadAtGeneration?h.throwNullException("choice.threadAtGeneration"):(this.state.callStack.currentThread=N.threadAtGeneration,null!==this._stateSnapshotAtLastNewline&&(this.state.callStack.currentThread=this.state.callStack.ForkThread()),this.ChoosePath(N.targetPath,!1),!0)}NextSequenceShuffleIndex(){let m=U.asOrNull(this.state.PopEvaluationStack(),g.IntValue);if(!(m instanceof g.IntValue))return this.Error("expected number of elements in sequence for shuffle index"),0;let S=this.state.currentPointer.container;if(null===S)return h.throwNullException("seqContainer");if(null===m.value)return h.throwNullException("numElementsIntVal.value");let N=m.value,Q=U.asOrThrows(this.state.PopEvaluationStack(),g.IntValue).value;if(null===Q)return h.throwNullException("seqCount");let m2=Q/N,T2=Q%N,I2=S.path.toString(),E1=0;for(let d1=0,P1=I2.length;d1<P1;d1++)E1+=I2.charCodeAt(d1)||0;let l1=new t2.PRNG(Math.floor(E1+m2+this.state.storySeed)),F2=[];for(let d1=0;d1<N;++d1)F2.push(d1);for(let d1=0;d1<=T2;++d1){let P1=l1.next()%F2.length,K4=F2[P1];if(F2.splice(P1,1),d1==T2)return K4}throw new Error("Should never reach here")}Error(m,S=!1){let N=new K.StoryException(m);throw N.useEndLineNumber=S,N}Warning(m){this.AddError(m,!0)}AddError(m,S=!1,N=!1){let A=this.currentDebugMetadata,Q=S?"WARNING":"ERROR";this.state.AddError(m=null!=A?"RUNTIME "+Q+": '"+A.fileName+"' line "+(N?A.endLineNumber:A.startLineNumber)+": "+m:this.state.currentPointer.isNull?"RUNTIME "+Q+": "+m:"RUNTIME "+Q+": ("+this.state.currentPointer+"): "+m,S),S||this.state.ForceEnd()}Assert(m,S=null){if(0==m)throw null==S&&(S="Story assert"),new Error(S+" "+this.currentDebugMetadata)}get currentDebugMetadata(){let m,S=this.state.currentPointer;if(!S.isNull&&null!==S.Resolve()&&(m=S.Resolve().debugMetadata,null!==m))return m;for(let N=this.state.callStack.elements.length-1;N>=0;--N)if(S=this.state.callStack.elements[N].currentPointer,!S.isNull&&null!==S.Resolve()&&(m=S.Resolve().debugMetadata,null!==m))return m;for(let N=this.state.outputStream.length-1;N>=0;--N)if(m=this.state.outputStream[N].debugMetadata,null!==m)return m;return null}get mainContentContainer(){return this._temporaryEvaluationContainer?this._temporaryEvaluationContainer:this._mainContentContainer}}b.Story=l2,l2.inkVersionCurrent=20,function(N2){let m;var S;(S=m=N2.OutputStateChange||(N2.OutputStateChange={}))[S.NoChange=0]="NoChange",S[S.ExtendedBeyondNewline=1]="ExtendedBeyondNewline",S[S.NewlineRemoved=2]="NewlineRemoved"}(l2=b.Story||(b.Story={}))},500:(A2,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.StoryException=void 0;class z extends Error{constructor(y){super(y),this.useEndLineNumber=!1,this.message=y,this.name="StoryException"}}b.StoryException=z},884:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.StoryState=void 0;const v=z(802),y=z(822),O=z(843),w=z(927),L=z(912),M=z(729),x=z(313),_=z(517),H=z(259),g=z(936),k=z(947),d=z(565),p=z(689),q=z(723),e2=z(138),n2=z(966),K=z(919),t2=z(441),Y=z(169),p2=z(764),H2=z(532),P=z(673);class j{constructor(h){this.kInkSaveStateVersion=9,this.kMinCompatibleLoadVersion=8,this.onDidLoadState=null,this._currentErrors=null,this._currentWarnings=null,this.divertedPointer=p.Pointer.Null,this._currentTurnIndex=0,this.storySeed=0,this.previousRandom=0,this.didSafeExit=!1,this._currentText=null,this._currentTags=null,this._outputStreamTextDirty=!0,this._outputStreamTagsDirty=!0,this._patch=null,this._namedFlows=null,this.kDefaultFlowName="DEFAULT_FLOW",this.story=h,this._currentFlow=new H2.Flow(this.kDefaultFlowName,h),this.OutputStreamDirty(),this._evaluationStack=[],this._variablesState=new y.VariablesState(this.callStack,h.listDefinitions),this._visitCounts=new Map,this._turnIndices=new Map,this.currentTurnIndex=-1;let D=(new Date).getTime();this.storySeed=new k.PRNG(D).next()%100,this.previousRandom=0,this.GoToStart()}ToJson(h=!1){let D=new p2.SimpleJson.Writer;return this.WriteJson(D),D.toString()}toJson(h=!1){return this.ToJson(h)}LoadJson(h){let D=p2.SimpleJson.TextToDictionary(h);this.LoadJsonObj(D),null!==this.onDidLoadState&&this.onDidLoadState()}VisitCountAtPathString(h){let D;if(null!==this._patch){let $=this.story.ContentAtPath(new x.Path(h)).container;if(null===$)throw new Error("Content at path not found: "+h);if(D=this._patch.TryGetVisitCount($,0),D.exists)return D.result}return D=q.tryGetValueFromMap(this._visitCounts,h,null),D.exists?D.result:0}VisitCountForContainer(h){if(null===h)return K.throwNullException("container");if(!h.visitsShouldBeCounted)return this.story.Error("Read count for target ("+h.name+" - on "+h.debugMetadata+") unknown. The story may need to be compiled with countAllVisits flag (-c)."),0;if(null!==this._patch){let f2=this._patch.TryGetVisitCount(h,0);if(f2.exists)return f2.result}let D=h.path.toString(),$=q.tryGetValueFromMap(this._visitCounts,D,null);return $.exists?$.result:0}IncrementVisitCountForContainer(h){if(null!==this._patch){let f2=this.VisitCountForContainer(h);return f2++,void this._patch.SetVisitCount(h,f2)}let D=h.path.toString(),$=q.tryGetValueFromMap(this._visitCounts,D,null);this._visitCounts.set(D,$.exists?$.result+1:1)}RecordTurnIndexVisitToContainer(h){if(null!==this._patch)return void this._patch.SetTurnIndex(h,this.currentTurnIndex);let D=h.path.toString();this._turnIndices.set(D,this.currentTurnIndex)}TurnsSinceForContainer(h){if(h.turnIndexShouldBeCounted||this.story.Error("TURNS_SINCE() for target ("+h.name+" - on "+h.debugMetadata+") unknown. The story may need to be compiled with countAllVisits flag (-c)."),null!==this._patch){let f2=this._patch.TryGetTurnIndex(h,0);if(f2.exists)return this.currentTurnIndex-f2.result}let D=h.path.toString(),$=q.tryGetValueFromMap(this._turnIndices,D,0);return $.exists?this.currentTurnIndex-$.result:-1}get callstackDepth(){return this.callStack.depth}get outputStream(){return this._currentFlow.outputStream}get currentChoices(){return this.canContinue?[]:this._currentFlow.currentChoices}get generatedChoices(){return this._currentFlow.currentChoices}get currentErrors(){return this._currentErrors}get currentWarnings(){return this._currentWarnings}get variablesState(){return this._variablesState}set variablesState(h){this._variablesState=h}get callStack(){return this._currentFlow.callStack}get evaluationStack(){return this._evaluationStack}get currentTurnIndex(){return this._currentTurnIndex}set currentTurnIndex(h){this._currentTurnIndex=h}get currentPathString(){let h=this.currentPointer;return h.isNull?null:null===h.path?K.throwNullException("pointer.path"):h.path.toString()}get currentPointer(){return this.callStack.currentElement.currentPointer.copy()}set currentPointer(h){this.callStack.currentElement.currentPointer=h.copy()}get previousPointer(){return this.callStack.currentThread.previousPointer.copy()}set previousPointer(h){this.callStack.currentThread.previousPointer=h.copy()}get canContinue(){return!this.currentPointer.isNull&&!this.hasError}get hasError(){return null!=this.currentErrors&&this.currentErrors.length>0}get hasWarning(){return null!=this.currentWarnings&&this.currentWarnings.length>0}get currentText(){if(this._outputStreamTextDirty){let h=new H.StringBuilder;for(let D of this.outputStream){let $=e2.asOrNull(D,O.StringValue);null!==$&&h.Append($.value)}this._currentText=this.CleanOutputWhitespace(h.toString()),this._outputStreamTextDirty=!1}return this._currentText}CleanOutputWhitespace(h){let D=new H.StringBuilder,$=-1,f2=0;for(let l2=0;l2<h.length;l2++){let N2=h.charAt(l2),m=" "==N2||"\t"==N2;m&&-1==$&&($=l2),m||("\n"!=N2&&$>0&&$!=f2&&D.Append(" "),$=-1),"\n"==N2&&(f2=l2+1),m||D.Append(N2)}return D.toString()}get currentTags(){if(this._outputStreamTagsDirty){this._currentTags=[];for(let h of this.outputStream){let D=e2.asOrNull(h,L.Tag);null!==D&&this._currentTags.push(D.text)}this._outputStreamTagsDirty=!1}return this._currentTags}get currentFlowName(){return this._currentFlow.name}get inExpressionEvaluation(){return this.callStack.currentElement.inExpressionEvaluation}set inExpressionEvaluation(h){this.callStack.currentElement.inExpressionEvaluation=h}GoToStart(){this.callStack.currentElement.currentPointer=p.Pointer.StartOf(this.story.mainContentContainer)}SwitchFlow_Internal(h){if(null===h)throw new Error("Must pass a non-null string to Story.SwitchFlow");if(null===this._namedFlows&&(this._namedFlows=new Map,this._namedFlows.set(this.kDefaultFlowName,this._currentFlow)),h===this._currentFlow.name)return;let D,$=q.tryGetValueFromMap(this._namedFlows,h,null);$.exists?D=$.result:(D=new H2.Flow(h,this.story),this._namedFlows.set(h,D)),this._currentFlow=D,this.variablesState.callStack=this._currentFlow.callStack,this.OutputStreamDirty()}SwitchToDefaultFlow_Internal(){null!==this._namedFlows&&this.SwitchFlow_Internal(this.kDefaultFlowName)}RemoveFlow_Internal(h){if(null===h)throw new Error("Must pass a non-null string to Story.DestroyFlow");if(h===this.kDefaultFlowName)throw new Error("Cannot destroy default flow");if(this._currentFlow.name===h&&this.SwitchToDefaultFlow_Internal(),null===this._namedFlows)return K.throwNullException("this._namedFlows");this._namedFlows.delete(h)}CopyAndStartPatching(){let h=new j(this.story);if(h._patch=new Y.StatePatch(this._patch),h._currentFlow.name=this._currentFlow.name,h._currentFlow.callStack=new v.CallStack(this._currentFlow.callStack),h._currentFlow.currentChoices.push(...this._currentFlow.currentChoices),h._currentFlow.outputStream.push(...this._currentFlow.outputStream),h.OutputStreamDirty(),null!==this._namedFlows){h._namedFlows=new Map;for(let[D,$]of this._namedFlows)h._namedFlows.set(D,$);h._namedFlows.set(this._currentFlow.name,h._currentFlow)}return this.hasError&&(h._currentErrors=[],h._currentErrors.push(...this.currentErrors||[])),this.hasWarning&&(h._currentWarnings=[],h._currentWarnings.push(...this.currentWarnings||[])),h.variablesState=this.variablesState,h.variablesState.callStack=h.callStack,h.variablesState.patch=h._patch,h.evaluationStack.push(...this.evaluationStack),this.divertedPointer.isNull||(h.divertedPointer=this.divertedPointer.copy()),h.previousPointer=this.previousPointer.copy(),h._visitCounts=this._visitCounts,h._turnIndices=this._turnIndices,h.currentTurnIndex=this.currentTurnIndex,h.storySeed=this.storySeed,h.previousRandom=this.previousRandom,h.didSafeExit=this.didSafeExit,h}RestoreAfterPatch(){this.variablesState.callStack=this.callStack,this.variablesState.patch=this._patch}ApplyAnyPatch(){if(null!==this._patch){this.variablesState.ApplyPatch();for(let[h,D]of this._patch.visitCounts)this.ApplyCountChanges(h,D,!0);for(let[h,D]of this._patch.turnIndices)this.ApplyCountChanges(h,D,!1);this._patch=null}}ApplyCountChanges(h,D,$){($?this._visitCounts:this._turnIndices).set(h.path.toString(),D)}WriteJson(h){if(h.WriteObjectStart(),h.WritePropertyStart("flows"),h.WriteObjectStart(),null!==this._namedFlows)for(let[D,$]of this._namedFlows)h.WriteProperty(D,f2=>$.WriteJson(f2));else h.WriteProperty(this._currentFlow.name,D=>this._currentFlow.WriteJson(D));if(h.WriteObjectEnd(),h.WritePropertyEnd(),h.WriteProperty("currentFlowName",this._currentFlow.name),h.WriteProperty("variablesState",D=>this.variablesState.WriteJson(D)),h.WriteProperty("evalStack",D=>g.JsonSerialisation.WriteListRuntimeObjs(D,this.evaluationStack)),!this.divertedPointer.isNull){if(null===this.divertedPointer.path)return K.throwNullException("divertedPointer");h.WriteProperty("currentDivertTarget",this.divertedPointer.path.componentsString)}h.WriteProperty("visitCounts",D=>g.JsonSerialisation.WriteIntDictionary(D,this._visitCounts)),h.WriteProperty("turnIndices",D=>g.JsonSerialisation.WriteIntDictionary(D,this._turnIndices)),h.WriteIntProperty("turnIdx",this.currentTurnIndex),h.WriteIntProperty("storySeed",this.storySeed),h.WriteIntProperty("previousRandom",this.previousRandom),h.WriteIntProperty("inkSaveVersion",this.kInkSaveStateVersion),h.WriteIntProperty("inkFormatVersion",t2.Story.inkVersionCurrent),h.WriteObjectEnd()}LoadJsonObj(h){let D=h,$=D.inkSaveVersion;if(null==$)throw new Error("ink save format incorrect, can't load.");if(parseInt($)<this.kMinCompatibleLoadVersion)throw new Error("Ink save format isn't compatible with the current version (saw '"+$+"', but minimum is "+this.kMinCompatibleLoadVersion+"), so can't load.");let f2=D.flows;if(null!=f2){let N2=f2;1===Object.keys(N2).length?this._namedFlows=null:null===this._namedFlows?this._namedFlows=new Map:this._namedFlows.clear();let m=Object.entries(N2);for(let[S,N]of m){let A=S,Q=N,m2=new H2.Flow(A,this.story,Q);if(1===Object.keys(N2).length)this._currentFlow=new H2.Flow(A,this.story,Q);else{if(null===this._namedFlows)return K.throwNullException("this._namedFlows");this._namedFlows.set(A,m2)}}null!=this._namedFlows&&this._namedFlows.size>1&&(this._currentFlow=this._namedFlows.get(D.currentFlowName))}else this._namedFlows=null,this._currentFlow.name=this.kDefaultFlowName,this._currentFlow.callStack.SetJsonToken(D.callstackThreads,this.story),this._currentFlow.outputStream=g.JsonSerialisation.JArrayToRuntimeObjList(D.outputStream),this._currentFlow.currentChoices=g.JsonSerialisation.JArrayToRuntimeObjList(D.currentChoices),this._currentFlow.LoadFlowChoiceThreads(D.choiceThreads,this.story);this.OutputStreamDirty(),this.variablesState.SetJsonToken(D.variablesState),this.variablesState.callStack=this._currentFlow.callStack,this._evaluationStack=g.JsonSerialisation.JArrayToRuntimeObjList(D.evalStack);let l2=D.currentDivertTarget;if(null!=l2){let N2=new x.Path(l2.toString());this.divertedPointer=this.story.PointerAtPath(N2)}this._visitCounts=g.JsonSerialisation.JObjectToIntDictionary(D.visitCounts),this._turnIndices=g.JsonSerialisation.JObjectToIntDictionary(D.turnIndices),this.currentTurnIndex=parseInt(D.turnIdx),this.storySeed=parseInt(D.storySeed),this.previousRandom=parseInt(D.previousRandom)}ResetErrors(){this._currentErrors=null,this._currentWarnings=null}ResetOutput(h=null){this.outputStream.length=0,null!==h&&this.outputStream.push(...h),this.OutputStreamDirty()}PushToOutputStream(h){let D=e2.asOrNull(h,O.StringValue);if(null!==D){let $=this.TrySplittingHeadTailWhitespace(D);if(null!==$){for(let f2 of $)this.PushToOutputStreamIndividual(f2);return void this.OutputStreamDirty()}}this.PushToOutputStreamIndividual(h),this.OutputStreamDirty()}PopFromOutputStream(h){this.outputStream.splice(this.outputStream.length-h,h),this.OutputStreamDirty()}TrySplittingHeadTailWhitespace(h){let D=h.value;if(null===D)return K.throwNullException("single.value");let $=-1,f2=-1;for(let A=0;A<D.length;A++){let Q=D[A];if("\n"!=Q){if(" "==Q||"\t"==Q)continue;break}-1==$&&($=A),f2=A}let l2=-1,N2=-1;for(let A=D.length-1;A>=0;A--){let Q=D[A];if("\n"!=Q){if(" "==Q||"\t"==Q)continue;break}-1==l2&&(l2=A),N2=A}if(-1==$&&-1==l2)return null;let m=[],S=0,N=D.length;if(-1!=$){if($>0){let A=new O.StringValue(D.substring(0,$));m.push(A)}m.push(new O.StringValue("\n")),S=f2+1}if(-1!=l2&&(N=N2),N>S){let A=D.substring(S,N-S);m.push(new O.StringValue(A))}if(-1!=l2&&N2>f2&&(m.push(new O.StringValue("\n")),l2<D.length-1)){let Q=new O.StringValue(D.substring(l2+1,D.length-l2-1));m.push(Q)}return m}PushToOutputStreamIndividual(h){let D=e2.asOrNull(h,M.Glue),$=e2.asOrNull(h,O.StringValue),f2=!0;if(D)this.TrimNewlinesFromOutputStream(),f2=!0;else if($){let l2=-1,N2=this.callStack.currentElement;N2.type==w.PushPopType.Function&&(l2=N2.functionStartInOutputStream);let m=-1;for(let N=this.outputStream.length-1;N>=0;N--){let A=this.outputStream[N],Q=A instanceof _.ControlCommand?A:null;if(null!=(A instanceof M.Glue?A:null)){m=N;break}if(null!=Q&&Q.commandType==_.ControlCommand.CommandType.BeginString){N>=l2&&(l2=-1);break}}let S=-1;if(S=-1!=m&&-1!=l2?Math.min(l2,m):-1!=m?m:l2,-1!=S){if($.isNewline)f2=!1;else if($.isNonWhitespace&&(m>-1&&this.RemoveExistingGlue(),l2>-1)){let N=this.callStack.elements;for(let A=N.length-1;A>=0;A--){let Q=N[A];if(Q.type!=w.PushPopType.Function)break;Q.functionStartInOutputStream=-1}}}else $.isNewline&&(this.outputStreamEndsInNewline||!this.outputStreamContainsContent)&&(f2=!1)}if(f2){if(null===h)return K.throwNullException("obj");this.outputStream.push(h),this.OutputStreamDirty()}}TrimNewlinesFromOutputStream(){let h=-1,D=this.outputStream.length-1;for(;D>=0;){let $=this.outputStream[D],f2=e2.asOrNull($,_.ControlCommand),l2=e2.asOrNull($,O.StringValue);if(null!=f2||null!=l2&&l2.isNonWhitespace)break;null!=l2&&l2.isNewline&&(h=D),D--}if(h>=0)for(D=h;D<this.outputStream.length;)e2.asOrNull(this.outputStream[D],O.StringValue)?this.outputStream.splice(D,1):D++;this.OutputStreamDirty()}RemoveExistingGlue(){for(let h=this.outputStream.length-1;h>=0;h--){let D=this.outputStream[h];if(D instanceof M.Glue)this.outputStream.splice(h,1);else if(D instanceof _.ControlCommand)break}this.OutputStreamDirty()}get outputStreamEndsInNewline(){if(this.outputStream.length>0)for(let h=this.outputStream.length-1;h>=0&&!(this.outputStream[h]instanceof _.ControlCommand);h--){let $=this.outputStream[h];if($ instanceof O.StringValue){if($.isNewline)return!0;if($.isNonWhitespace)break}}return!1}get outputStreamContainsContent(){for(let h of this.outputStream)if(h instanceof O.StringValue)return!0;return!1}get inStringEvaluation(){for(let h=this.outputStream.length-1;h>=0;h--){let D=e2.asOrNull(this.outputStream[h],_.ControlCommand);if(D instanceof _.ControlCommand&&D.commandType==_.ControlCommand.CommandType.BeginString)return!0}return!1}PushEvaluationStack(h){let D=e2.asOrNull(h,O.ListValue);if(D){let $=D.value;if(null===$)return K.throwNullException("rawList");if(null!=$.originNames){$.origins||($.origins=[]),$.origins.length=0;for(let f2 of $.originNames){if(null===this.story.listDefinitions)return K.throwNullException("StoryState.story.listDefinitions");let l2=this.story.listDefinitions.TryListGetDefinition(f2,null);if(null===l2.result)return K.throwNullException("StoryState def.result");$.origins.indexOf(l2.result)<0&&$.origins.push(l2.result)}}}if(null===h)return K.throwNullException("obj");this.evaluationStack.push(h)}PopEvaluationStack(h){if(typeof h>"u"){let D=this.evaluationStack.pop();return e2.nullIfUndefined(D)}{if(h>this.evaluationStack.length)throw new Error("trying to pop too many objects");let D=this.evaluationStack.splice(this.evaluationStack.length-h,h);return e2.nullIfUndefined(D)}}PeekEvaluationStack(){return this.evaluationStack[this.evaluationStack.length-1]}ForceEnd(){this.callStack.Reset(),this._currentFlow.currentChoices.length=0,this.currentPointer=p.Pointer.Null,this.previousPointer=p.Pointer.Null,this.didSafeExit=!0}TrimWhitespaceFromFunctionEnd(){n2.Debug.Assert(this.callStack.currentElement.type==w.PushPopType.Function);let h=this.callStack.currentElement.functionStartInOutputStream;-1==h&&(h=0);for(let D=this.outputStream.length-1;D>=h;D--){let $=this.outputStream[D],f2=e2.asOrNull($,O.StringValue),l2=e2.asOrNull($,_.ControlCommand);if(null!=f2){if(l2)break;if(!f2.isNewline&&!f2.isInlineWhitespace)break;this.outputStream.splice(D,1),this.OutputStreamDirty()}}}PopCallStack(h=null){this.callStack.currentElement.type==w.PushPopType.Function&&this.TrimWhitespaceFromFunctionEnd(),this.callStack.Pop(h)}SetChosenPath(h,D){this._currentFlow.currentChoices.length=0;let $=this.story.PointerAtPath(h);!$.isNull&&-1==$.index&&($.index=0),this.currentPointer=$,D&&this.currentTurnIndex++}StartFunctionEvaluationFromGame(h,D){this.callStack.Push(w.PushPopType.FunctionEvaluationFromGame,this.evaluationStack.length),this.callStack.currentElement.currentPointer=p.Pointer.StartOf(h),this.PassArgumentsToEvaluationStack(D)}PassArgumentsToEvaluationStack(h){if(null!==h)for(let D=0;D<h.length;D++){if("number"!=typeof h[D]&&"string"!=typeof h[D]||h[D]instanceof P.InkList)throw new Error((e2.nullIfUndefined(arguments[D]),"null"));this.PushEvaluationStack(O.Value.Create(h[D]))}}TryExitFunctionEvaluationFromGame(){return this.callStack.currentElement.type==w.PushPopType.FunctionEvaluationFromGame&&(this.currentPointer=p.Pointer.Null,this.didSafeExit=!0,!0)}CompleteFunctionEvaluationFromGame(){if(this.callStack.currentElement.type!=w.PushPopType.FunctionEvaluationFromGame)throw new Error("Expected external function evaluation to be complete. Stack trace: "+this.callStack.callStackTrace);let h=this.callStack.currentElement.evaluationStackHeightWhenPushed,D=null;for(;this.evaluationStack.length>h;){let $=this.PopEvaluationStack();null===D&&(D=$)}if(this.PopCallStack(w.PushPopType.FunctionEvaluationFromGame),D){if(D instanceof d.Void)return null;let $=e2.asOrThrows(D,O.Value);return $.valueType==O.ValueType.DivertTarget?$.valueObject.toString():$.valueObject}return null}AddError(h,D){D?(null==this._currentWarnings&&(this._currentWarnings=[]),this._currentWarnings.push(h)):(null==this._currentErrors&&(this._currentErrors=[]),this._currentErrors.push(h))}OutputStreamDirty(){this._outputStreamTextDirty=!0,this._outputStreamTagsDirty=!0}}b.StoryState=j},259:(A2,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.StringBuilder=void 0,b.StringBuilder=class z{constructor(y){y=typeof y<"u"?y.toString():"",this.string=y}get Length(){return this.string.length}Append(y){null!==y&&(this.string+=y)}AppendLine(y){typeof y<"u"&&this.Append(y),this.string+="\n"}AppendFormat(y,...O){this.string+=y.replace(/{(\d+)}/g,(w,L)=>typeof O[L]<"u"?O[L]:w)}toString(){return this.string}}},912:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Tag=void 0;const v=z(522);b.Tag=class y extends v.InkObject{constructor(w){super(),this.text=w.toString()||""}toString(){return"# "+this.text}}},723:(A2,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.tryParseFloat=b.tryParseInt=b.tryGetValueFromMap=void 0,b.tryGetValueFromMap=function z(O,w,L){if(null===O)return{result:L,exists:!1};let M=O.get(w);return typeof M>"u"?{result:L,exists:!1}:{result:M,exists:!0}},b.tryParseInt=function v(O,w=0){let L=parseInt(O);return Number.isNaN(L)?{result:w,exists:!1}:{result:L,exists:!0}},b.tryParseFloat=function y(O,w=0){let L=parseFloat(O);return Number.isNaN(L)?{result:w,exists:!1}:{result:L,exists:!0}}},138:(A2,b)=>{function x(H,g){return H}Object.defineProperty(b,"__esModule",{value:!0}),b.filterUndef=b.isEquatable=b.nullIfUndefined=b.asINamedContentOrNull=b.asBooleanOrThrows=b.asNumberOrThrows=b.asOrThrows=b.asOrNull=void 0,b.asOrNull=function z(H,g){return H instanceof g?x(H):null},b.asOrThrows=function v(H,g){if(H instanceof g)return x(H);throw new Error(`${H} is not of type ${g}`)},b.asNumberOrThrows=function y(H){if("number"==typeof H)return H;throw new Error(`${H} is not a number`)},b.asBooleanOrThrows=function O(H){if("boolean"==typeof H)return H;throw new Error(`${H} is not a boolean`)},b.asINamedContentOrNull=function w(H){return H.hasValidName&&H.name?H:null},b.nullIfUndefined=function L(H){return typeof H>"u"?null:H},b.isEquatable=function M(H){return"object"==typeof H&&"function"==typeof H.Equals},b.filterUndef=function _(H){return null!=H}},843:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ValueType=b.ListValue=b.VariablePointerValue=b.DivertTargetValue=b.StringValue=b.FloatValue=b.IntValue=b.BoolValue=b.Value=b.AbstractValue=void 0;const v=z(522),y=z(313),O=z(673),w=z(500),L=z(138),M=z(723),x=z(919);class _ extends v.InkObject{static Create(Y,p2){if(p2){if(p2===K.Int&&Number.isInteger(Number(Y)))return new k(Number(Y));if(p2===K.Float&&!isNaN(Y))return new d(Number(Y))}return"boolean"==typeof Y?new g(Boolean(Y)):"string"==typeof Y?new p(String(Y)):Number.isInteger(Number(Y))?new k(Number(Y)):isNaN(Y)?Y instanceof y.Path?new q(L.asOrThrows(Y,y.Path)):Y instanceof O.InkList?new n2(L.asOrThrows(Y,O.InkList)):null:new d(Number(Y))}Copy(){return L.asOrThrows(_.Create(this.valueObject),v.InkObject)}BadCastException(Y){return new w.StoryException("Can't cast "+this.valueObject+" from "+this.valueType+" to "+Y)}}b.AbstractValue=_;class H extends _{constructor(Y){super(),this.value=Y}get valueObject(){return this.value}toString(){return null===this.value?x.throwNullException("Value.value"):this.value.toString()}}b.Value=H;class g extends H{constructor(Y){super(Y||!1)}get isTruthy(){return Boolean(this.value)}get valueType(){return K.Bool}Cast(Y){if(null===this.value)return x.throwNullException("Value.value");if(Y==this.valueType)return this;if(Y==K.Int)return new k(this.value?1:0);if(Y==K.Float)return new d(this.value?1:0);if(Y==K.String)return new p(this.value?"true":"false");throw this.BadCastException(Y)}toString(){return this.value?"true":"false"}}b.BoolValue=g;class k extends H{constructor(Y){super(Y||0)}get isTruthy(){return 0!=this.value}get valueType(){return K.Int}Cast(Y){if(null===this.value)return x.throwNullException("Value.value");if(Y==this.valueType)return this;if(Y==K.Bool)return new g(0!==this.value);if(Y==K.Float)return new d(this.value);if(Y==K.String)return new p(""+this.value);throw this.BadCastException(Y)}}b.IntValue=k;class d extends H{constructor(Y){super(Y||0)}get isTruthy(){return 0!=this.value}get valueType(){return K.Float}Cast(Y){if(null===this.value)return x.throwNullException("Value.value");if(Y==this.valueType)return this;if(Y==K.Bool)return new g(0!==this.value);if(Y==K.Int)return new k(this.value);if(Y==K.String)return new p(""+this.value);throw this.BadCastException(Y)}}b.FloatValue=d;class p extends H{constructor(Y){if(super(Y||""),this._isNewline="\n"==this.value,this._isInlineWhitespace=!0,null===this.value)return x.throwNullException("Value.value");this.value.length>0&&this.value.split("").every(p2=>" "==p2||"\t"==p2||(this._isInlineWhitespace=!1,!1))}get valueType(){return K.String}get isTruthy(){return null===this.value?x.throwNullException("Value.value"):this.value.length>0}get isNewline(){return this._isNewline}get isInlineWhitespace(){return this._isInlineWhitespace}get isNonWhitespace(){return!this.isNewline&&!this.isInlineWhitespace}Cast(Y){if(Y==this.valueType)return this;if(Y==K.Int){let p2=M.tryParseInt(this.value);if(p2.exists)return new k(p2.result);throw this.BadCastException(Y)}if(Y==K.Float){let p2=M.tryParseFloat(this.value);if(p2.exists)return new d(p2.result);throw this.BadCastException(Y)}throw this.BadCastException(Y)}}b.StringValue=p;class q extends H{constructor(Y=null){super(Y)}get valueType(){return K.DivertTarget}get targetPath(){return null===this.value?x.throwNullException("Value.value"):this.value}set targetPath(Y){this.value=Y}get isTruthy(){throw new Error("Shouldn't be checking the truthiness of a divert target")}Cast(Y){if(Y==this.valueType)return this;throw this.BadCastException(Y)}toString(){return"DivertTargetValue("+this.targetPath+")"}}b.DivertTargetValue=q;class e2 extends H{constructor(Y,p2=-1){super(Y),this._contextIndex=p2}get contextIndex(){return this._contextIndex}set contextIndex(Y){this._contextIndex=Y}get variableName(){return null===this.value?x.throwNullException("Value.value"):this.value}set variableName(Y){this.value=Y}get valueType(){return K.VariablePointer}get isTruthy(){throw new Error("Shouldn't be checking the truthiness of a variable pointer")}Cast(Y){if(Y==this.valueType)return this;throw this.BadCastException(Y)}toString(){return"VariablePointerValue("+this.variableName+")"}Copy(){return new e2(this.variableName,this.contextIndex)}}b.VariablePointerValue=e2;class n2 extends H{get isTruthy(){return null===this.value?x.throwNullException("this.value"):this.value.Count>0}get valueType(){return K.List}Cast(Y){if(null===this.value)return x.throwNullException("Value.value");if(Y==K.Int){let p2=this.value.maxItem;return new k(p2.Key.isNull?0:p2.Value)}if(Y==K.Float){let p2=this.value.maxItem;return new d(p2.Key.isNull?0:p2.Value)}if(Y==K.String){let p2=this.value.maxItem;return new p(p2.Key.isNull?"":p2.Key.toString())}if(Y==this.valueType)return this;throw this.BadCastException(Y)}constructor(Y,p2){super(null),Y||p2?Y instanceof O.InkList?this.value=new O.InkList(Y):Y instanceof O.InkListItem&&"number"==typeof p2&&(this.value=new O.InkList({Key:Y,Value:p2})):this.value=new O.InkList}static RetainListOriginsForAssignment(Y,p2){let H2=L.asOrNull(Y,n2),P=L.asOrNull(p2,n2);return P&&null===P.value?x.throwNullException("newList.value"):H2&&null===H2.value?x.throwNullException("oldList.value"):void(H2&&P&&0==P.value.Count&&P.value.SetInitialOriginNames(H2.value.originNames))}}var K,t2;b.ListValue=n2,(t2=K=b.ValueType||(b.ValueType={}))[t2.Bool=-1]="Bool",t2[t2.Int=0]="Int",t2[t2.Float=1]="Float",t2[t2.List=2]="List",t2[t2.String=3]="String",t2[t2.DivertTarget=4]="DivertTarget",t2[t2.VariablePointer=5]="VariablePointer"},618:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.VariableAssignment=void 0;const v=z(522);b.VariableAssignment=class y extends v.InkObject{constructor(w,L){super(),this.variableName=w||null,this.isNewDeclaration=!!L,this.isGlobal=!1}toString(){return"VarAssign to "+this.variableName}}},159:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.VariableReference=void 0;const v=z(522),y=z(313);b.VariableReference=class O extends v.InkObject{constructor(L=null){super(),this.pathForCount=null,this.name=L}get containerForCount(){return null===this.pathForCount?null:this.ResolvePath(this.pathForCount).container}get pathStringForCount(){return null===this.pathForCount?null:this.CompactPathString(this.pathForCount)}set pathStringForCount(L){this.pathForCount=null===L?null:new y.Path(L)}toString(){return null!=this.name?"var("+this.name+")":"read_count("+this.pathStringForCount+")"}}},822:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.VariablesState=void 0;const v=z(843),y=z(500),O=z(936),w=z(138),L=z(723),M=z(919);class x{constructor(H,g){this.variableChangedEventCallbacks=[],this.patch=null,this._batchObservingVariableChanges=!1,this._defaultGlobalVariables=new Map,this._changedVariablesForBatchObs=new Set,this._globalVariables=new Map,this._callStack=H,this._listDefsOrigin=g;try{return new Proxy(this,{get:(d,p)=>p in d?d[p]:d.$(p),set:(d,p,q)=>(p in d?d[p]=q:d.$(p,q),!0)})}catch{}}variableChangedEvent(H,g){for(let k of this.variableChangedEventCallbacks)k(H,g)}get batchObservingVariableChanges(){return this._batchObservingVariableChanges}set batchObservingVariableChanges(H){if(this._batchObservingVariableChanges=H,H)this._changedVariablesForBatchObs=new Set;else if(null!=this._changedVariablesForBatchObs){for(let g of this._changedVariablesForBatchObs){let k=this._globalVariables.get(g);k?this.variableChangedEvent(g,k):M.throwNullException("currentValue")}this._changedVariablesForBatchObs=null}}get callStack(){return this._callStack}set callStack(H){this._callStack=H}$(H,g){if(typeof g>"u"){let k=null;return null!==this.patch&&(k=this.patch.TryGetGlobal(H,null),k.exists)?k.result.valueObject:(k=this._globalVariables.get(H),typeof k>"u"&&(k=this._defaultGlobalVariables.get(H)),typeof k<"u"?k.valueObject:null)}{if(typeof this._defaultGlobalVariables.get(H)>"u")throw new y.StoryException("Cannot assign to a variable ("+H+") that hasn't been declared in the story");let k=v.Value.Create(g);if(null==k)throw null==g?new Error("Cannot pass null to VariableState"):new Error("Invalid value passed to VariableState: "+g.toString());this.SetGlobal(H,k)}}ApplyPatch(){if(null===this.patch)return M.throwNullException("this.patch");for(let[H,g]of this.patch.globals)this._globalVariables.set(H,g);if(null!==this._changedVariablesForBatchObs)for(let H of this.patch.changedVariables)this._changedVariablesForBatchObs.add(H);this.patch=null}SetJsonToken(H){this._globalVariables.clear();for(let[g,k]of this._defaultGlobalVariables){let d=H[g];if(typeof d<"u"){let p=O.JsonSerialisation.JTokenToRuntimeObject(d);if(null===p)return M.throwNullException("tokenInkObject");this._globalVariables.set(g,p)}else this._globalVariables.set(g,k)}}WriteJson(H){H.WriteObjectStart();for(let[g,k]of this._globalVariables){let d=g,p=k;if(x.dontSaveDefaultValues&&this._defaultGlobalVariables.has(d)){let q=this._defaultGlobalVariables.get(d);if(this.RuntimeObjectsEqual(p,q))continue}H.WritePropertyStart(d),O.JsonSerialisation.WriteRuntimeObject(H,p),H.WritePropertyEnd()}H.WriteObjectEnd()}RuntimeObjectsEqual(H,g){if(null===H)return M.throwNullException("obj1");if(null===g)return M.throwNullException("obj2");if(H.constructor!==g.constructor)return!1;let k=w.asOrNull(H,v.BoolValue);if(null!==k)return k.value===w.asOrThrows(g,v.BoolValue).value;let d=w.asOrNull(H,v.IntValue);if(null!==d)return d.value===w.asOrThrows(g,v.IntValue).value;let p=w.asOrNull(H,v.FloatValue);if(null!==p)return p.value===w.asOrThrows(g,v.FloatValue).value;let q=w.asOrNull(H,v.Value),e2=w.asOrNull(g,v.Value);if(null!==q&&null!==e2)return w.isEquatable(q.valueObject)&&w.isEquatable(e2.valueObject)?q.valueObject.Equals(e2.valueObject):q.valueObject===e2.valueObject;throw new Error("FastRoughDefinitelyEquals: Unsupported runtime object type: "+H.constructor.name)}GetVariableWithName(H,g=-1){let k=this.GetRawVariableWithName(H,g),d=w.asOrNull(k,v.VariablePointerValue);return null!==d&&(k=this.ValueAtVariablePointer(d)),k}TryGetDefaultVariableValue(H){let g=L.tryGetValueFromMap(this._defaultGlobalVariables,H,null);return g.exists?g.result:null}GlobalVariableExistsWithName(H){return this._globalVariables.has(H)||null!==this._defaultGlobalVariables&&this._defaultGlobalVariables.has(H)}GetRawVariableWithName(H,g){let k=null;if(0==g||-1==g){let d=null;if(null!==this.patch&&(d=this.patch.TryGetGlobal(H,null),d.exists)||(d=L.tryGetValueFromMap(this._globalVariables,H,null),d.exists)||null!==this._defaultGlobalVariables&&(d=L.tryGetValueFromMap(this._defaultGlobalVariables,H,null),d.exists))return d.result;if(null===this._listDefsOrigin)return M.throwNullException("VariablesState._listDefsOrigin");let p=this._listDefsOrigin.FindSingleItemListWithName(H);if(p)return p}return k=this._callStack.GetTemporaryVariableWithName(H,g),k}ValueAtVariablePointer(H){return this.GetVariableWithName(H.variableName,H.contextIndex)}Assign(H,g){let k=H.variableName;if(null===k)return M.throwNullException("name");let d=-1,p=!1;if(p=H.isNewDeclaration?H.isGlobal:this.GlobalVariableExistsWithName(k),H.isNewDeclaration){let q=w.asOrNull(g,v.VariablePointerValue);null!==q&&(g=this.ResolveVariablePointer(q))}else{let q=null;do{q=w.asOrNull(this.GetRawVariableWithName(k,d),v.VariablePointerValue),null!=q&&(k=q.variableName,d=q.contextIndex,p=0==d)}while(null!=q)}p?this.SetGlobal(k,g):this._callStack.SetTemporaryVariable(k,g,H.isNewDeclaration,d)}SnapshotDefaultGlobals(){this._defaultGlobalVariables=new Map(this._globalVariables)}RetainListOriginsForAssignment(H,g){let k=w.asOrThrows(H,v.ListValue),d=w.asOrThrows(g,v.ListValue);k.value&&d.value&&0==d.value.Count&&d.value.SetInitialOriginNames(k.value.originNames)}SetGlobal(H,g){let k=null;if(null===this.patch&&(k=L.tryGetValueFromMap(this._globalVariables,H,null)),null!==this.patch&&(k=this.patch.TryGetGlobal(H,null),k.exists||(k=L.tryGetValueFromMap(this._globalVariables,H,null))),v.ListValue.RetainListOriginsForAssignment(k.result,g),null===H)return M.throwNullException("variableName");if(null!==this.patch?this.patch.SetGlobal(H,g):this._globalVariables.set(H,g),null!==this.variableChangedEvent&&null!==k&&g!==k.result)if(this.batchObservingVariableChanges){if(null===this._changedVariablesForBatchObs)return M.throwNullException("this._changedVariablesForBatchObs");null!==this.patch?this.patch.AddChangedVariable(H):null!==this._changedVariablesForBatchObs&&this._changedVariablesForBatchObs.add(H)}else this.variableChangedEvent(H,g)}ResolveVariablePointer(H){let g=H.contextIndex;-1==g&&(g=this.GetContextIndexOfVariableNamed(H.variableName));let k=this.GetRawVariableWithName(H.variableName,g);return w.asOrNull(k,v.VariablePointerValue)??new v.VariablePointerValue(H.variableName,g)}GetContextIndexOfVariableNamed(H){return this.GlobalVariableExistsWithName(H)?0:this._callStack.currentElementIndex}ObserveVariableChange(H){this.variableChangedEventCallbacks.push(H)}}b.VariablesState=x,x.dontSaveDefaultValues=!0},565:(A2,b,z)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Void=void 0;const v=z(522);b.Void=class y extends v.InkObject{}}},A2=>{A2(A2.s=784)}]);